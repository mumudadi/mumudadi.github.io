{"meta":{"title":"æœ¨æœ¨","subtitle":null,"description":"å¥½å°‘å¹´å…‰èŠ’ä¸‡ä¸ˆ","author":"æœ¨æœ¨","url":"mumudadi.top"},"pages":[{"title":"bangumi","date":"2019-02-10T13:32:48.000Z","updated":"2019-12-16T09:23:22.181Z","comments":false,"path":"bangumi/index.html","permalink":"mumudadi.top/bangumi/index.html","excerpt":"","text":"","keywords":null},{"title":"client","date":"2018-12-20T15:13:35.000Z","updated":"2019-12-16T16:05:00.170Z","comments":false,"path":"client/index.html","permalink":"mumudadi.top/client/index.html","excerpt":"","text":"ç›´æ¥ä¸‹è½½ or æ‰«ç ä¸‹è½½ï¼š","keywords":"Androidå®¢æˆ·ç«¯"},{"title":"comment","date":"2018-12-20T15:13:48.000Z","updated":"2019-12-16T15:48:11.540Z","comments":true,"path":"comment/index.html","permalink":"mumudadi.top/comment/index.html","excerpt":"","text":"å¿µä¸¤å¥è¯— å™åˆ«æ¢¦ã€æ‰¬å·ä¸€è§‰ã€‚ ã€å®‹ä»£ã€‘å´æ–‡è‹±ã€Šå¤œæ¸¸å®«Â·äººå»è¥¿æ¥¼é›æ³ã€‹","keywords":"ç•™è¨€æ¿"},{"title":"donate","date":"2018-12-20T15:13:05.000Z","updated":"2019-12-16T16:06:24.297Z","comments":false,"path":"donate/index.html","permalink":"mumudadi.top/donate/index.html","excerpt":"","text":"","keywords":"è°¢è°¢é¥²ä¸»äº†å–µ~"},{"title":"lab","date":"2019-01-05T13:47:59.000Z","updated":"2019-12-16T16:07:19.049Z","comments":false,"path":"lab/index.html","permalink":"mumudadi.top/lab/index.html","excerpt":"","text":"sakuraä¸»é¢˜balabala","keywords":"Labå®éªŒå®¤"},{"title":"music","date":"2018-12-20T15:14:28.000Z","updated":"2020-02-03T11:48:09.946Z","comments":false,"path":"music/index.html","permalink":"mumudadi.top/music/index.html","excerpt":"","text":"","keywords":"å–œæ¬¢çš„éŸ³ä¹"},{"title":"rss","date":"2018-12-20T15:09:03.000Z","updated":"2019-12-16T09:23:22.186Z","comments":true,"path":"rss/index.html","permalink":"mumudadi.top/rss/index.html","excerpt":"","text":""},{"title":"tags","date":"2018-12-12T14:14:16.000Z","updated":"2019-12-16T09:23:22.187Z","comments":true,"path":"tags/index.html","permalink":"mumudadi.top/tags/index.html","excerpt":"","text":""},{"title":"theme-sakura","date":"2019-01-04T14:53:25.000Z","updated":"2019-12-16T09:23:22.187Z","comments":false,"path":"theme-sakura/index.html","permalink":"mumudadi.top/theme-sakura/index.html","excerpt":"","text":"Hexoä¸»é¢˜Sakuraä¿®æ”¹è‡ªWordPressä¸»é¢˜Sakuraï¼Œæ„Ÿè°¢åŸä½œè€…Mashiro","keywords":"Hexo ä¸»é¢˜ Sakura ğŸŒ¸"},{"title":"about","date":"2018-12-12T14:14:36.000Z","updated":"2020-01-11T13:15:18.957Z","comments":false,"path":"about/index.html","permalink":"mumudadi.top/about/index.html","excerpt":"","text":"[ã•ãã‚‰è˜ã®æœ¨æœ¨] ä¸&nbsp; Mashiro&nbsp; ï¼ˆ çœŸï¼ˆã¾ï¼‰ç™½ï¼ˆã—ã‚ï¼‰ ï¼‰ å¯¹è¯ä¸­... bot_ui_ini()","keywords":"å…³äº"},{"title":"video","date":"2018-12-20T15:14:38.000Z","updated":"2019-12-16T09:23:22.188Z","comments":false,"path":"video/index.html","permalink":"mumudadi.top/video/index.html","excerpt":"","text":"var videos = [ { img: 'https://lain.bgm.tv/pic/cover/l/0e/1e/218971_2y351.jpg', title: 'æœèŠ±å¤•èª“â€”â€”äºç¦»åˆ«ä¹‹æœæŸèµ·çº¦å®šä¹‹èŠ±', status: 'å·²è¿½å®Œ', progress: 100, jp: 'ã•ã‚ˆãªã‚‰ã®æœã«ç´„æŸã®èŠ±ã‚’ã‹ã–ã‚ã†', time: 'æ”¾é€æ—¶é—´: 2018-02-24 SUN.', desc: ' ä½åœ¨è¿œç¦»å°˜åš£çš„åœŸåœ°ï¼Œä¸€è¾¹å°†æ¯å¤©çš„äº‹æƒ…ç¼–ç»‡æˆåä¸ºå¸Œæ¯”æ¬§çš„å¸ƒï¼Œä¸€è¾¹é™é™ç”Ÿæ´»çš„ä¼Šæ¬§å¤«äººæ°‘ã€‚åœ¨15å²å·¦å³å¤–è¡¨å°±åœæ­¢æˆé•¿ï¼Œæ‹¥æœ‰æ•°ç™¾å¹´å¯¿å‘½çš„ä»–ä»¬ï¼Œè¢«ç§°ä¸ºâ€œç¦»åˆ«çš„ä¸€æ—â€ï¼Œå¹¶è¢«è§†ä¸ºæ´»ç€çš„ä¼ è¯´ã€‚æ²¡æœ‰åŒäº²çš„ä¼Šæ¬§å¤«å°‘å¥³ç›å¥‡äºšï¼Œè¿‡ç€è¢«ä¼™ä¼´åŒ…å›´çš„å¹³ç¨³æ—¥å­ï¼Œå´æ€»æ„Ÿè§‰â€œå­¤èº«ä¸€äººâ€ã€‚ä»–ä»¬çš„è¿™ç§æ—¥å¸¸ï¼Œä¸€ç¬é—´å°±å´©æºƒæ¶ˆå¤±ã€‚è¿½æ±‚ä¼Šæ¬§å¤«çš„é•¿å¯¿ä¹‹è¡€ï¼Œæ¢…è¨è’‚å†›ä¹˜åç€åä¸ºé›·çº³ç‰¹çš„å¤ä»£å…½å‘åŠ¨äº†è¿›æ”»ã€‚åœ¨ç»æœ›ä¸æ··ä¹±ä¹‹ä¸­ï¼Œä¼Šæ¬§å¤«çš„ç¬¬ä¸€ç¾å¥³è•¾è‰äºšè¢«æ¢…è¨è’‚å¸¦èµ°ï¼Œè€Œç›å¥‡äºšæš—æ‹çš„å°‘å¹´å…‹é‡Œå§†ä¹Ÿå¤±è¸ªäº†ã€‚ç›å¥‡äºšè™½ç„¶æ€»ç®—é€ƒè„±äº†ï¼Œå´å¤±å»äº†ä¼™ä¼´å’Œå½’å»ä¹‹åœ°â€¦â€¦ã€‚' }, { img : 'https://lain.bgm.tv/pic/cover/l/0e/1e/218971_2y351.jpg', title: 'æœèŠ±å¤•èª“â€”â€”äºç¦»åˆ«ä¹‹æœæŸèµ·çº¦å®šä¹‹èŠ±', status: 'å·²è¿½å®Œ', progress: 100, jp: 'ã•ã‚ˆãªã‚‰ã®æœã«ç´„æŸã®èŠ±ã‚’ã‹ã–ã‚ã†', time: '2018-02-24 SUN.', desc: ' ä½åœ¨è¿œç¦»å°˜åš£çš„åœŸåœ°ï¼Œä¸€è¾¹å°†æ¯å¤©çš„äº‹æƒ…ç¼–ç»‡æˆåä¸ºå¸Œæ¯”æ¬§çš„å¸ƒï¼Œä¸€è¾¹é™é™ç”Ÿæ´»çš„ä¼Šæ¬§å¤«äººæ°‘ã€‚åœ¨15å²å·¦å³å¤–è¡¨å°±åœæ­¢æˆé•¿ï¼Œæ‹¥æœ‰æ•°ç™¾å¹´å¯¿å‘½çš„ä»–ä»¬ï¼Œè¢«ç§°ä¸ºâ€œç¦»åˆ«çš„ä¸€æ—â€ï¼Œå¹¶è¢«è§†ä¸ºæ´»ç€çš„ä¼ è¯´ã€‚æ²¡æœ‰åŒäº²çš„ä¼Šæ¬§å¤«å°‘å¥³ç›å¥‡äºšï¼Œè¿‡ç€è¢«ä¼™ä¼´åŒ…å›´çš„å¹³ç¨³æ—¥å­ï¼Œå´æ€»æ„Ÿè§‰â€œå­¤èº«ä¸€äººâ€ã€‚ä»–ä»¬çš„è¿™ç§æ—¥å¸¸ï¼Œä¸€ç¬é—´å°±å´©æºƒæ¶ˆå¤±ã€‚è¿½æ±‚ä¼Šæ¬§å¤«çš„é•¿å¯¿ä¹‹è¡€ï¼Œæ¢…è¨è’‚å†›ä¹˜åç€åä¸ºé›·çº³ç‰¹çš„å¤ä»£å…½å‘åŠ¨äº†è¿›æ”»ã€‚åœ¨ç»æœ›ä¸æ··ä¹±ä¹‹ä¸­ï¼Œä¼Šæ¬§å¤«çš„ç¬¬ä¸€ç¾å¥³è•¾è‰äºšè¢«æ¢…è¨è’‚å¸¦èµ°ï¼Œè€Œç›å¥‡äºšæš—æ‹çš„å°‘å¹´å…‹é‡Œå§†ä¹Ÿå¤±è¸ªäº†ã€‚ç›å¥‡äºšè™½ç„¶æ€»ç®—é€ƒè„±äº†ï¼Œå´å¤±å»äº†ä¼™ä¼´å’Œå½’å»ä¹‹åœ°â€¦â€¦ã€‚' } ] .should-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:95%;}.should-ellipsis-full{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;}.should-ellipsis i{position:absolute;right:24px;}.grey-text{color:#9e9e9e !important}.grey-text.text-darken-4{color:#212121 !important}html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}img{border-style:none}progress{display:inline-block;vertical-align:baseline}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{-webkit-box-sizing:border-box;box-sizing:border-box}*,*:before,*:after{-webkit-box-sizing:inherit;box-sizing:inherit}ul:not(.browser-default){padding-left:0;list-style-type:none}ul:not(.browser-default)>li{list-style-type:none}.card{-webkit-box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 3px 1px -2px rgba(0,0,0,0.12),0 1px 5px 0 rgba(0,0,0,0.2);box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 3px 1px -2px rgba(0,0,0,0.12),0 1px 5px 0 rgba(0,0,0,0.2)}.hoverable{-webkit-transition:-webkit-box-shadow .25s;transition:-webkit-box-shadow .25s;transition:box-shadow .25s;transition:box-shadow .25s,-webkit-box-shadow .25s}.hoverable:hover{-webkit-box-shadow:0 8px 17px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);box-shadow:0 8px 17px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19)}i{line-height:inherit}i.right{float:right;margin-left:15px}.bangumi .right{float:right !important}.material-icons{text-rendering:optimizeLegibility;-webkit-font-feature-settings:'liga';-moz-font-feature-settings:'liga';font-feature-settings:'liga'}.row{margin-left:auto;margin-right:auto;margin-bottom:20px}.row:after{content:\"\";display:table;clear:both}.row .col{float:left;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 .75rem;min-height:1px}.row .col.s12{width:100%;margin-left:auto;left:auto;right:auto}@media only screen and (min-width:601px){.row .col.m6{width:50%;margin-left:auto;left:auto;right:auto}}html{line-height:1.5;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Oxygen-Sans,Ubuntu,Cantarell,\"Helvetica Neue\",sans-serif;font-weight:normal;color:rgba(0,0,0,0.87)}@media only screen and (min-width:0){html{font-size:14px}}@media only screen and (min-width:992px){html{font-size:14.5px}}@media only screen and (min-width:1200px){html{font-size:15px}}.card{position:relative;margin:.5rem 0 1rem 0;background-color:#fff;-webkit-transition:-webkit-box-shadow .25s;transition:-webkit-box-shadow .25s;transition:box-shadow .25s;transition:box-shadow .25s,-webkit-box-shadow .25s;border-radius:2px}.card .card-title{font-size:24px;font-weight:300}.card .card-title.activator{cursor:pointer}.card .card-image{position:relative}.card .card-image img{display:block;border-radius:2px 2px 0 0;position:relative;left:0;right:0;top:0;bottom:0;width:100%}.card .card-content{padding:24px;border-radius:0 0 2px 2px}.card .card-content p{margin:0}.card .card-content .card-title{display:block;line-height:32px;margin-bottom:8px}.card .card-content .card-title i{line-height:32px}.card .card-reveal{padding:24px;position:absolute;background-color:#fff;width:100%;overflow-y:auto;left:0;top:100%;height:100%;z-index:3;display:none}.card .card-reveal .card-title{cursor:pointer;display:block}.waves-effect{position:relative;cursor:pointer;display:inline-block;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;vertical-align:middle;z-index:1;-webkit-transition:.3s ease-out;transition:.3s ease-out}.waves-effect img{position:relative;z-index:-1}.waves-block{display:block}::-webkit-input-placeholder{color:#d1d1d1}::-moz-placeholder{color:#d1d1d1}:-ms-input-placeholder{color:#d1d1d1}::-ms-input-placeholder{color:#d1d1d1}[type=\"radio\"]:not(:checked){position:absolute;opacity:0;pointer-events:none}[type=\"radio\"]:not(:checked)+span{position:relative;padding-left:35px;cursor:pointer;display:inline-block;height:25px;line-height:25px;font-size:1rem;-webkit-transition:.28s ease;transition:.28s ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[type=\"radio\"]:not(:checked)+span:before,[type=\"radio\"]:not(:checked)+span:after{border-radius:50%}[type=\"radio\"]:not(:checked)+span:before,[type=\"radio\"]:not(:checked)+span:after{border:2px solid #5a5a5a}[type=\"radio\"]:not(:checked)+span:after{-webkit-transform:scale(0);transform:scale(0)}[type=\"checkbox\"]:not(:checked){position:absolute;opacity:0;pointer-events:none}[type=\"checkbox\"]:not(:checked):disabled+span:not(.lever):before{border:none;background-color:rgba(0,0,0,0.42)}[type=\"checkbox\"].filled-in:not(:checked)+span:not(.lever):before{width:0;height:0;border:3px solid transparent;left:6px;top:10px;-webkit-transform:rotateZ(37deg);transform:rotateZ(37deg);-webkit-transform-origin:100% 100%;transform-origin:100% 100%}[type=\"checkbox\"].filled-in:not(:checked)+span:not(.lever):after{height:20px;width:20px;background-color:transparent;border:2px solid #5a5a5a;top:0px;z-index:0}input[type=checkbox]:not(:disabled) ~ .lever:active:before,input[type=checkbox]:not(:disabled).tabbed:focus ~ .lever::before{-webkit-transform:scale(2.4);transform:scale(2.4);background-color:rgba(0,0,0,0.08)}input[type=range].focused:focus:not(.active)::-webkit-slider-thumb{-webkit-box-shadow:0 0 0 10px rgba(38,166,154,0.26);box-shadow:0 0 0 10px rgba(38,166,154,0.26)}input[type=range].focused:focus:not(.active)::-moz-range-thumb{box-shadow:0 0 0 10px rgba(38,166,154,0.26)}input[type=range].focused:focus:not(.active)::-ms-thumb{box-shadow:0 0 0 10px rgba(38,166,154,0.26)} ç•ªç»„è®¡åˆ’ è¿™é‡Œå°†æ˜¯æ°¸è¿œçš„å›å¿† window.onload = function(){ videos.forEach(function(video, i){ $('#rootRow').append(` ${video.title} ${video.jp} ${video.status} ${video.title} ${video.jp} æ”¾é€æ—¶é—´: ${video.time} ${video.desc} ${video.status} `) }) }","keywords":"Bç«™"},{"title":"links","date":"2018-12-19T15:11:06.000Z","updated":"2020-01-18T11:25:30.085Z","comments":true,"path":"links/index.html","permalink":"mumudadi.top/links/index.html","excerpt":"","text":"","keywords":"å‹äººå¸"}],"posts":[{"title":"ç³»çµ±æ¥å£æ–‡æª”swaggerä½¿ç”¨","slug":"Interface","date":"2020-01-10T14:16:01.000Z","updated":"2020-02-04T15:48:32.121Z","comments":true,"path":"2020/01/10/Interface/","link":"","permalink":"mumudadi.top/2020/01/10/Interface/","excerpt":"","text":"åœ¨ç°åœ¨çš„å¼€å‘è¿‡ç¨‹ä¸­è¿˜æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†å…¬å¸éƒ½æ˜¯ä»¥å£å£ç›¸ä¼ çš„æ–¹å¼æ¥è¿›è¡Œå‰åç«¯çš„è”è°ƒï¼Œè€Œæ¥å£æ–‡æ¡£å¾ˆå¤§ä¸€éƒ¨åˆ†éƒ½åªåœç•™åœ¨äº†è¯´è¯´è€Œå·²çš„åœ°æ­¥ï¼Œæˆ–è€…å†™äº†ä»£ç å†å†™æ–‡æ¡£ã€‚ è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯æ–‡æ¡£çš„ä¿®æ”¹ï¼Œå®šä¹‰å¥½çš„æ¥å£å¹¶ä¸æ˜¯ä¸€æˆä¸å˜çš„ï¼Œå¯èƒ½åœ¨å¼€å‘è¿‡ç¨‹ä¸­æ–‡æ¡£ä¿®æ”¹ä¸æ­¢ä¸€æ¬¡çš„å˜åŒ–ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šå¾ˆéš¾å—äº†ã€‚ åªè¦ä¸æ˜¯å¼ºåˆ¶æ€§è¦æ±‚ï¼Œæ²¡äººä¼šæ„¿æ„å†™è¿™ä¸œè¥¿ï¼Œè€Œä¸”åœ¨å†™çš„è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªå­—æ¯çš„é”™è¯¯å°±ä¼šå¯¼è‡´è”è°ƒæ—¶å€™çš„å¾ˆå¤§éº»çƒ¦ï¼Œä½†æ˜¯é€šè¿‡Swaggerï¼Œæˆ‘ä»¬å¯ä»¥çœç•¥äº†è¿™ä¸€æ­¥ï¼Œè€Œä¸”æ–‡æ¡£å‡ºé”™ç‡è¿‘ä¹äºé›¶ï¼Œ åªè¦ä½ åœ¨å†™ä»£ç çš„æ—¶å€™ï¼Œç¨åŠ å‡ ä¸ªæ³¨è§£ï¼Œæ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆã€‚ å¼•å…¥ä¾è³´&lt;!-- swagger2--&gt; &lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt; &lt;version&gt;${swagger.version}&lt;/version&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;io.swagger&lt;/groupId&gt; &lt;artifactId&gt;swagger-annotations&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;exclusion&gt; &lt;groupId&gt;io.swagger&lt;/groupId&gt; &lt;artifactId&gt;swagger-models&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt; &lt;!--é˜²æ­¢è¿›å…¥swaggeré¡µé¢æŠ¥ç±»å‹è½¬æ¢é”™è¯¯ï¼Œæ’é™¤2.9.2ä¸­çš„å¼•ç”¨ï¼Œæ‰‹åŠ¨å¢åŠ 1.5.21ç‰ˆæœ¬--&gt; &lt;dependency&gt; &lt;groupId&gt;io.swagger&lt;/groupId&gt; &lt;artifactId&gt;swagger-annotations&lt;/artifactId&gt; &lt;version&gt;1.5.21&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;io.swagger&lt;/groupId&gt; &lt;artifactId&gt;swagger-models&lt;/artifactId&gt; &lt;version&gt;1.5.21&lt;/version&gt; &lt;/dependency&gt;Swagger2çš„æ¥å£é…ç½®@Configuration @EnableSwagger2 public class SwaggerConfig { /** ç³»ç»ŸåŸºç¡€é…ç½® */ @Autowired private RuoYiConfig ruoYiConfig; /** * åˆ›å»ºAPI */ @Bean public Docket createRestApi() { return new Docket(DocumentationType.SWAGGER_2) // ç”¨æ¥åˆ›å»ºè¯¥APIçš„åŸºæœ¬ä¿¡æ¯ï¼Œå±•ç¤ºåœ¨æ–‡æ¡£çš„é¡µé¢ä¸­ï¼ˆè‡ªå®šä¹‰å±•ç¤ºçš„ä¿¡æ¯ï¼‰ .apiInfo(apiInfo()) // è®¾ç½®å“ªäº›æ¥å£æš´éœ²ç»™Swaggerå±•ç¤º .select() // æ‰«ææ‰€æœ‰æœ‰æ³¨è§£çš„apiï¼Œç”¨è¿™ç§æ–¹å¼æ›´çµæ´» .apis(RequestHandlerSelectors.withMethodAnnotation(ApiOperation.class)) // æ‰«ææŒ‡å®šåŒ…ä¸­çš„swaggeræ³¨è§£ //.apis(RequestHandlerSelectors.basePackage(&quot;com.ruoyi.project.tool.swagger&quot;)) // æ‰«ææ‰€æœ‰ .apis(RequestHandlerSelectors.any()) .paths(PathSelectors.any()) .build(); } /** * æ·»åŠ æ‘˜è¦ä¿¡æ¯ */ private ApiInfo apiInfo() { // ç”¨ApiInfoBuilderè¿›è¡Œå®šåˆ¶ return new ApiInfoBuilder() // è®¾ç½®æ ‡é¢˜ .title(&quot;æ ‡é¢˜ï¼šXXç®¡ç†ç³»ç»Ÿ_æ¥å£æ–‡æ¡£&quot;) // æè¿° .description(&quot;æè¿°ï¼šç”¨äºç®¡ç†é›†å›¢æ——ä¸‹å…¬å¸çš„äººå‘˜ä¿¡æ¯,å…·ä½“åŒ…æ‹¬XXX,XXXæ¨¡å—...&quot;) // ä½œè€…ä¿¡æ¯ .contact(new Contact(ruoYiConfig.getName(), null, null)) // ç‰ˆæœ¬ .version(&quot;ç‰ˆæœ¬å·:&quot; + ruoYiConfig.getVersion()) .build(); } } åœ¨æ§åˆ¶å±‚Controllerä¸­æ·»åŠ æ³¨è§£æ¥æè¿°æ¥å£ä¿¡æ¯å¦‚:@Api(&quot;å‚æ•°é…ç½®&quot;) @Controller @RequestMapping(&quot;/system/config&quot;) public class ConfigControlleråœ¨æ–¹æ³•ä¸­é…ç½®æ¥å£çš„æ ‡é¢˜ä¿¡æ¯@ApiOperation(&quot;æŸ¥è¯¢å‚æ•°åˆ—è¡¨&quot;) @ResponseBody public TableDataInfo list(Config config) { startPage(); List&lt;Config&gt; list = configService.selectConfigList(config); return getDataTable(list); } ApiParamæ ‡è®°ï¼Œè¯·æ±‚å±æ€§ï¼Œä½¿ç”¨æ–¹å¼ï¼š public TableDataInfo list(@ApiParam(value = &quot;æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨&quot;, required = true)User user)ApiResponse`æ ‡è®°ï¼Œå“åº”é…ç½®ï¼Œä½¿ç”¨æ–¹å¼ï¼š @ApiResponse(code = 400, message = &quot;æŸ¥è¯¢ç”¨æˆ·å¤±è´¥&quot;)è¨ªå• @Controller @RequestMapping(&quot;/tool/swagger&quot;) public class SwaggerController extends BaseController { @RequiresPermissions(&quot;tool:swagger:view&quot;) @GetMapping() public String index() { return redirect(&quot;/swagger-ui.html&quot;); } }","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Interface","slug":"Interface","permalink":"mumudadi.top/tags/Interface/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"PageHelperåˆ†é æ’ä»¶çš„ä½¿ç”¨","slug":"PageHelper","date":"2020-01-10T14:16:01.000Z","updated":"2020-02-04T13:33:48.278Z","comments":true,"path":"2020/01/10/PageHelper/","link":"","permalink":"mumudadi.top/2020/01/10/PageHelper/","excerpt":"","text":"ä½¿ç”¨mavenå¯¼å…¥jaråŒ…é€™è£ä½¿ç”¨spring bootæ•´åˆçš„pagehelper è‡ªå‹•åŒ–é…ç½®çœŸé¦™Ï†(ã‚œâ–½ã‚œ*)â™ª &lt;!-- pagehelper åˆ†é¡µæ’ä»¶ --&gt; &lt;dependency&gt; &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt; &lt;artifactId&gt;pagehelper-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;${pagehelper.spring.boot.starter.version}&lt;/version&gt; &lt;/dependency&gt;application.ymlé…ç½®# PageHelperåˆ†é¡µæ’ä»¶ pagehelper: helperDialect: mysql reasonable: true supportMethodsArguments: true params: count=countSql ä½¿ç”¨ï¼šPage page = PageHelper.startPage(pageNum,sizeNum,count); List&lt;MainSearchVo&gt; mainSearchVoList = companyMainPageMapper.getMainSearch(fname);å‚æ•°è¯¦è§£: pageNumï¼šå½“å‰é¡µ sizeNumï¼šæ¯é¡µæ˜¾ç¤ºæ¡æ•° count :æ˜¯å¦æŸ¥è¯¢æ€»æ¡æ•° (true:æŸ¥è¯¢ ï¼Œfalseï¼šä¸æŸ¥è¯¢) è·å–æ€»é¡µæ•°: page.getPages() ç²å¾—ç¸‚è¨˜éŒ„æ•¸ï¼špage.getTotal()æ³¨æ„ï¼šPageHelper æ–¹æ³•ä½¿ç”¨äº†é™æ€çš„ ThreadLocal å‚æ•°ï¼Œåˆ†é¡µå‚æ•°å’Œçº¿ç¨‹æ˜¯ç»‘å®šçš„ã€‚ åªè¦ä½ å¯ä»¥ä¿è¯åœ¨ PageHelper æ–¹æ³•è°ƒç”¨åç´§è·Ÿ MyBatis æŸ¥è¯¢æ–¹æ³•ï¼Œè¿™å°±æ˜¯å®‰å…¨çš„ã€‚å› ä¸º PageHelper åœ¨ finally ä»£ç æ®µä¸­è‡ªåŠ¨æ¸…é™¤äº† ThreadLocal å­˜å‚¨çš„å¯¹è±¡ã€‚å¦‚æœä»£ç åœ¨è¿›å…¥ Executor å‰å‘ç”Ÿå¼‚å¸¸ï¼Œå°±ä¼šå¯¼è‡´çº¿ç¨‹ä¸å¯ç”¨ï¼Œè¿™å±äºäººä¸ºçš„ Bugï¼ˆä¾‹å¦‚æ¥å£æ–¹æ³•å’Œ XML ä¸­çš„ä¸åŒ¹é…ï¼Œå¯¼è‡´æ‰¾ä¸åˆ° MappedStatement æ—¶ï¼‰ï¼Œ è¿™ç§æƒ…å†µç”±äºçº¿ç¨‹ä¸å¯ç”¨ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´ ThreadLocal å‚æ•°è¢«é”™è¯¯çš„ä½¿ç”¨ã€‚ ä½†æ˜¯å¦‚æœä½ å†™å‡ºä¸‹é¢è¿™æ ·çš„ä»£ç ï¼Œå°±æ˜¯ä¸å®‰å…¨çš„ç”¨æ³•ï¼š PageHelper.startPage(1, 10); List&lt;Country&gt; list; if(param1 != null){ list = countryMapper.selectIf(param1); } else { list = new ArrayList&lt;Country&gt;(); } è¿™ç§æƒ…å†µä¸‹ç”±äº param1 å­˜åœ¨ null çš„æƒ…å†µï¼Œå°±ä¼šå¯¼è‡´ PageHelper ç”Ÿäº§äº†ä¸€ä¸ªåˆ†é¡µå‚æ•°ï¼Œä½†æ˜¯æ²¡æœ‰è¢«æ¶ˆè´¹ï¼Œè¿™ä¸ªå‚æ•°å°±ä¼šä¸€ç›´ä¿ç•™åœ¨è¿™ä¸ªçº¿ç¨‹ä¸Šã€‚å½“è¿™ä¸ªçº¿ç¨‹å†æ¬¡è¢«ä½¿ç”¨æ—¶ï¼Œå°±å¯èƒ½å¯¼è‡´ä¸è¯¥åˆ†é¡µçš„æ–¹æ³•å»æ¶ˆè´¹è¿™ä¸ªåˆ†é¡µå‚æ•°ï¼Œè¿™å°±äº§ç”Ÿäº†è«åå…¶å¦™çš„åˆ†é¡µã€‚ ä¸Šé¢è¿™ä¸ªä»£ç ï¼Œåº”è¯¥å†™æˆä¸‹é¢è¿™ä¸ªæ ·å­ï¼š List&lt;Country&gt; list; if(param1 != null){ PageHelper.startPage(1, 10); list = countryMapper.selectIf(param1); } else { list = new ArrayList&lt;Country&gt;(); } è¿™ç§å†™æ³•å°±èƒ½ä¿è¯å®‰å…¨ã€‚ç¬¬äºŒå€‹å‘ï¼šPage page = PageHelper.startPage(pageNum,sizeNum,count); Post post = postService.selectPostById(1L); List&lt;User&gt; list = userService.selectUserList(user); åŸå› åˆ†æï¼šåªå¯¹è¯¥è¯­å¥ä»¥åçš„ç¬¬ä¸€ä¸ªæŸ¥è¯¢ï¼ˆSelectï¼‰è¯­å¥å¾—åˆ°çš„æ•°æ®è¿›è¡Œåˆ†é¡µã€‚ä¸Šé¢è¿™ä¸ªä»£ç ï¼Œåº”è¯¥å†™æˆä¸‹é¢è¿™ä¸ªæ ·å­æ‰èƒ½æ­£å¸¸åˆ†é¡µã€‚ Post post = postService.selectPostById(1L); Page page = PageHelper.startPage(pageNum,sizeNum,count); List&lt;User&gt; list = userService.selectUserList(user);","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"PageHelper","slug":"PageHelper","permalink":"mumudadi.top/tags/PageHelper/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"Shiroå®‰å…¨æ¡†æ¶ä½¿ç”¨","slug":"Shiro","date":"2020-01-10T14:16:01.000Z","updated":"2020-02-05T10:07:30.075Z","comments":true,"path":"2020/01/10/Shiro/","link":"","permalink":"mumudadi.top/2020/01/10/Shiro/","excerpt":"","text":"Apache Shiroæ˜¯Javaçš„ä¸€ä¸ªå®‰å…¨æ¡†æ¶ã€‚Shiroå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆï¼šè®¤è¯ã€æˆæƒã€åŠ å¯†ã€ä¼šè¯ç®¡ç†ã€ä¸Webé›†æˆã€ç¼“å­˜ç­‰ã€‚å…¶ä¸ä»…å¯ä»¥ç”¨åœ¨ JavaSEç¯å¢ƒï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨ JavaEE ç¯å¢ƒã€‚ ä¼˜ç‚¹ æ˜“äºç†è§£çš„ Java Security API ç®€å•çš„èº«ä»½è®¤è¯ï¼Œæ”¯æŒå¤šç§æ•°æ®æº å¯¹è§’è‰²çš„ç®€å•çš„æˆæƒï¼Œæ”¯æŒç»†ç²’åº¦çš„æˆæƒ ä¸è·Ÿä»»ä½•çš„æ¡†æ¶æˆ–è€…å®¹å™¨æ†ç»‘ï¼Œå¯ä»¥ç‹¬ç«‹è¿è¡Œ ç‰¹æ€§ Authenticationèº«ä»½è®¤è¯/ç™»å½•ï¼ŒéªŒè¯ç”¨æˆ·æ˜¯ä¸æ˜¯æ‹¥æœ‰ç›¸åº”çš„èº«ä»½Authorizationæˆæƒï¼Œå³éªŒè¯æƒé™ï¼ŒéªŒè¯æŸä¸ªå·²è®¤è¯çš„ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŸä¸ªæƒé™ï¼Œå³åˆ¤æ–­ç”¨æˆ·æ˜¯å¦èƒ½åšäº‹æƒ… SessionManagementä¼šè¯ç®¡ç†ï¼Œå³ç”¨æˆ·ç™»å½•åå°±æ˜¯ä¸€æ¬¡ä¼šè¯ï¼Œåœ¨æ²¡æœ‰é€€å‡ºä¹‹å‰ï¼Œå®ƒçš„æ‰€æœ‰ä¿¡æ¯éƒ½åœ¨ä¼šè¯ä¸­CryptographyåŠ å¯†ï¼Œä¿æŠ¤æ•°æ®çš„å®‰å…¨æ€§ï¼Œå¦‚å¯†ç åŠ å¯†å­˜å‚¨åˆ°æ•°æ®åº“ï¼Œè€Œä¸æ˜¯æ˜æ–‡å­˜å‚¨Cachingç¼“å­˜ï¼Œæ¯”å¦‚ç”¨æˆ·ç™»å½•åï¼Œå…¶ç”¨æˆ·ä¿¡æ¯ï¼Œæ‹¥æœ‰çš„è§’è‰²/æƒé™ä¸å¿…æ¯æ¬¡å»æŸ¥ï¼Œæé«˜æ•ˆç‡ConcurrencyShiroæ”¯æŒå¤šçº¿ç¨‹åº”ç”¨çš„å¹¶å‘éªŒè¯ï¼Œå³å¦‚åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­å¼€å¯å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œèƒ½æŠŠæƒé™è‡ªåŠ¨ä¼ æ’­éå» Testingæä¾›æµ‹è¯•æ”¯æŒRunAså…è®¸ä¸€ä¸ªç”¨æˆ·å‡è£…ä¸ºå¦ä¸€ä¸ªç”¨æˆ·ï¼ˆå¦‚æœä»–ä»¬å…è®¸ï¼‰çš„èº«ä»½è¿›è¡Œè®¿é—®RememberMeè®°ä½æˆ‘ï¼Œè¿™æ˜¯éå¸¸å¸¸è§çš„åŠŸèƒ½ï¼Œå³ä¸€æ¬¡ç™»å½•åï¼Œä¸‹æ¬¡å†æ¥çš„è¯ä¸ç”¨ç™»å½•äº† æ¶æ§‹ Subjectä¸»ä½“ï¼Œä»£è¡¨äº†å½“å‰çš„â€œç”¨æˆ·â€ï¼Œè¿™ä¸ªç”¨æˆ·ä¸ä¸€å®šæ˜¯ä¸€ä¸ªå…·ä½“çš„äººï¼Œä¸å½“å‰åº”ç”¨äº¤äº’çš„ä»»ä½•ä¸œè¥¿éƒ½æ˜¯Subjectï¼Œå¦‚ç½‘ç»œçˆ¬è™«ï¼Œ æœºå™¨äººç­‰ï¼›å³ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼›æ‰€æœ‰Subjectéƒ½ç»‘å®šåˆ°SercurityManagerï¼Œä¸Subjectçš„æ‰€æœ‰äº¤äº’éƒ½ä¼šå§”æ‰˜ç»™SecurityManagerï¼›å¯ä»¥æŠŠSubjectè®¤ä¸ºæ˜¯ä¸€ä¸ªé—¨é¢ï¼›SecurityManageræ‰æ˜¯å®é™…çš„æ‰§è¡Œè€…SecurityManageå®‰å…¨ç®¡ç†å™¨ï¼›å³æ‰€æœ‰ä¸å®‰å…¨æœ‰å…³çš„æ“ä½œéƒ½ä¼šä¸SecurityManageräº¤äº’ï¼›ä¸”å®ƒç®¡ç†ç€æ‰€æœ‰Subjectï¼› å¯ä»¥çœ‹å‡ºå®ƒæ˜¯Shiroçš„æ ¸å¿ƒï¼Œå®ƒè´Ÿè´£ä¸åè¾¹ä»‹ç»çš„å…¶ä»–ç»„ä»¶è¿›è¡Œäº¤äº’RealmåŸŸï¼ŒShiroä»Realmè·å–å®‰å…¨æ•°æ®ï¼ˆå¦‚ç”¨æˆ·ï¼Œè§’è‰²ï¼Œæƒé™ï¼‰ï¼Œå°±æ˜¯è¯´SecurityManagerè¦éªŒè¯ç”¨æˆ·èº«ä»½ï¼Œ é‚£ä¹ˆå®ƒéœ€è¦ä»Realmè·å–ç›¸åº”çš„ç”¨æˆ·è¿›è¡Œæ¯”è¾ƒä»¥ç¡®å®šç”¨æˆ·èº«ä»½æ˜¯å¦åˆæ³•ï¼›ä¹Ÿéœ€è¦ä»Realmå¾—åˆ°ç”¨æˆ·ç›¸åº”çš„è§’è‰²/æƒé™è¿›è¡ŒéªŒè¯ç”¨æˆ·æ˜¯å¦èƒ½è¿›è¡Œæ“ä½œï¼›å¯ä»¥æœ‰1ä¸ªæˆ–å¤šä¸ªRealmï¼Œæˆ‘ä»¬ä¸€èˆ¬åœ¨åº”ç”¨ä¸­éƒ½éœ€è¦å®ç°è‡ªå·±çš„RealmSessionManagerå¦‚æœå†™è¿‡Servletå°±åº”è¯¥çŸ¥é“Sessionçš„æ¦‚å¿µï¼ŒSessionéœ€è¦æœ‰äººå»ç®¡ç†å®ƒçš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿™ä¸ªç»„ä»¶å°±æ˜¯SessionManagerSessionDAODAOå¤§å®¶éƒ½ç”¨è¿‡ï¼Œæ•°æ®åº“è®¿é—®å¯¹è±¡ï¼Œç”¨äºä¼šè¯çš„CRUDï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³æŠŠSessionä¿å­˜åˆ°æ•°æ®åº“ï¼Œé‚£ä¹ˆå¯ä»¥å®ç°è‡ªå·±çš„SessionDAOï¼Œä¹Ÿå¯ä»¥å†™å…¥ç¼“å­˜ï¼Œä»¥æé«˜æ€§èƒ½CacheManagerç¼“å­˜æ§åˆ¶å™¨ï¼Œæ¥ç®¡ç†å¦‚ç”¨æˆ·ï¼Œè§’è‰²ï¼Œæƒé™ç­‰çš„ç¼“å­˜çš„ï¼›å› ä¸ºè¿™äº›æ•°æ®åŸºæœ¬ä¸Šå¾ˆå°‘å»æ”¹å˜ï¼Œæ”¾åˆ°ç¼“å­˜ä¸­åå¯ä»¥æé«˜è®¿é—®çš„æ€§èƒ½ åº”ç”¨ä»£ç é€šè¿‡Subjectæ¥è¿›è¡Œè®¤è¯å’Œæˆæƒï¼Œè€ŒSubjectåˆå§”æ‰˜ç»™SecurityManagerï¼› æˆ‘ä»¬éœ€è¦ç»™Shrioçš„SecurityManageræ³¨å…¥Realmï¼Œä»è€Œè®©SecurityManagerèƒ½å¾—åˆ°åˆæ³•çš„ç”¨æˆ·åŠå…¶æƒé™è¿›è¡Œåˆ¤æ–­ï¼ŒShiroä¸æä¾›ç»´æŠ¤ç”¨æˆ·/æƒé™ï¼Œè€Œæ˜¯é€šè¿‡Realmè®©å¼€å‘äººå‘˜è‡ªå·±æ³¨å…¥ã€‚ Shiroä¸ä¼šå»ç»´æŠ¤ç”¨æˆ·ï¼Œç»´æŠ¤æƒé™ï¼›è¿™äº›éœ€è¦è‡ªå·±å»è®¾è®¡/æä¾›ï¼›ç„¶åé€šè¿‡å“åº”çš„æ¥å£æ³¨å…¥ç»™Shiroå³å¯ å¼•å…¥ä¾è³´&lt;!--Shiroæ ¸å¿ƒæ¡†æ¶ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.shiro&lt;/groupId&gt; &lt;artifactId&gt;shiro-core&lt;/artifactId&gt; &lt;version&gt;${shiro.version}&lt;/version&gt; &lt;/dependency&gt; &lt;!-- Shiroä½¿ç”¨Springæ¡†æ¶ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.shiro&lt;/groupId&gt; &lt;artifactId&gt;shiro-spring&lt;/artifactId&gt; &lt;version&gt;${shiro.version}&lt;/version&gt; &lt;/dependency&gt; &lt;!-- Shiroä½¿ç”¨EhCacheç¼“å­˜æ¡†æ¶ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.shiro&lt;/groupId&gt; &lt;artifactId&gt;shiro-ehcache&lt;/artifactId&gt; &lt;version&gt;${shiro.version}&lt;/version&gt; &lt;/dependency&gt;æƒé™é…ç½®åŠ è½½@Configuration public class ShiroConfig { public static final String PREMISSION_STRING = &quot;perms[\\&quot;{0}\\&quot;]&quot;; // Sessionè¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼ˆé»˜è®¤30åˆ†é’Ÿï¼‰ @Value(&quot;${shiro.session.expireTime}&quot;) private int expireTime; // ç›¸éš”å¤šä¹…æ£€æŸ¥ä¸€æ¬¡sessionçš„æœ‰æ•ˆæ€§ï¼Œå•ä½æ¯«ç§’ï¼Œé»˜è®¤å°±æ˜¯10åˆ†é’Ÿ @Value(&quot;${shiro.session.validationInterval}&quot;) private int validationInterval; // åŒä¸€ä¸ªç”¨æˆ·æœ€å¤§ä¼šè¯æ•° @Value(&quot;${shiro.session.maxSession}&quot;) private int maxSession; ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ /** * ç¼“å­˜ç®¡ç†å™¨ ä½¿ç”¨Ehcacheå®ç° */ @Bean public EhCacheManager getEhCacheManager() { net.sf.ehcache.CacheManager cacheManager = net.sf.ehcache.CacheManager.getCacheManager(&quot;ruoyi&quot;); EhCacheManager em = new EhCacheManager(); if (StringUtils.isNull(cacheManager)) { em.setCacheManager(new net.sf.ehcache.CacheManager(getCacheManagerConfigFileInputStream())); return em; } else { em.setCacheManager(cacheManager); return em; } } /** * è‡ªå®šä¹‰Realm */ @Bean public UserRealm userRealm(EhCacheManager cacheManager) { UserRealm userRealm = new UserRealm(); userRealm.setCacheManager(cacheManager); return userRealm; } /** * è‡ªå®šä¹‰sessionDAOä¼šè¯ */ @Bean public OnlineSessionDAO sessionDAO() { OnlineSessionDAO sessionDAO = new OnlineSessionDAO(); return sessionDAO; } /** * è‡ªå®šä¹‰sessionFactoryä¼šè¯ */ @Bean public OnlineSessionFactory sessionFactory() { OnlineSessionFactory sessionFactory = new OnlineSessionFactory(); return sessionFactory; } /** * ä¼šè¯ç®¡ç†å™¨ */ @Bean public OnlineWebSessionManager sessionManager() { OnlineWebSessionManager manager = new OnlineWebSessionManager(); // åŠ å…¥ç¼“å­˜ç®¡ç†å™¨ manager.setCacheManager(getEhCacheManager()); // åˆ é™¤è¿‡æœŸçš„session manager.setDeleteInvalidSessions(true); // è®¾ç½®å…¨å±€sessionè¶…æ—¶æ—¶é—´ manager.setGlobalSessionTimeout(expireTime * 60 * 1000); // å»æ‰ JSESSIONID manager.setSessionIdUrlRewritingEnabled(false); // å®šä¹‰è¦ä½¿ç”¨çš„æ— æ•ˆçš„Sessionå®šæ—¶è°ƒåº¦å™¨ manager.setSessionValidationScheduler(SpringUtils.getBean(SpringSessionValidationScheduler.class)); // æ˜¯å¦å®šæ—¶æ£€æŸ¥session manager.setSessionValidationSchedulerEnabled(true); // è‡ªå®šä¹‰SessionDao manager.setSessionDAO(sessionDAO()); // è‡ªå®šä¹‰sessionFactory manager.setSessionFactory(sessionFactory()); return manager; } /** * å®‰å…¨ç®¡ç†å™¨ */ @Bean public SecurityManager securityManager(UserRealm userRealm) { DefaultWebSecurityManager securityManager = new DefaultWebSecurityManager(); // è®¾ç½®realm. securityManager.setRealm(userRealm); // è®°ä½æˆ‘ securityManager.setRememberMeManager(rememberMeManager()); // æ³¨å…¥ç¼“å­˜ç®¡ç†å™¨; securityManager.setCacheManager(getEhCacheManager()); // sessionç®¡ç†å™¨ securityManager.setSessionManager(sessionManager()); return securityManager; } /** * Shiroè¿‡æ»¤å™¨é…ç½® */ @Bean public ShiroFilterFactoryBean shiroFilterFactoryBean(SecurityManager securityManager) { ShiroFilterFactoryBean shiroFilterFactoryBean = new ShiroFilterFactoryBean(); // Shiroçš„æ ¸å¿ƒå®‰å…¨æ¥å£,è¿™ä¸ªå±æ€§æ˜¯å¿…é¡»çš„ shiroFilterFactoryBean.setSecurityManager(securityManager); // èº«ä»½è®¤è¯å¤±è´¥ï¼Œåˆ™è·³è½¬åˆ°ç™»å½•é¡µé¢çš„é…ç½® shiroFilterFactoryBean.setLoginUrl(loginUrl); // æƒé™è®¤è¯å¤±è´¥ï¼Œåˆ™è·³è½¬åˆ°æŒ‡å®šé¡µé¢ shiroFilterFactoryBean.setUnauthorizedUrl(unauthorizedUrl); // Shiroè¿æ¥çº¦æŸé…ç½®ï¼Œå³è¿‡æ»¤é“¾çš„å®šä¹‰ LinkedHashMap&lt;String, String&gt; filterChainDefinitionMap = new LinkedHashMap&lt;&gt;(); // å¯¹é™æ€èµ„æºè®¾ç½®åŒ¿åè®¿é—® filterChainDefinitionMap.put(&quot;/favicon.ico**&quot;, &quot;anon&quot;); filterChainDefinitionMap.put(&quot;/ruoyi.png**&quot;, &quot;anon&quot;); filterChainDefinitionMap.put(&quot;/css/**&quot;, &quot;anon&quot;); filterChainDefinitionMap.put(&quot;/docs/**&quot;, &quot;anon&quot;); filterChainDefinitionMap.put(&quot;/fonts/**&quot;, &quot;anon&quot;); filterChainDefinitionMap.put(&quot;/img/**&quot;, &quot;anon&quot;); filterChainDefinitionMap.put(&quot;/ajax/**&quot;, &quot;anon&quot;); filterChainDefinitionMap.put(&quot;/js/**&quot;, &quot;anon&quot;); filterChainDefinitionMap.put(&quot;/ruoyi/**&quot;, &quot;anon&quot;); filterChainDefinitionMap.put(&quot;/captcha/captchaImage**&quot;, &quot;anon&quot;); // é€€å‡º logoutåœ°å€ï¼Œshiroå»æ¸…é™¤session filterChainDefinitionMap.put(&quot;/logout&quot;, &quot;logout&quot;); // ä¸éœ€è¦æ‹¦æˆªçš„è®¿é—® filterChainDefinitionMap.put(&quot;/login&quot;, &quot;anon,captchaValidate&quot;); // ç³»ç»Ÿæƒé™åˆ—è¡¨ // filterChainDefinitionMap.putAll(SpringUtils.getBean(IMenuService.class).selectPermsAll()); Map&lt;String, Filter&gt; filters = new LinkedHashMap&lt;String, Filter&gt;(); filters.put(&quot;onlineSession&quot;, onlineSessionFilter()); filters.put(&quot;syncOnlineSession&quot;, syncOnlineSessionFilter()); filters.put(&quot;captchaValidate&quot;, captchaValidateFilter()); filters.put(&quot;kickout&quot;, kickoutSessionFilter()); // æ³¨é”€æˆåŠŸï¼Œåˆ™è·³è½¬åˆ°æŒ‡å®šé¡µé¢ filters.put(&quot;logout&quot;, logoutFilter()); shiroFilterFactoryBean.setFilters(filters); // æ‰€æœ‰è¯·æ±‚éœ€è¦è®¤è¯ filterChainDefinitionMap.put(&quot;/**&quot;, &quot;user,kickout,onlineSession,syncOnlineSession&quot;); shiroFilterFactoryBean.setFilterChainDefinitionMap(filterChainDefinitionMap); return shiroFilterFactoryBean; } /** * å¼€å¯Shiroæ³¨è§£é€šçŸ¥å™¨ */ @Bean public AuthorizationAttributeSourceAdvisor authorizationAttributeSourceAdvisor( @Qualifier(&quot;securityManager&quot;) SecurityManager securityManager) { AuthorizationAttributeSourceAdvisor authorizationAttributeSourceAdvisor = new AuthorizationAttributeSourceAdvisor(); authorizationAttributeSourceAdvisor.setSecurityManager(securityManager); return authorizationAttributeSourceAdvisor; }è‡ªå®šç¾©Realmç™»éŒ„èªè­‰ public class UserRealm extends AuthorizingRealm { @Override protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken token) throws AuthenticationException { UsernamePasswordToken upToken = (UsernamePasswordToken) token; String username = upToken.getUsername(); String password = &quot;&quot;; if (upToken.getPassword() != null) { password = new String(upToken.getPassword()); } User user = null; try { user = loginService.login(username, password); }æˆæ¬Š protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection arg0) { User user = ShiroUtils.getSysUser(); // è§’è‰²åˆ—è¡¨ Set&lt;String&gt; roles = new HashSet&lt;String&gt;(); // åŠŸèƒ½åˆ—è¡¨ Set&lt;String&gt; menus = new HashSet&lt;String&gt;(); SimpleAuthorizationInfo info = new SimpleAuthorizationInfo(); // ç®¡ç†å‘˜æ‹¥æœ‰æ‰€æœ‰æƒé™ if (user.isAdmin()) { info.addRole(&quot;admin&quot;); info.addStringPermission(&quot;*:*:*&quot;); } else { roles = roleService.selectRoleKeys(user.getUserId()); menus = menuService.selectPermsByUserId(user.getUserId()); // è§’è‰²åŠ å…¥AuthorizationInfoè®¤è¯å¯¹è±¡ info.setRoles(roles); // æƒé™åŠ å…¥AuthorizationInfoè®¤è¯å¯¹è±¡ info.setStringPermissions(menus); } return info; }","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Shiro","slug":"Shiro","permalink":"mumudadi.top/tags/Shiro/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"æœå‹™ç«¯æ””æˆªé‡è¤‡æäº¤","slug":"RepeatSubmit","date":"2020-01-10T14:16:01.000Z","updated":"2020-02-07T03:34:12.869Z","comments":true,"path":"2020/01/10/RepeatSubmit/","link":"","permalink":"mumudadi.top/2020/01/10/RepeatSubmit/","excerpt":"","text":"â€‹ åœ¨Web / Appé¡¹ç›®ä¸­ï¼Œæœ‰ä¸€äº›è¯·æ±‚æˆ–æ“ä½œä¼šå¯¹æ•°æ®äº§ç”Ÿå½±å“ï¼ˆæ¯”å¦‚æ–°å¢ã€åˆ é™¤ã€ä¿®æ”¹ï¼‰ï¼Œé’ˆå¯¹è¿™ç±»è¯·æ±‚ä¸€èˆ¬éƒ½éœ€è¦åšä¸€äº›ä¿æŠ¤ï¼Œä»¥é˜²æ­¢ç”¨æˆ·æœ‰æ„æˆ–æ— æ„çš„é‡å¤å‘èµ·è¿™æ ·çš„è¯·æ±‚å¯¼è‡´çš„æ•°æ®é”™ä¹±ã€‚ å¸¸è§å¤„ç†æ–¹æ¡ˆ1.å®¢æˆ·ç«¯ ä¾‹å¦‚è¡¨å•æäº¤åå°†æäº¤æŒ‰é’®è®¾ä¸ºdisable ç­‰ç­‰æ–¹æ³•â€¦ 2.æœåŠ¡ç«¯ å‰ç«¯çš„é™åˆ¶ä»…èƒ½è§£å†³å°‘éƒ¨åˆ†é—®é¢˜ï¼Œä¸”ä¸å¤Ÿå½»åº•ï¼Œåç«¯è‡ªæœ‰çš„é˜²é‡å¤å¤„ç†æªæ–½å¿…ä¸å¯å°‘ï¼Œä¹‰ä¸å®¹è¾ã€‚ åœ¨æ­¤æä¾›ä¸€ä¸ªæˆ‘åœ¨é¡¹ç›®ä¸­ç”¨åˆ°çš„æ–¹æ¡ˆã€‚ç®€å•æ¥è¯´å°±æ˜¯åˆ¤æ–­è¯·æ±‚urlå’Œæ•°æ®æ˜¯å¦å’Œä¸Šä¸€æ¬¡ç›¸åŒã€‚ è‡ªå®šä¹‰ä¸€ä¸ªæ³¨è§£ @Inherited @Target(ElementType.METHOD) @Retention(RetentionPolicy.RUNTIME) @Documented public @interface RepeatSubmit { } æ£€æŸ¥æ­¤æ¥å£è°ƒç”¨çš„æ–¹æ³•æ˜¯å¦ä½¿ç”¨äº†RepeatSubmitæ³¨è§£ï¼Œè‹¥æ²¡æœ‰ä½¿ç”¨ï¼Œè¡¨ç¤ºæ­¤æ¥å£ä¸éœ€è¦æ ¡éªŒï¼› è‹¥ä½¿ç”¨äº†æ³¨è§£ï¼Œè·å–è¯·æ±‚url+å‚æ•° æ£€æŸ¥sessionæ˜¯å¦æœ‰SESSION_REPEAT_KEYå±æ€§ï¼Œæ²¡æœ‰ç›´æ¥æ”¾è¡Œ æ£€æŸ¥SESSION_REPEAT_KEYå±¬æ€§å€¼ä¸­æ˜¯å¦åŒ…å«url æª¢æŸ¥ç•¶å‰è«‹æ±‚requestå’Œsessionä¸­çš„è«‹æ±‚urlå’Œåƒæ•¸æ˜¯å¦ç›¸ç­‰ å¦‚æœä¸ç›¸ç­‰å°±åœ¨sessionä¸­è¨˜éŒ„æœ¬æ¬¡è«‹æ±‚ @Component public abstract class RepeatSubmitInterceptor extends HandlerInterceptorAdapter { @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception { if (handler instanceof HandlerMethod) { HandlerMethod handlerMethod = (HandlerMethod) handler; Method method = handlerMethod.getMethod(); RepeatSubmit annotation = method.getAnnotation(RepeatSubmit.class); if (annotation != null) { if (this.isRepeatSubmit(request)) { AjaxResult ajaxResult = AjaxResult.error(&quot;ä¸å…è®¸é‡å¤æäº¤ï¼Œè¯·ç¨åå†è¯•&quot;); ServletUtils.renderString(response, JSONObject.toJSONString(ajaxResult)); return false; } } return true; } else { return super.preHandle(request, response, handler); } } /** * éªŒè¯æ˜¯å¦é‡å¤æäº¤ç”±å­ç±»å®ç°å…·ä½“çš„é˜²é‡å¤æäº¤çš„è§„åˆ™ * * @param httpServletRequest * @return * @throws Exception */ public abstract boolean isRepeatSubmit(HttpServletRequest request); } @Component public class SameUrlDataInterceptor extends RepeatSubmitInterceptor { public final String REPEAT_PARAMS = &quot;repeatParams&quot;; public final String REPEAT_TIME = &quot;repeatTime&quot;; public final String SESSION_REPEAT_KEY = &quot;repeatData&quot;; /** * é—´éš”æ—¶é—´ï¼Œå•ä½:ç§’ é»˜è®¤10ç§’ * * ä¸¤æ¬¡ç›¸åŒå‚æ•°çš„è¯·æ±‚ï¼Œå¦‚æœé—´éš”æ—¶é—´å¤§äºè¯¥å‚æ•°ï¼Œç³»ç»Ÿä¸ä¼šè®¤å®šä¸ºé‡å¤æäº¤çš„æ•°æ® */ private int intervalTime = 10; public void setIntervalTime(int intervalTime) { this.intervalTime = intervalTime; } @SuppressWarnings(&quot;unchecked&quot;) @Override public boolean isRepeatSubmit(HttpServletRequest request) { // æœ¬æ¬¡å‚æ•°åŠç³»ç»Ÿæ—¶é—´ String nowParams = JSONObject.toJSONString(request.getParameterMap()); Map&lt;String, Object&gt; nowDataMap = new HashMap&lt;String, Object&gt;(); nowDataMap.put(REPEAT_PARAMS, nowParams); nowDataMap.put(REPEAT_TIME, System.currentTimeMillis()); // è¯·æ±‚åœ°å€ï¼ˆä½œä¸ºå­˜æ”¾sessionçš„keyå€¼ï¼‰ String url = request.getRequestURI(); HttpSession session = request.getSession(); Object sessionObj = session.getAttribute(SESSION_REPEAT_KEY); if (sessionObj != null) { Map&lt;String, Object&gt; sessionMap = (Map&lt;String, Object&gt;) sessionObj; if (sessionMap.containsKey(url)) { Map&lt;String, Object&gt; preDataMap = (Map&lt;String, Object&gt;) sessionMap.get(url); if (compareParams(nowDataMap, preDataMap) &amp;&amp; compareTime(nowDataMap, preDataMap)) { return true; } } } Map&lt;String, Object&gt; sessionMap = new HashMap&lt;String, Object&gt;(); sessionMap.put(url, nowDataMap); session.setAttribute(SESSION_REPEAT_KEY, sessionMap); return false; } /** * åˆ¤æ–­å‚æ•°æ˜¯å¦ç›¸åŒ */ private boolean compareParams(Map&lt;String, Object&gt; nowMap, Map&lt;String, Object&gt; preMap) { String nowParams = (String) nowMap.get(REPEAT_PARAMS); String preParams = (String) preMap.get(REPEAT_PARAMS); return nowParams.equals(preParams); } /** * åˆ¤æ–­ä¸¤æ¬¡é—´éš”æ—¶é—´ */ private boolean compareTime(Map&lt;String, Object&gt; nowMap, Map&lt;String, Object&gt; preMap) { long time1 = (Long) nowMap.get(REPEAT_TIME); long time2 = (Long) preMap.get(REPEAT_TIME); if ((time1 - time2) &lt; (this.intervalTime * 1000)) { return true; } return false; } } æ³¨å†Œæ‹¦æˆªå™¨","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Repeat","slug":"Repeat","permalink":"mumudadi.top/tags/Repeat/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"é˜²ç¯„XSSæ”»æ“Š","slug":"XSS","date":"2020-01-10T14:16:01.000Z","updated":"2020-02-05T15:01:10.888Z","comments":true,"path":"2020/01/10/XSS/","link":"","permalink":"mumudadi.top/2020/01/10/XSS/","excerpt":"","text":"XSS : è·¨ç«™è„šæœ¬æ”»å‡»(Cross Site Scripting)ï¼Œä¸ºä¸å’Œå±‚å æ ·å¼è¡¨(Cascading Style Sheets, CSS)çš„ç¼©å†™æ··æ·†ï¼Œæ•…å°†è·¨ç«™è„šæœ¬æ”»å‡»ç¼©å†™ä¸ºXSSã€‚æ¶æ„æ”»å‡»è€…å¾€Webé¡µé¢é‡Œæ’å…¥æ¶æ„htmlä»£ç ï¼Œå½“ç”¨æˆ·æµè§ˆè¯¥é¡µä¹‹æ—¶ï¼ŒåµŒå…¥å…¶ä¸­Webé‡Œé¢çš„htmlä»£ç ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ¶æ„æ”»å‡»ç”¨æˆ·çš„ç‰¹æ®Šç›®çš„ã€‚è¿‡æ»¤æ–¹å¼:ä¸»è¦é€šè¿‡å¯¹htmlæ ‡ç­¾è¿›è¡Œè½¬ä¹‰çš„æ–¹å¼è¾¾åˆ°è¿‡æ»¤çš„ç›®çš„ éæ¿¾å™¨é…ç½®@Configuration public class FilterConfig { @Value(&quot;${xss.enabled}&quot;) private String enabled; @Value(&quot;${xss.excludes}&quot;) private String excludes; @Value(&quot;${xss.urlPatterns}&quot;) private String urlPatterns; @SuppressWarnings({ &quot;rawtypes&quot;, &quot;unchecked&quot; }) @Bean public FilterRegistrationBean xssFilterRegistration() { FilterRegistrationBean registration = new FilterRegistrationBean(); registration.setDispatcherTypes(DispatcherType.REQUEST); registration.setFilter(new XssFilter()); registration.addUrlPatterns(StringUtils.split(urlPatterns, &quot;,&quot;)); registration.setName(&quot;xssFilter&quot;); registration.setOrder(Integer.MAX_VALUE); Map&lt;String, String&gt; initParameters = Maps.newHashMap(); initParameters.put(&quot;excludes&quot;, excludes); initParameters.put(&quot;enabled&quot;, enabled); registration.setInitParameters(initParameters); return registration; } } è‡ªå®šç¾©éæ¿¾å™¨ç·¨å¯«public class XssFilter implements Filter { /** * æ’é™¤é“¾æ¥ */ public List&lt;String&gt; excludes = new ArrayList&lt;&gt;(); /** * xssè¿‡æ»¤å¼€å…³ */ public boolean enabled = false; @Override public void init(FilterConfig filterConfig) throws ServletException { String tempExcludes = filterConfig.getInitParameter(&quot;excludes&quot;); String tempEnabled = filterConfig.getInitParameter(&quot;enabled&quot;); if (StringUtils.isNotEmpty(tempExcludes)) { String[] url = tempExcludes.split(&quot;,&quot;); for (int i = 0; url != null &amp;&amp; i &lt; url.length; i++) { excludes.add(url[i]); } } if (StringUtils.isNotEmpty(tempEnabled)) { enabled = Boolean.valueOf(tempEnabled); } } @Override public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException { HttpServletRequest req = (HttpServletRequest) request; HttpServletResponse resp = (HttpServletResponse) response; if (handleExcludeURL(req, resp)) { chain.doFilter(request, response); return; } XssHttpServletRequestWrapper xssRequest = new XssHttpServletRequestWrapper((HttpServletRequest) request); chain.doFilter(xssRequest, response); } private boolean handleExcludeURL(HttpServletRequest request, HttpServletResponse response) { if (!enabled) { return true; } if (excludes == null || excludes.isEmpty()) { return false; } String url = request.getServletPath(); for (String pattern : excludes) { Pattern p = Pattern.compile(&quot;^&quot; + pattern); Matcher m = p.matcher(url); if (m.find()) { return true; } } return false; }éæ¿¾è™•ç†å¯¦ç¾public class XssHttpServletRequestWrapper extends HttpServletRequestWrapper { /** * @param request */ public XssHttpServletRequestWrapper(HttpServletRequest request) { super(request); } @Override public String[] getParameterValues(String name) { String[] values = super.getParameterValues(name); if (values != null) { int length = values.length; String[] escapseValues = new String[length]; for (int i = 0; i &lt; length; i++) { // é˜²xssæ”»å‡»å’Œè¿‡æ»¤å‰åç©ºæ ¼ escapseValues[i] = EscapeUtil.clean(values[i]).trim(); } return escapseValues; } return super.getParameterValues(name); } }","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"XSS","slug":"XSS","permalink":"mumudadi.top/tags/XSS/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"Spring SecurityåšJWTè®¤è¯å’Œæˆæƒ","slug":"SpringSecurity-JWT","date":"2020-01-10T14:16:01.000Z","updated":"2020-02-08T04:15:02.502Z","comments":true,"path":"2020/01/10/SpringSecurity-JWT/","link":"","permalink":"mumudadi.top/2020/01/10/SpringSecurity-JWT/","excerpt":"","text":"JWTæ˜¯ä¸€ä¸ªå«ç­¾åå¹¶æºå¸¦ç”¨æˆ·ç›¸å…³ä¿¡æ¯çš„åŠ å¯†ä¸²ï¼Œé¡µé¢è¯·æ±‚æ ¡éªŒç™»å½•æ¥å£æ—¶ï¼Œè¯·æ±‚å¤´ä¸­æºå¸¦JWTä¸²åˆ°åç«¯æœåŠ¡ï¼Œåç«¯é€šè¿‡ç­¾ååŠ å¯†ä¸²åŒ¹é…æ ¡éªŒï¼Œä¿è¯ä¿¡æ¯æœªè¢«ç¯¡æ”¹ã€‚æ ¡éªŒé€šè¿‡åˆ™è®¤ä¸ºæ˜¯å¯é çš„è¯·æ±‚ï¼Œå°†æ­£å¸¸è¿”å›æ•°æ®ã€‚ â€‹ Spring Securityæ˜¯ä¸€ä¸ªèƒ½å¤Ÿä¸ºåŸºäºSpringçš„ä¼ä¸šåº”ç”¨ç³»ç»Ÿæä¾›å£°æ˜å¼çš„å®‰å…¨è®¿é—®æ§åˆ¶è§£å†³æ–¹æ¡ˆçš„å®‰å…¨æ¡†æ¶ã€‚ spring-securityä¸­æ ¸å¿ƒæ¦‚å¿µ AuthenticationManager, ç”¨æˆ·è®¤è¯çš„ç®¡ç†ç±»ï¼Œæ‰€æœ‰çš„è®¤è¯è¯·æ±‚ï¼ˆæ¯”å¦‚loginï¼‰éƒ½ä¼šé€šè¿‡æäº¤ä¸€ä¸ªtokenç»™AuthenticationManagerçš„authenticate()æ–¹æ³•æ¥å®ç°ã€‚å½“ç„¶äº‹æƒ…è‚¯å®šä¸æ˜¯å®ƒæ¥åšï¼Œå…·ä½“æ ¡éªŒåŠ¨ä½œä¼šç”±AuthenticationManagerå°†è¯·æ±‚è½¬å‘ç»™å…·ä½“çš„å®ç°ç±»æ¥åšã€‚æ ¹æ®å®ç°åé¦ˆçš„ç»“æœå†è°ƒç”¨å…·ä½“çš„Handleræ¥ç»™ç”¨æˆ·ä»¥åé¦ˆã€‚è¿™ä¸ªç±»åŸºæœ¬ç­‰åŒäºshiroçš„SecurityManagerã€‚ AuthenticationProvider, è®¤è¯çš„å…·ä½“å®ç°ç±»ï¼Œä¸€ä¸ªprovideræ˜¯ä¸€ç§è®¤è¯æ–¹å¼çš„å®ç°ï¼Œæ¯”å¦‚æäº¤çš„ç”¨æˆ·åå¯†ç æˆ‘æ˜¯é€šè¿‡å’ŒDBä¸­æŸ¥å‡ºçš„userè®°å½•åšæ¯”å¯¹å®ç°çš„ï¼Œé‚£å°±æœ‰ä¸€ä¸ªDaoProviderï¼›å¦‚æœæˆ‘æ˜¯é€šè¿‡CASè¯·æ±‚å•ç‚¹ç™»å½•ç³»ç»Ÿå®ç°ï¼Œé‚£å°±æœ‰ä¸€ä¸ªCASProviderã€‚è¿™ä¸ªæ˜¯ä¸æ˜¯å’Œshiroçš„Realmçš„å®šä¹‰å¾ˆåƒï¼ŸåŸºæœ¬ä¸Šä½ å¯ä»¥å¸®ä»–ä»¬å½“æˆåŒä¸€ä¸ªä¸œè¥¿ã€‚æŒ‰ç…§Springä¸€è´¯çš„ä½œé£ï¼Œä¸»æµçš„è®¤è¯æ–¹å¼å®ƒéƒ½å·²ç»æä¾›äº†é»˜è®¤å®ç°ï¼Œæ¯”å¦‚DAOã€LDAPã€CASã€OAuth2ç­‰ã€‚å‰é¢è®²äº†AuthenticationManageråªæ˜¯ä¸€ä¸ªä»£ç†æ¥å£ï¼ŒçœŸæ­£çš„è®¤è¯å°±æ˜¯ç”±AuthenticationProvideræ¥åšçš„ã€‚ä¸€ä¸ªAuthenticationManagerå¯ä»¥åŒ…å«å¤šä¸ªProviderï¼Œæ¯ä¸ªprovideré€šè¿‡å®ç°ä¸€ä¸ªsupportæ–¹æ³•æ¥è¡¨ç¤ºè‡ªå·±æ”¯æŒé‚£ç§Tokençš„è®¤è¯ã€‚AuthenticationManageré»˜è®¤çš„å®ç°ç±»æ˜¯ProviderManagerã€‚ UserDetailService, ç”¨æˆ·è®¤è¯é€šè¿‡Provideræ¥åšï¼Œæ‰€ä»¥Provideréœ€è¦æ‹¿åˆ°ç³»ç»Ÿå·²ç»ä¿å­˜çš„è®¤è¯ä¿¡æ¯ï¼Œè·å–ç”¨æˆ·ä¿¡æ¯çš„æ¥å£spring-securityæŠ½è±¡æˆUserDetailServiceã€‚è™½ç„¶å«Service,ä½†æ˜¯æˆ‘æ›´æ„¿æ„æŠŠå®ƒè®¤ä¸ºæ˜¯æˆ‘ä»¬ç³»ç»Ÿé‡Œç»å¸¸æœ‰çš„UserDaoã€‚ AuthenticationToken, æ‰€æœ‰æäº¤ç»™AuthenticationManagerçš„è®¤è¯è¯·æ±‚éƒ½ä¼šè¢«å°è£…æˆä¸€ä¸ªTokençš„å®ç°ï¼Œæ¯”å¦‚æœ€å®¹æ˜“ç†è§£çš„UsernamePasswordAuthenticationTokenã€‚è¿™ä¸ªå°±ä¸å¤šè®²äº†ï¼Œè¿åå­—éƒ½è·ŸShiroä¸­ä¸€æ ·ã€‚ SecurityContextï¼Œå½“ç”¨æˆ·é€šè¿‡è®¤è¯ä¹‹åï¼Œå°±ä¼šä¸ºè¿™ä¸ªç”¨æˆ·ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„SecurityContextï¼Œé‡Œé¢åŒ…å«ç”¨æˆ·çš„è®¤è¯ä¿¡æ¯Authenticationã€‚é€šè¿‡SecurityContextæˆ‘ä»¬å¯ä»¥è·å–åˆ°ç”¨æˆ·çš„æ ‡è¯†Principleå’Œæˆæƒä¿¡æ¯GrantedAuthrityã€‚åœ¨ç³»ç»Ÿçš„ä»»ä½•åœ°æ–¹åªè¦é€šè¿‡SecurityHolder.getSecruityContext()å°±å¯ä»¥è·å–åˆ°SecurityContextã€‚åœ¨Shiroä¸­é€šè¿‡SecurityUtils.getSubject()åˆ°è¾¾åŒæ ·çš„ç›®çš„ã€‚ JWTè®¤è¯çš„å®ç°æ”¯æŒç”¨æˆ·é€šè¿‡ç”¨æˆ·åå’Œå¯†ç ç™»å½• ç™»å½•åé€šè¿‡http headerè¿”å›tokenï¼Œæ¯æ¬¡è¯·æ±‚ï¼Œå®¢æˆ·ç«¯éœ€é€šè¿‡headerå°†tokenå¸¦å›ï¼Œç”¨äºæƒé™æ ¡éªŒ æœåŠ¡ç«¯è´Ÿè´£tokençš„å®šæœŸåˆ·æ–° å¼•å…¥ç›¸å…³ä¾èµ–&lt;!-- spring security å®‰å…¨è®¤è¯ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--Tokenç”Ÿæˆä¸è§£æ--&gt; &lt;dependency&gt; &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt; &lt;artifactId&gt;jjwt&lt;/artifactId&gt; &lt;version&gt;${jwt.version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- redis ç¼“å­˜æ“ä½œ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt; &lt;/dependency&gt;ç™»å½•è®¤è¯æµç¨‹* spring securityé…ç½® @EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true) public class SecurityConfig extends WebSecurityConfigurerAdapter { /** * è‡ªå®šä¹‰ç”¨æˆ·è®¤è¯é€»è¾‘ */ @Autowired private UserDetailsService userDetailsService; /** * anyRequest | åŒ¹é…æ‰€æœ‰è¯·æ±‚è·¯å¾„ * access | SpringElè¡¨è¾¾å¼ç»“æœä¸ºtrueæ—¶å¯ä»¥è®¿é—® * anonymous | åŒ¿åå¯ä»¥è®¿é—® * denyAll | ç”¨æˆ·ä¸èƒ½è®¿é—® * fullyAuthenticated | ç”¨æˆ·å®Œå…¨è®¤è¯å¯ä»¥è®¿é—®ï¼ˆéremember-meä¸‹è‡ªåŠ¨ç™»å½•ï¼‰ * hasAnyAuthority | å¦‚æœæœ‰å‚æ•°ï¼Œå‚æ•°è¡¨ç¤ºæƒé™ï¼Œåˆ™å…¶ä¸­ä»»ä½•ä¸€ä¸ªæƒé™å¯ä»¥è®¿é—® * hasAnyRole | å¦‚æœæœ‰å‚æ•°ï¼Œå‚æ•°è¡¨ç¤ºè§’è‰²ï¼Œåˆ™å…¶ä¸­ä»»ä½•ä¸€ä¸ªè§’è‰²å¯ä»¥è®¿é—® * hasAuthority | å¦‚æœæœ‰å‚æ•°ï¼Œå‚æ•°è¡¨ç¤ºæƒé™ï¼Œåˆ™å…¶æƒé™å¯ä»¥è®¿é—® * hasIpAddress | å¦‚æœæœ‰å‚æ•°ï¼Œå‚æ•°è¡¨ç¤ºIPåœ°å€ï¼Œå¦‚æœç”¨æˆ·IPå’Œå‚æ•°åŒ¹é…ï¼Œåˆ™å¯ä»¥è®¿é—® * hasRole | å¦‚æœæœ‰å‚æ•°ï¼Œå‚æ•°è¡¨ç¤ºè§’è‰²ï¼Œåˆ™å…¶è§’è‰²å¯ä»¥è®¿é—® * permitAll | ç”¨æˆ·å¯ä»¥ä»»æ„è®¿é—® * rememberMe | å…è®¸é€šè¿‡remember-meç™»å½•çš„ç”¨æˆ·è®¿é—® * authenticated | ç”¨æˆ·ç™»å½•åå¯è®¿é—® */ @Override protected void configure(HttpSecurity httpSecurity) throws Exception { httpSecurity // CRSFç¦ç”¨ï¼Œå› ä¸ºä¸ä½¿ç”¨session .csrf().disable() // è®¤è¯å¤±è´¥å¤„ç†ç±» .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and() // åŸºäºtokenï¼Œæ‰€ä»¥ä¸éœ€è¦session .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and() // è¿‡æ»¤è¯·æ±‚ .authorizeRequests() // å¯¹äºç™»å½•login éªŒè¯ç captchaImage å…è®¸åŒ¿åè®¿é—® .antMatchers(&quot;/login&quot;, &quot;/captchaImage&quot;).anonymous() .antMatchers( HttpMethod.GET, &quot;/*.html&quot;, &quot;/**/*.html&quot;, &quot;/**/*.css&quot;, &quot;/**/*.js&quot; ).permitAll() .antMatchers(&quot;/profile/**&quot;).anonymous() .antMatchers(&quot;/common/download**&quot;).anonymous() .antMatchers(&quot;/swagger-ui.html&quot;).anonymous() .antMatchers(&quot;/swagger-resources/**&quot;).anonymous() .antMatchers(&quot;/webjars/**&quot;).anonymous() .antMatchers(&quot;/*/api-docs&quot;).anonymous() .antMatchers(&quot;/druid/**&quot;).anonymous() // é™¤ä¸Šé¢å¤–çš„æ‰€æœ‰è¯·æ±‚å…¨éƒ¨éœ€è¦é‰´æƒè®¤è¯ .anyRequest().authenticated() .and() .headers().frameOptions().disable(); httpSecurity.logout().logoutUrl(&quot;/logout&quot;).logoutSuccessHandler(logoutSuccessHandler); // æ·»åŠ JWT filter httpSecurity.addFilterBefore(authenticationTokenFilter, UsernamePasswordAuthenticationFilter.class); } /** * å¼ºæ•£åˆ—å“ˆå¸ŒåŠ å¯†å®ç° */ @Bean public BCryptPasswordEncoder bCryptPasswordEncoder() { return new BCryptPasswordEncoder(); } /** * èº«ä»½è®¤è¯æ¥å£ */ @Override protected void configure(AuthenticationManagerBuilder auth) throws Exception { auth.userDetailsService(userDetailsService).passwordEncoder(bCryptPasswordEncoder()); } }å°è£…åçš„tokenæœ€ç»ˆæ˜¯äº¤ç»™provideræ¥å¤„ç†çš„ã€‚å¯¹äºç™»å½•çš„providerï¼Œspring securityå·²ç»æä¾›äº†ä¸€ä¸ªé»˜è®¤å®ç°DaoAuthenticationProvideræˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œè¿™ä¸ªç±»ç»§æ‰¿äº†AbstractUserDetailsAuthenticationProvideræˆ‘ä»¬æ¥çœ‹ä¸‹å…³é”®éƒ¨åˆ†çš„æºä»£ç æ˜¯æ€ä¹ˆåšçš„ public abstract class AbstractUserDetailsAuthenticationProvider implements AuthenticationProvider, InitializingBean, MessageSourceAware { ... //è¿™ä¸ªæ–¹æ³•è¿”å›trueï¼Œè¯´æ˜æ”¯æŒè¯¥ç±»å‹çš„token public boolean supports(Class&lt;?&gt; authentication) { return (UsernamePasswordAuthenticationToken.class .isAssignableFrom(authentication)); } public Authentication authenticate(Authentication authentication) throws AuthenticationException { ... try { // è·å–ç³»ç»Ÿä¸­å­˜å‚¨çš„ç”¨æˆ·ä¿¡æ¯ user = retrieveUser(username, (UsernamePasswordAuthenticationToken) authentication); } catch (UsernameNotFoundException notFound) { logger.debug(&quot;User &#39;&quot; + username + &quot;&#39; not found&quot;); if (hideUserNotFoundExceptions) { throw new BadCredentialsException(messages.getMessage( &quot;AbstractUserDetailsAuthenticationProvider.badCredentials&quot;, &quot;Bad credentials&quot;)); } else { throw notFound; } } } try { //æ£€æŸ¥useræ˜¯å¦å·²è¿‡æœŸæˆ–è€…å·²é”å®š preAuthenticationChecks.check(user); //å°†è·å–åˆ°çš„ç”¨æˆ·ä¿¡æ¯å’Œç™»å½•ä¿¡æ¯åšæ¯”å¯¹ additionalAuthenticationChecks(user, (UsernamePasswordAuthenticationToken) authentication); } catch (AuthenticationException exception) { ... throw exception; } ... //å¦‚æœè®¤è¯é€šè¿‡ï¼Œåˆ™å°è£…ä¸€ä¸ªAuthenticationInfo, æ”¾åˆ°SecurityContextä¸­ return createSuccessAuthentication(principalToReturn, authentication, user); } ... }ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæ ¸å¿ƒæµç¨‹å°±æ˜¯retrieveUser()è·å–ç³»ç»Ÿä¸­å­˜å‚¨çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå†å¯¹ç”¨æˆ·ä¿¡æ¯åšäº†è¿‡æœŸå’Œé”å®šç­‰æ ¡éªŒåäº¤ç»™additionalAuthenticationChecks()å’Œç”¨æˆ·æäº¤çš„ä¿¡æ¯åšæ¯”å¯¹ã€‚ è¿™ä¸¤ä¸ªæ–¹æ³•æˆ‘ä»¬çœ‹ä»–çš„ç»§æ‰¿ç±»DaoAuthenticationProvideræ˜¯æ€ä¹ˆå®ç°çš„ã€‚ public class DaoAuthenticationProvider extends AbstractUserDetailsAuthenticationProvider { /** * åŠ å¯†å¯†ç æ¯”å¯¹ */ protected void additionalAuthenticationChecks(UserDetails userDetails, UsernamePasswordAuthenticationToken authentication) throws AuthenticationException { if (authentication.getCredentials() == null) { logger.debug(&quot;Authentication failed: no credentials provided&quot;); throw new BadCredentialsException(messages.getMessage( &quot;AbstractUserDetailsAuthenticationProvider.badCredentials&quot;, &quot;Bad credentials&quot;)); } String presentedPassword = authentication.getCredentials().toString(); if (!passwordEncoder.matches(presentedPassword, userDetails.getPassword())) { logger.debug(&quot;Authentication failed: password does not match stored value&quot;); throw new BadCredentialsException(messages.getMessage( &quot;AbstractUserDetailsAuthenticationProvider.badCredentials&quot;, &quot;Bad credentials&quot;)); } } /** * ç³»ç»Ÿç”¨æˆ·è·å– */ protected final UserDetails retrieveUser(String username, UsernamePasswordAuthenticationToken authentication) throws AuthenticationException { prepareTimingAttackProtection(); try { UserDetails loadedUser = this.getUserDetailsService().loadUserByUsername(username); if (loadedUser == null) { throw new InternalAuthenticationServiceException( &quot;UserDetailsService returned null, which is an interface contract violation&quot;); } return loadedUser; } catch (UsernameNotFoundException ex) { mitigateAgainstTimingAttack(authentication); throw ex; } catch (InternalAuthenticationServiceException ex) { throw ex; } catch (Exception ex) { throw new InternalAuthenticationServiceException(ex.getMessage(), ex); } } }ä¸Šé¢çš„æ–¹æ³•å®ç°ä¸­ï¼Œç”¨æˆ·è·å–æ˜¯è°ƒç”¨äº†UserDetailsServiceæ¥å®Œæˆçš„ã€‚è¿™ä¸ªæ˜¯ä¸€ä¸ªåªæœ‰ä¸€ä¸ªæ–¹æ³•çš„æ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬è‡ªå·±è¦åšçš„ï¼Œå°±æ˜¯å°†è‡ªå·±çš„UserDetailsServiceå®ç°ç±»é…ç½®æˆä¸€ä¸ªBeanã€‚ @Service public class UserDetailsServiceImpl implements UserDetailsService { private static final Logger log = LoggerFactory.getLogger(UserDetailsServiceImpl.class); @Autowired private ISysUserService userService; @Autowired private SysPermissionService permissionService; @Override public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException { SysUser user = userService.selectUserByUserName(username); if (StringUtils.isNull(user)) { log.info(&quot;ç™»å½•ç”¨æˆ·ï¼š{} ä¸å­˜åœ¨.&quot;, username); throw new UsernameNotFoundException(&quot;ç™»å½•ç”¨æˆ·ï¼š&quot; + username + &quot; ä¸å­˜åœ¨&quot;); } else if (UserStatus.DELETED.getCode().equals(user.getDelFlag())) { log.info(&quot;ç™»å½•ç”¨æˆ·ï¼š{} å·²è¢«åˆ é™¤.&quot;, username); throw new BaseException(&quot;å¯¹ä¸èµ·ï¼Œæ‚¨çš„è´¦å·ï¼š&quot; + username + &quot; å·²è¢«åˆ é™¤&quot;); } else if (UserStatus.DISABLE.getCode().equals(user.getStatus())) { log.info(&quot;ç™»å½•ç”¨æˆ·ï¼š{} å·²è¢«åœç”¨.&quot;, username); throw new BaseException(&quot;å¯¹ä¸èµ·ï¼Œæ‚¨çš„è´¦å·ï¼š&quot; + username + &quot; å·²åœç”¨&quot;); } return createLoginUser(user); } public UserDetails createLoginUser(SysUser user) { return new LoginUser(user, permissionService.getMenuPermission(user)); } }è®¤è¯ç»“æœå¤„ç†è®¤è¯å¤±è´¥å¤„ç† @Component public class AuthenticationEntryPointImpl implements AuthenticationEntryPoint, Serializable { private static final long serialVersionUID = -8970718410437077606L; @Override public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException e) throws IOException { int code = HttpStatus.UNAUTHORIZED; String msg = StringUtils.format(&quot;è¯·æ±‚è®¿é—®ï¼š{}ï¼Œè®¤è¯å¤±è´¥ï¼Œæ— æ³•è®¿é—®ç³»ç»Ÿèµ„æº&quot;, request.getRequestURI()); ServletUtils.renderString(response, JSON.toJSONString(AjaxResult.error(code, msg))); } }å¸¦Tokenè¯·æ±‚æ ¡éªŒæµç¨‹ç”¨æˆ·é™¤ç™»å½•ä¹‹å¤–çš„è¯·æ±‚ï¼Œéƒ½è¦æ±‚å¿…é¡»æºå¸¦JWT Tokenã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¦å¤–ä¸€ä¸ªFilterå¯¹è¿™äº›è¯·æ±‚åšä¸€ä¸ªæ‹¦æˆªã€‚è¿™ä¸ªæ‹¦æˆªå™¨ä¸»è¦æ˜¯æå–headerä¸­çš„tokenï¼Œè·Ÿç™»å½•ä¸€æ ·ï¼Œæäº¤ç»™AuthenticationManageråšæ£€æŸ¥ã€‚ //tokenè¿‡æ»¤å™¨ éªŒè¯tokenæœ‰æ•ˆæ€§ @Component public class JwtAuthenticationTokenFilter extends OncePerRequestFilter { @Autowired private TokenService tokenService; @Override protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws ServletException, IOException { LoginUser loginUser = tokenService.getLoginUser(request); if (StringUtils.isNotNull(loginUser) &amp;&amp; StringUtils.isNull(SecurityUtils.getAuthentication())) { tokenService.verifyToken(loginUser); UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(loginUser, null, loginUser.getAuthorities()); authenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request)); SecurityContextHolder.getContext().setAuthentication(authenticationToken); } chain.doFilter(request, response); } }","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"JWT","slug":"JWT","permalink":"mumudadi.top/tags/JWT/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"Springbootåƒæ•¸æ ¡é©—hibernate-validator","slug":"hibernate-validator","date":"2020-01-10T14:16:01.000Z","updated":"2020-02-06T03:27:33.052Z","comments":true,"path":"2020/01/10/hibernate-validator/","link":"","permalink":"mumudadi.top/2020/01/10/hibernate-validator/","excerpt":"","text":"åœ¨å¼€å‘JAVAæœåŠ¡å™¨ç«¯ä»£ç æ—¶ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°å¯¹å¤–éƒ¨ä¼ æ¥çš„å‚æ•°åˆæ³•æ€§è¿›è¡ŒéªŒè¯ï¼Œè€Œhibernate-validatoræä¾›äº†ä¸€äº›å¸¸ç”¨çš„å‚æ•°æ ¡éªŒæ³¨è§£ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿æ¥ä½¿ç”¨ã€‚ é¿å…éå¤šä½¿ç”¨ifåˆ¤ç©ºå°è‡´ä»£ç¢¼æ²‰ç©public class SysDept extends BaseEntity { ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ @NotBlank(message = &quot;éƒ¨é—¨åç§°ä¸èƒ½ä¸ºç©º&quot;) @Size(min = 0, max = 30, message = &quot;éƒ¨é—¨åç§°é•¿åº¦ä¸èƒ½è¶…è¿‡30ä¸ªå­—ç¬¦&quot;) public String getDeptName() { return deptName; } ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ä¹Ÿå¯ä»¥å¯«åœ¨å±¬æ€§ä¸Š /** éƒ¨é—¨åç§° */ @NotBlank(message = &quot;éƒ¨é—¨åç§°ä¸èƒ½ä¸ºç©º&quot;) private String deptName;æ¸¬è©¦çµæœ {&quot;msg&quot;:&quot;éƒ¨é—¨åç§°ä¸èƒ½ä¸ºç©º&quot;,&quot;code&quot;:500}","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"hibernate-validator","slug":"hibernate-validator","permalink":"mumudadi.top/tags/hibernate-validator/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"å®šæ™‚ä»»å‹™quartzä½¿ç”¨","slug":"quartz","date":"2020-01-10T14:16:01.000Z","updated":"2020-02-04T14:55:23.887Z","comments":true,"path":"2020/01/10/quartz/","link":"","permalink":"mumudadi.top/2020/01/10/quartz/","excerpt":"","text":"â€‹ åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­Webåº”ç”¨æœ‰ä¸€ç±»ä¸å¯ç¼ºå°‘çš„ï¼Œé‚£å°±æ˜¯å®šæ—¶ä»»åŠ¡ã€‚ å®šæ—¶ä»»åŠ¡çš„åœºæ™¯å¯ä»¥è¯´éå¸¸å¹¿æ³›ï¼Œæ¯”å¦‚æŸäº›è§†é¢‘ç½‘ç«™ï¼Œè´­ä¹°ä¼šå‘˜åï¼Œæ¯å¤©ä¼šç»™ä¼šå‘˜é€æˆé•¿å€¼ï¼Œæ¯æœˆä¼šç»™ä¼šå‘˜é€ä¸€äº›ç”µå½±åˆ¸ï¼› æ¯”å¦‚åœ¨ä¿è¯æœ€ç»ˆä¸€è‡´æ€§çš„åœºæ™¯ä¸­ï¼Œå¾€å¾€åˆ©ç”¨å®šæ—¶ä»»åŠ¡è°ƒåº¦è¿›è¡Œä¸€äº›æ¯”å¯¹å·¥ä½œï¼›æ¯”å¦‚ä¸€äº›å®šæ—¶éœ€è¦ç”Ÿæˆçš„æŠ¥è¡¨ã€é‚®ä»¶ï¼›æ¯”å¦‚ä¸€äº›éœ€è¦å®šæ—¶æ¸…ç†æ•°æ®çš„ä»»åŠ¡ç­‰ã€‚ æ‰€ä»¥æˆ‘ä»¬æä¾›æ–¹ä¾¿å‹å¥½çš„webç•Œé¢ï¼Œå®ç°åŠ¨æ€ç®¡ç†ä»»åŠ¡ï¼Œå¯ä»¥è¾¾åˆ°åŠ¨æ€æ§åˆ¶å®šæ—¶ä»»åŠ¡å¯åŠ¨ã€æš‚åœã€é‡å¯ã€åˆ é™¤ã€æ·»åŠ ã€ä¿®æ”¹ç­‰æ“ä½œï¼Œæå¤§åœ°æ–¹ä¾¿äº†å¼€å‘è¿‡ç¨‹ã€‚ æ·»åŠ ä¾è³´&lt;!-- å®šæ—¶ä»»åŠ¡ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt; &lt;artifactId&gt;quartz&lt;/artifactId&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;com.mchange&lt;/groupId&gt; &lt;artifactId&gt;c3p0&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt;å®šæ™‚ä»»å‹™èª¿åº¦é¡@Component(&quot;ryTask&quot;) public class RyTask { public void ryMultipleParams(String s, Boolean b, Long l, Double d, Integer i) { System.out.println(StringUtils.format(&quot;æ‰§è¡Œå¤šå‚æ–¹æ³•ï¼š å­—ç¬¦ä¸²ç±»å‹{}ï¼Œå¸ƒå°”ç±»å‹{}ï¼Œé•¿æ•´å‹{}ï¼Œæµ®ç‚¹å‹{}ï¼Œæ•´å½¢{}&quot;, s, b, l, d, i)); } public void ryParams(String params) { System.out.println(&quot;æ‰§è¡Œæœ‰å‚æ–¹æ³•ï¼š&quot; + params); } public void ryNoParams() { System.out.println(&quot;æ‰§è¡Œæ— å‚æ–¹æ³•&quot;); } }å®šæ™‚ä»»å‹™å·¥å…·é¡public class ScheduleUtils { /** * å¾—åˆ°quartzä»»åŠ¡ç±» * * @param sysJob æ‰§è¡Œè®¡åˆ’ * @return å…·ä½“æ‰§è¡Œä»»åŠ¡ç±» */ private static Class&lt;? extends org.quartz.Job&gt; getQuartzJobClass(Job job) { boolean isConcurrent = &quot;0&quot;.equals(job.getConcurrent()); return isConcurrent ? QuartzJobExecution.class : QuartzDisallowConcurrentExecution.class; } /** * æ„å»ºä»»åŠ¡è§¦å‘å¯¹è±¡ */ public static TriggerKey getTriggerKey(Long jobId, String jobGroup) { return TriggerKey.triggerKey(ScheduleConstants.TASK_CLASS_NAME + jobId, jobGroup); } /** * æ„å»ºä»»åŠ¡é”®å¯¹è±¡ */ public static JobKey getJobKey(Long jobId, String jobGroup) { return JobKey.jobKey(ScheduleConstants.TASK_CLASS_NAME + jobId, jobGroup); } /** * åˆ›å»ºå®šæ—¶ä»»åŠ¡ */ public static void createScheduleJob(Scheduler scheduler, Job job) throws SchedulerException, TaskException { Class&lt;? extends org.quartz.Job&gt; jobClass = getQuartzJobClass(job); // æ„å»ºjobä¿¡æ¯ Long jobId = job.getJobId(); String jobGroup = job.getJobGroup(); JobDetail jobDetail = JobBuilder.newJob(jobClass).withIdentity(getJobKey(jobId, jobGroup)).build(); // è¡¨è¾¾å¼è°ƒåº¦æ„å»ºå™¨ CronScheduleBuilder cronScheduleBuilder = CronScheduleBuilder.cronSchedule(job.getCronExpression()); cronScheduleBuilder = handleCronScheduleMisfirePolicy(job, cronScheduleBuilder); // æŒ‰æ–°çš„cronExpressionè¡¨è¾¾å¼æ„å»ºä¸€ä¸ªæ–°çš„trigger CronTrigger trigger = TriggerBuilder.newTrigger().withIdentity(getTriggerKey(jobId, jobGroup)) .withSchedule(cronScheduleBuilder).build(); // æ”¾å…¥å‚æ•°ï¼Œè¿è¡Œæ—¶çš„æ–¹æ³•å¯ä»¥è·å– jobDetail.getJobDataMap().put(ScheduleConstants.TASK_PROPERTIES, job); // åˆ¤æ–­æ˜¯å¦å­˜åœ¨ if (scheduler.checkExists(getJobKey(jobId, jobGroup))) { // é˜²æ­¢åˆ›å»ºæ—¶å­˜åœ¨æ•°æ®é—®é¢˜ å…ˆç§»é™¤ï¼Œç„¶ååœ¨æ‰§è¡Œåˆ›å»ºæ“ä½œ scheduler.deleteJob(getJobKey(jobId, jobGroup)); } scheduler.scheduleJob(jobDetail, trigger); // æš‚åœä»»åŠ¡ if (job.getStatus().equals(ScheduleConstants.Status.PAUSE.getValue())) { scheduler.pauseJob(ScheduleUtils.getJobKey(jobId, jobGroup)); } } /** * è®¾ç½®å®šæ—¶ä»»åŠ¡ç­–ç•¥ */ public static CronScheduleBuilder handleCronScheduleMisfirePolicy(Job job, CronScheduleBuilder cb) throws TaskException { switch (job.getMisfirePolicy()) { case ScheduleConstants.MISFIRE_DEFAULT: return cb; case ScheduleConstants.MISFIRE_IGNORE_MISFIRES: return cb.withMisfireHandlingInstructionIgnoreMisfires(); case ScheduleConstants.MISFIRE_FIRE_AND_PROCEED: return cb.withMisfireHandlingInstructionFireAndProceed(); case ScheduleConstants.MISFIRE_DO_NOTHING: return cb.withMisfireHandlingInstructionDoNothing(); default: throw new TaskException(&quot;The task misfire policy &#39;&quot; + job.getMisfirePolicy() + &quot;&#39; cannot be used in cron schedule tasks&quot;, Code.CONFIG_ERROR); } } }å®šæ™‚ä»»å‹™èª¿åº¦è¡¨ å›å¾©ä»»å‹™èª¿åº¦ @Override @Transactional public int resumeJob(Job job) throws SchedulerException { Long jobId = job.getJobId(); String jobGroup = job.getJobGroup(); job.setStatus(ScheduleConstants.Status.NORMAL.getValue()); int rows = jobMapper.updateJob(job); if (rows &gt; 0) { scheduler.resumeJob(ScheduleUtils.getJobKey(jobId, jobGroup)); } return rows; }æš«åœä»»å‹™ scheduler.pauseJob(ScheduleUtils.getJobKey(jobId, jobGroup));åŸ·è¡Œä¸€æ¬¡ // å‚æ•° JobDataMap dataMap = new JobDataMap(); dataMap.put(ScheduleConstants.TASK_PROPERTIES, properties); scheduler.triggerJob(ScheduleUtils.getJobKey(jobId, jobGroup), dataMap);","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"quartz","slug":"quartz","permalink":"mumudadi.top/tags/quartz/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"javaé¢è¯•é¢˜æ•´ç†","slug":"InterviewQuestion","date":"2020-01-09T09:16:01.000Z","updated":"2020-02-04T14:40:47.925Z","comments":true,"path":"2020/01/09/InterviewQuestion/","link":"","permalink":"mumudadi.top/2020/01/09/InterviewQuestion/","excerpt":"","text":"HashMapçš„keyå­˜å¯¹è±¡çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ä»€ä¹ˆ å¦‚æœè‡ªå®šä¹‰å¯¹è±¡ä½œä¸ºMapçš„é”®ï¼Œé‚£ä¹ˆå¿…é¡»é‡å†™hashCodeå’Œequalsæ–¹æ³• ç»•å£ä»¤å¼hashCodeä¸equals å¦‚æœä¸¤å¯¹è±¡equals()æ˜¯true,é‚£ä¹ˆå®ƒä»¬çš„hashCode()å€¼ä¸€å®šç›¸ç­‰ å¦‚æœä¸¤å¯¹è±¡çš„hashCode()å€¼ç›¸ç­‰ï¼Œå®ƒä»¬çš„equalsä¸ä¸€å®šç›¸ç­‰ï¼ˆhashå†²çªå•¦ï¼‰ æ€»ç»“ï¼š â€‹ 1.hashCode()åœ¨æ•£åˆ—è¡¨ä¸­æ‰æœ‰ç”¨ï¼Œåœ¨å…¶ä»–æƒ…å†µä¸‹æ²¡ç”¨ â€‹ 2.å“ˆå¸Œå€¼å†²çªäº†åœºæ™¯ï¼ŒhashCodeç›¸ç­‰ï¼Œä½†equalsä¸ç­‰ â€‹ 3.hashCode: è®¡ç®—é”®çš„hashcodeä½œä¸ºå­˜å‚¨é”®ä¿¡æ¯çš„æ•°ç»„ä¸‹æ ‡ç”¨äºæŸ¥æ‰¾é”®å¯¹è±¡çš„å­˜å‚¨ä½ç½® â€‹ 4.equalsï¼šHashMapä½¿ç”¨equals()åˆ¤æ–­å½“å‰çš„é”®æ˜¯å¦ä¸è¡¨ä¸­å­˜åœ¨çš„é”®ç›¸åŒã€‚ javaå¼‚å¸¸ç§ç±»ï¼Œå…·ä½“æ€ä¹ˆç”¨é¡¹ç›®é‡Œ å…ˆå®šä¹‰ä¸€ä¸ªå¼‚å¸¸ç æšä¸¾å¤„ç† public enum ErrorCodeEnum { SYS_ERROR(&quot;SYS_ERROR&quot;, &quot;ç³»ç»Ÿé”™è¯¯ï¼Œè¯·é‡è¯•&quot;), UNKNOWN_ERROR(&quot;UNKNOWN_SYS_ERROR&quot;, &quot;æœªçŸ¥çš„ç³»ç»Ÿå¼‚å¸¸&quot;), SERVICE_INVOKE_FAIL(&quot;SERVICE_INVOKE_FAIL&quot;, &quot;æœåŠ¡è°ƒç”¨å¤±è´¥&quot;), ILLEGAL_ARGS(&quot;ILLEGAL_ARGS&quot;, &quot;å‚æ•°æ ¡éªŒé”™è¯¯&quot;) æšä¸¾æ„é€ å‡½æ•° /** * ç»“æœç å€¼. */ private String code; /** * æè¿°. */ private String desc; ErrorCodeEnum(String code, String desc) { this.code = code; this.desc = desc; } ä¸€ä¸ªé€šè¿‡codeæ‰¾æšä¸¾çš„æ–¹æ³• public static ErrorCodeEnum getByValue(String code) { for (ErrorCodeEnum result : values()) { System.out.println(result.ordinal()); if (StringUtils.equals(result.getCode(), code)) { return result; } } return null; }è‡ªå®šä¹‰å¼‚å¸¸ æ³¨æ„æœ‰ä¸ªå¼‚å¸¸æšä¸¾ ç»§æ‰¿äº†RuntimeException public class TestException extends RuntimeException { private static final long serialVersionUID = -8581672033133636908L; /*** é”™è¯¯ç æšä¸¾*/ private ErrorCodeEnum errorCode; æ€»ç»“ å®šä¹‰å¼‚å¸¸ç ç±»å°±å¯ä»¥ï¼Œå¦‚æœä¸šåŠ¡éå¸¸å¤æ‚å¯ä»¥æŠŠå¼‚å¸¸ç ç±»å¤šæå‡ ä¸ªå‡ºæ¥ é¡¹ç›®ä¸­ä¸€ä¸ªå¼‚å¸¸ç±»å¤Ÿç”¨äº†ï¼Œé€šè¿‡ä¸åŒå¼‚å¸¸ç å®šä¹‰å»åŒºåˆ†ä¸šåŠ¡å¼‚å¸¸ å¼ºçƒˆå»ºè®®å¼€å‘æ—¶å¤šå®šä¹‰å¼‚å¸¸ç ï¼Œè¶Šç»†è¶Šå¥½ï¼Œä¸Šäº†ç”Ÿäº§æ–¹ä¾¿å¿«é€Ÿå®šä½BUG å…³é”®æšä¸¾å¼‚å¸¸ç +è‡ªå®šä¹‰å¼‚å¸¸ æ¥å£è”è°ƒé—®é¢˜æ¡ˆä¾‹äº’è”ç½‘é¡¹ç›®æ¥å£è”è°ƒéå¸¸é‡è¦ï¼Œä»Šå¤©å’Œè¿™ä¸ªç³»ç»Ÿå¯¹æ¥æ˜å¤©åˆæ¢äº†ä¸€å®¶å…¬å¸å¯¹æ¥ï¼Œè”è°ƒçš„æ—¶å€™ä¼šé‡åˆ°å„ç§é—®é¢˜ ç¼–ç é—®é¢˜gbkã€utf-8 ä¸è¯´äº†æœ€ç®€å•çš„ä¹Ÿæœ€å®¹æ˜“ä¹±ç çš„é—®é¢˜ ç¯å¢ƒä¸é€š ping å‘½ä»¤ curl å‘½ä»¤å¯ä»¥å¸®åˆ°ä½ ï¼Œè”è°ƒå‰ä¸€ä»£è¦æ£€æŸ¥ä¸‹ç¯å¢ƒ æ•°æ®æ ¼å¼è½¬æ¢å¼‚å¸¸ï¼Œæ¥å£æ–‡æ¡£æ²¡çœ‹æ¸…æ¥šç»™äº†é”™è¯¯çš„æ ¼å¼ï¼Œç²—å¿ƒé—®é¢˜ Javaè®¾è®¡æ¨¡å¼æ€æƒ³ï¼ˆå•ä¾‹æ¨¡å¼ï¼Œå·¥å‚æ¨¡å¼ï¼Œç­–ç•¥æ¨¡å¼ï¼‰â€‹ å•ä¾‹æ¨¡å¼ï¼šå•ä¾‹æ¨¡å¼æ ¸å¿ƒåªéœ€è¦newä¸€ä¸ªå®ä¾‹å¯¹è±¡çš„æ¨¡å¼ï¼Œæ¯”å¦‚æ•°æ®åº“è¿æ¥ï¼Œåœ¨çº¿äººæ•°ç­‰ï¼Œä¸€äº›ç½‘ç«™ä¸Šçœ‹åˆ°çš„åœ¨çº¿äººæ•°ç»Ÿè®¡å°±æ˜¯é€šè¿‡å•ä¾‹æ¨¡å¼å®ç°çš„ï¼ŒæŠŠä¸€ä¸ªè®¡æ—¶å™¨å­˜æ”¾åœ¨æ•°æ®åº“æˆ–è€…å†…å­˜ä¸­ï¼Œå½“æœ‰äººç™»é™†çš„æ—¶å€™å–å‡ºæ¥åŠ ä¸€å†æ”¾å›å»ï¼Œæœ‰äººé€€å‡ºç™»é™†çš„æ—¶å€™å–å‡ºæ¥å‡ä¸€å†æ”¾å›å»ï¼Œä½†æ˜¯å½“æœ‰ä¸¤ä¸ªäººåŒæ—¶ç™»é™†çš„æ—¶å€™ï¼Œä¼šåŒæ—¶å–å‡ºè®¡æ•°å™¨ï¼ŒåŒæ—¶åŠ ä¸€ï¼ŒåŒæ—¶æ”¾å›å»ï¼Œè¿™æ ·çš„è¯æ•°æ®å°±ä¼šé”™è¯¯ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªå…¨å±€å˜é‡çš„å¯¹è±¡ç»™å…¨éƒ¨äººä½¿ç”¨ï¼Œåªéœ€è¦newå‡ºä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œè¿™å°±æ˜¯å•ä¾‹æ¨¡å¼çš„åº”ç”¨ï¼Œå¹¶ä¸”å•ä¾‹æ¨¡å¼èŠ‚çœèµ„æºï¼Œå› ä¸ºå®ƒæ§åˆ¶äº†å®ä¾‹å¯¹è±¡çš„ä¸ªæ•°ï¼Œå¹¶æœ‰åˆ©äºgcå›æ”¶ã€‚ â€‹ ç­–ç•¥æ¨¡å¼ï¼šå°±æ˜¯å°†å‡ ä¸ªç±»ä¸­å…¬å…±çš„æ–¹æ³•æå–åˆ°ä¸€ä¸ªæ–°çš„ç±»ä¸­ï¼Œä»è€Œä½¿æ‰©å±•æ›´å®¹æ˜“ï¼Œä¿è¯ä»£ç çš„å¯ç§»æ¤æ€§ï¼Œå¯ç»´æŠ¤æ€§å¼ºã€‚æ¯”å¦‚æœ‰ä¸ªéœ€æ±‚æ˜¯å†™é¸­å­å¯¹è±¡ï¼Œé¸­å­æœ‰å«ï¼Œé£ï¼Œå¤–å½¢è¿™ä¸‰ç§æ–¹æ³•ï¼Œå¦‚æœæ¯ä¸ªé¸­å­ç±»éƒ½å†™è¿™ä¸‰ä¸ªæ–¹æ³•ä¼šå‡ºç°ä»£ç çš„å†—ä½™ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥æŠŠé¸­å­ä¸­çš„å«ï¼Œé£ï¼Œå¤–å½¢è¿™ä¸‰ä¸ªæ–¹æ³•æå–å‡ºæ¥ï¼Œæ”¾åˆ°é¸­çˆ¶ç±»ä¸­ï¼Œè®©æ¯ä¸ªé¸­å­éƒ½ç»§æ‰¿è¿™ä¸ªé¸­çˆ¶ç±»ï¼Œé‡å†™è¿™ä¸‰ä¸ªæ–¹æ³•ï¼Œè¿™æ ·å°è£…çš„ä»£ç å¯ç§»æ¤æ€§å¼ºï¼Œå½“ç”¨æˆ·æå‡ºæ–°çš„éœ€æ±‚æ¯”å¦‚é¸­å­ä¼šæ¸¸æ³³ï¼Œé‚£ä¹ˆå¯¹äºæˆ‘ä»¬ooç¨‹åºå‘˜æ¥è®²å°±éå¸¸ç®€å•äº†æˆ‘ä»¬åªéœ€è¦åœ¨é¸­çˆ¶ç±»ä¸­åŠ ä¸€ä¸ªæ¸¸æ³³çš„æ–¹æ³•ï¼Œè®©ä¼šæ¸¸æ³³çš„é¸­å­é‡å†™æ¸¸æ³³æ–¹æ³•å°±å¯ä»¥äº†ã€‚ â€‹ å·¥å‚æ¨¡å¼ï¼šç®€å•çš„å·¥å‚æ¨¡å¼ä¸»è¦æ˜¯ç»Ÿä¸€æä¾›å®ä¾‹å¯¹è±¡çš„å¼•ç”¨ï¼Œé€šè¿‡å·¥å‚æ¨¡å¼æ¥å£è·å–å®ä¾‹å¯¹è±¡çš„å¼•ç”¨ã€‚æ¯”å¦‚ä¸€ä¸ªç™»é™†åŠŸèƒ½ï¼Œåç«¯æœ‰ä¸‰ä¸ªç±»ï¼Œcontrollerç±»ï¼Œinterfaceç±»ï¼Œå®ç°æ¥å£çš„å®ç°ç±»ã€‚å½“å®¢æˆ·ç«¯å‘å‡ºä¸€ä¸ªè¯·æ±‚ï¼Œå½“è¯·æ±‚ä¼ åˆ°controllerç±»ä¸­æ—¶ï¼Œcontrollerè·å–æ¥å£çš„å¼•ç”¨å¯¹è±¡ï¼Œè€Œå®ç°æ¥å£çš„å®ç°ç±»ä¸­å°è£…å¥½äº†ç™»é™†çš„ä¸šåŠ¡é€»è¾‘ä»£ç ã€‚å½“ä½ éœ€è¦åŠ ä¸€ä¸ªæ³¨å†Œéœ€æ±‚çš„æ—¶å€™åªéœ€è¦åœ¨æ¥å£ç±»ä¸­åŠ ä¸€ä¸ªæ³¨å†Œæ–¹æ³•ï¼Œå®ç°ç±»ä¸­å®ç°æ–¹æ³•ï¼Œcontrollerè·å–æ¥å£çš„å¼•ç”¨å¯¹è±¡å³å¯ï¼Œä¸éœ€è¦æ”¹åŠ¨åŸæ¥çš„ä»£ç ï¼Œè¿™ç§åšæ³•æ˜¯çš„å¯æ‹“å±•æ€§å¼ºã€‚ SpringMVCä¸»æµç¨‹ 1ã€ç”¨æˆ·å‘é€è¯·æ±‚è‡³å‰ç«¯æ§åˆ¶å™¨DispatcherServletã€‚ 2ã€DispatcherServletæ”¶åˆ°è¯·æ±‚è°ƒç”¨HandlerMappingå¤„ç†å™¨æ˜ å°„å™¨ã€‚ 3ã€å¤„ç†å™¨æ˜ å°„å™¨æ‰¾åˆ°å…·ä½“çš„å¤„ç†å™¨(å¯ä»¥æ ¹æ®xmlé…ç½®ã€æ³¨è§£è¿›è¡ŒæŸ¥æ‰¾)ï¼Œç”Ÿæˆå¤„ç†å™¨å¯¹è±¡åŠå¤„ç†å™¨æ‹¦æˆªå™¨(å¦‚æœæœ‰åˆ™ç”Ÿæˆ)ä¸€å¹¶è¿”å›ç»™DispatcherServletã€‚ 4ã€ DispatcherServletè°ƒç”¨HandlerAdapterå¤„ç†å™¨é€‚é…å™¨ã€‚ 5ã€HandlerAdapterç»è¿‡é€‚é…è°ƒç”¨å…·ä½“çš„å¤„ç†å™¨(Controllerï¼Œä¹Ÿå«åç«¯æ§åˆ¶å™¨)ã€‚ 6ã€Controlleræ‰§è¡Œå®Œæˆè¿”å›ModelAndViewã€‚ 7ã€HandlerAdapterå°†controlleræ‰§è¡Œç»“æœModelAndViewè¿”å›ç»™DispatcherServletã€‚ 8ã€DispatcherServletå°†ModelAndViewä¼ ç»™ViewResloverè§†å›¾è§£æå™¨ã€‚ 9ã€ViewResloverè§£æåè¿”å›å…·ä½“View. 10ã€DispatcherServletæ ¹æ®Viewè¿›è¡Œæ¸²æŸ“è§†å›¾ï¼ˆå³å°†æ¨¡å‹æ•°æ®å¡«å……è‡³è§†å›¾ä¸­ï¼‰ã€‚ 11ã€DispatcherServletå“åº”ç”¨æˆ·ã€‚ SpringAOP/IOC1.ç†è§£â€œæ§åˆ¶åè½¬â€œ æ§åˆ¶åè½¬ï¼Œä¹Ÿç§°ä¸ºä¾èµ–æ³¨å…¥ï¼Œæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„ä¸€ç§è®¾è®¡ç†å¿µï¼Œç”¨æ¥é™ä½ç¨‹åºä»£ç ä¹‹é—´çš„è€¦åˆåº¦ã€‚ ç¨‹åºçš„è€¦åˆï¼š è°ƒç”¨è€…ä¸è¢«è°ƒç”¨è€…çš„ä¾èµ–å…³ç³» æ¯”å¦‚ï¼šç¨‹åºå‘˜Aè´Ÿè´£ç¼–å†™Aç±»ï¼Œç¨‹åºå‘˜Bè´Ÿè´£Bç±»å¼€å‘ï¼ŒAç±»çš„æŸäº›åŠŸèƒ½éœ€è¦å®ä¾‹åŒ–Bç±»çš„å¯¹è±¡è°ƒç”¨å…¶æ–¹æ³•æ‰èƒ½å®Œæˆï¼Œé‚£ä¹ˆAç±»å°±ä¾èµ–Bç±»ï¼Œå¦‚æœç¨‹åºå‘˜Bä¸å†™Bç±» éš¾é“ç¨‹åºå‘˜Aè¦ä¸€ç›´ç­‰ä¸‹å»å—ï¼Ÿ ä¼ä¸šå¼€å‘çš„åŸåˆ™ï¼š &quot;ç¼–è¯‘æ—¶ä¸ä¾èµ–ï¼Œè¿è¡Œæ—¶æ‰ä¾èµ–&quot; ç†è§£â€œé¢å‘åˆ‡é¢ç¼–ç¨‹â€ é‚£ä¹ˆä»€ä¹ˆæ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹å‘¢ï¼Ÿæ¯”å¦‚åœ¨ä¸¤ä¸ªç±»ä¸­ï¼Œå¯èƒ½éƒ½éœ€è¦åœ¨æ¯ä¸ªæ–¹æ³•ä¸­è®°å½•æ—¥å¿—ã€‚æŒ‰ç…§é¢å‘å¯¹è±¡çš„è®¾è®¡æ–¹æ³•ï¼Œæˆ‘ä»¬å°±å¿…é¡»åœ¨ä¸¤ä¸ªç±»çš„æ–¹æ³•ä¸­éƒ½åŠ å…¥æ—¥å¿—çš„å†…å®¹ã€‚ä¹Ÿè®¸ä»–ä»¬æ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œä½†å°±æ˜¯å› ä¸ºé¢å‘å¯¹è±¡çš„è®¾è®¡è®©ç±»ä¸ç±»ä¹‹é—´æ— æ³•è”ç³»ï¼Œè€Œä¸èƒ½å°†è¿™äº›é‡å¤çš„ä»£ç ç»Ÿä¸€èµ·æ¥ã€‚ ä¹Ÿè®¸æœ‰äººä¼šè¯´ï¼Œé‚£å¥½åŠå•Šï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™æ®µä»£ç å†™åœ¨ä¸€ä¸ªç‹¬ç«‹çš„ç±»ç‹¬ç«‹çš„æ–¹æ³•é‡Œï¼Œç„¶åå†åœ¨è¿™ä¸¤ä¸ªç±»ä¸­è°ƒç”¨ã€‚ä½†æ˜¯ï¼Œè¿™æ ·ä¸€æ¥ï¼Œè¿™ä¸¤ä¸ªç±»è·Ÿæˆ‘ä»¬ä¸Šé¢æåˆ°çš„ç‹¬ç«‹çš„ç±»å°±æœ‰è€¦åˆäº†ï¼Œå®ƒçš„æ”¹å˜ä¼šå½±å“è¿™ä¸¤ä¸ªç±»ã€‚é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•ï¼Œèƒ½è®©æˆ‘ä»¬åœ¨éœ€è¦çš„æ—¶å€™ï¼Œéšæ„åœ°åŠ å…¥ä»£ç å‘¢ï¼Ÿè¿™ç§åœ¨è¿è¡Œæ—¶ï¼ŒåŠ¨æ€åœ°å°†ä»£ç åˆ‡å…¥åˆ°ç±»çš„æŒ‡å®šæ–¹æ³•ã€æŒ‡å®šä½ç½®ä¸Šçš„ç¼–ç¨‹æ€æƒ³å°±æ˜¯é¢å‘åˆ‡é¢çš„ç¼–ç¨‹ã€‚ 4ç§åˆ†å¸ƒå¼sessionè§£å†³æ–¹æ¡ˆç›´æ¥å°†ä¿¡æ¯å­˜å‚¨åœ¨cookieä¸­cookieæ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯ä¸Šçš„ä¸€å°æ®µæ•°æ®ï¼Œå®¢æˆ·ç«¯é€šè¿‡httpåè®®å’ŒæœåŠ¡å™¨è¿›è¡Œcookieäº¤äº’ï¼Œé€šå¸¸ç”¨æ¥å­˜å‚¨ä¸€äº›ä¸æ•æ„Ÿä¿¡æ¯ ç¼ºç‚¹ï¼š â€‹ æ•°æ®å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œå­˜åœ¨å®‰å…¨éšæ‚£â€‹ cookieå­˜å‚¨å¤§å°ã€ç±»å‹å­˜åœ¨é™åˆ¶â€‹ æ•°æ®å­˜å‚¨åœ¨cookieä¸­ï¼Œå¦‚æœä¸€æ¬¡è¯·æ±‚cookieè¿‡å¤§ï¼Œä¼šç»™ç½‘ç»œå¢åŠ æ›´å¤§çš„å¼€é”€ sessionå¤åˆ¶ sessionå¤åˆ¶æ˜¯å°å‹ä¼ä¸šåº”ç”¨ä½¿ç”¨è¾ƒå¤šçš„ä¸€ç§æœåŠ¡å™¨é›†ç¾¤sessionç®¡ç†æœºåˆ¶ï¼Œåœ¨çœŸæ­£çš„å¼€å‘ä½¿ç”¨çš„å¹¶ä¸æ˜¯å¾ˆå¤šï¼Œé€šè¿‡å¯¹webæœåŠ¡å™¨(ä¾‹å¦‚Tomcat)è¿›è¡Œæ­å»ºé›†ç¾¤ã€‚ å­˜åœ¨çš„é—®é¢˜ï¼š sessionåŒæ­¥çš„åŸç†æ˜¯åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘é‡Œé¢é€šè¿‡å‘é€å¹¿æ’­æ¥å¼‚æ­¥åŒæ­¥sessionçš„ï¼Œä¸€æ—¦æœåŠ¡å™¨å¤šäº†ï¼Œå¹¶å‘ä¸Šæ¥äº†ï¼Œsessionéœ€è¦åŒæ­¥çš„æ•°æ®é‡å°±å¤§äº†ï¼Œéœ€è¦å°†å…¶ä»–æœåŠ¡å™¨ä¸Šçš„sessionå…¨éƒ¨åŒæ­¥åˆ°æœ¬æœåŠ¡å™¨ä¸Šï¼Œä¼šå¸¦æ¥ä¸€å®šçš„ç½‘è·¯å¼€é”€ï¼Œåœ¨ç”¨æˆ·é‡ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œä¼šå‡ºç°å†…å­˜ä¸è¶³çš„æƒ…å†µä¼˜ç‚¹ï¼š æœåŠ¡å™¨ä¹‹é—´çš„sessionä¿¡æ¯éƒ½æ˜¯åŒæ­¥çš„ï¼Œä»»ä½•ä¸€å°æœåŠ¡å™¨å®•æœºçš„æ—¶å€™ä¸ä¼šå½±å“å¦å¤–æœåŠ¡å™¨ä¸­sessionçš„çŠ¶æ€ï¼Œé…ç½®ç›¸å¯¹ç®€å•Tomcatå†…éƒ¨å·²ç»æ”¯æŒåˆ†å¸ƒå¼æ¶æ„å¼€å‘ç®¡ç†æœºåˆ¶ï¼Œå¯ä»¥å¯¹tomcatä¿®æ”¹é…ç½®æ¥æ”¯æŒsessionå¤åˆ¶ï¼Œåœ¨é›†ç¾¤ä¸­çš„å‡ å°æœåŠ¡å™¨ä¹‹é—´åŒæ­¥sessionå¯¹è±¡ï¼Œä½¿æ¯å°æœåŠ¡å™¨ä¸Šéƒ½ä¿å­˜äº†æ‰€æœ‰ç”¨æˆ·çš„sessionä¿¡æ¯ï¼Œè¿™æ ·ä»»ä½•ä¸€å°æœ¬æœºå®•æœºéƒ½ä¸ä¼šå¯¼è‡´sessionæ•°æ®çš„ä¸¢å¤±ï¼Œè€ŒæœåŠ¡å™¨ä½¿ç”¨sessionæ—¶ï¼Œä¹Ÿåªéœ€è¦åœ¨æœ¬æœºè·å–å³å¯ sessionç»‘å®šï¼š åˆ©ç”¨nginxçš„åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡ï¼Œä¹‹å‰æ˜¯å®¢æˆ·ç«¯ä¼šè¢«åˆ†é…åˆ°å…¶ä¸­ä¸€å°æœåŠ¡å™¨è¿›è¡Œå¤„ç†ï¼Œå…·ä½“åˆ†é…åˆ°å“ªå°æœåŠ¡å™¨è¿›è¡Œå¤„ç†è¿˜å¾—çœ‹æœåŠ¡å™¨çš„è´Ÿè½½å‡è¡¡ç®—æ³•(è½®è¯¢ã€éšæœºã€ip-hashã€æƒé‡ç­‰)ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åŸºäºnginxçš„ip-hashç­–ç•¥ï¼Œå¯ä»¥å¯¹å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›è¡Œç»‘å®šï¼ŒåŒä¸€ä¸ªå®¢æˆ·ç«¯å°±åªèƒ½è®¿é—®è¯¥æœåŠ¡å™¨ï¼Œæ— è®ºå®¢æˆ·ç«¯å‘é€å¤šå°‘æ¬¡è¯·æ±‚éƒ½è¢«åŒä¸€ä¸ªæœåŠ¡å™¨å¤„ç†ç¼ºç‚¹ï¼š å®¹æ˜“é€ æˆå•ç‚¹æ•…éšœï¼Œå¦‚æœæœ‰ä¸€å°æœåŠ¡å™¨å®•æœºï¼Œé‚£ä¹ˆè¯¥å°æœåŠ¡å™¨ä¸Šçš„sessionä¿¡æ¯å°†ä¼šä¸¢å¤± å‰ç«¯ä¸èƒ½æœ‰è´Ÿè½½å‡è¡¡ï¼Œå¦‚æœæœ‰ï¼Œsessionç»‘å®šå°†ä¼šå‡ºé—®é¢˜ ä¼˜ç‚¹ï¼š é…ç½®ç®€å• åŸºäºrediså­˜å‚¨sessionæ–¹æ¡ˆ ä¼˜ç‚¹ï¼š è¿™æ˜¯ä¼ä¸šä¸­ä½¿ç”¨çš„æœ€å¤šçš„ä¸€ç§æ–¹å¼springä¸ºæˆ‘ä»¬å°è£…å¥½äº†spring-sessionï¼Œç›´æ¥å¼•å…¥ä¾èµ–å³å¯æ•°æ®ä¿å­˜åœ¨redisä¸­ï¼Œæ— ç¼æ¥å…¥ï¼Œä¸å­˜åœ¨ä»»ä½•å®‰å…¨éšæ‚£redisè‡ªèº«å¯åšé›†ç¾¤ï¼Œæ­å»ºä¸»ä»ï¼ŒåŒæ—¶æ–¹ä¾¿ç®¡ç†ç¼ºç‚¹ï¼š å¤šäº†ä¸€æ¬¡ç½‘ç»œè°ƒç”¨ï¼Œwebå®¹å™¨éœ€è¦å‘redisè®¿é—®æ€»ç»“ï¼šä¸€èˆ¬ä¼šå°†webå®¹å™¨æ‰€åœ¨çš„æœåŠ¡å™¨å’Œredisæ‰€åœ¨çš„æœåŠ¡å™¨æ”¾åœ¨åŒä¸€ä¸ªæœºæˆ¿ï¼Œå‡å°‘ç½‘ç»œå¼€é”€ï¼Œèµ°å†…ç½‘è¿›è¡Œè¿æ¥ æµ…æ Comparableå’Œ Comparatorçš„åŒºåˆ«Comparableå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªå†…æ¯”è¾ƒå™¨ï¼Œå®ç°äº†Comparableæ¥å£çš„ç±»æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯è¿™äº› ç±»æ˜¯å¯ä»¥å’Œè‡ªå·±æ¯”è¾ƒçš„ï¼Œè‡³äºå…·ä½“å’Œå¦ä¸€ä¸ªå®ç°äº†Comparableæ¥å£çš„ç±»å¦‚ä½•æ¯”è¾ƒï¼Œåˆ™ä¾èµ–compareToæ–¹æ³•çš„å®ç°ï¼ŒcompareToæ–¹æ³•ä¹Ÿè¢«ç§°ä¸ºè‡ªç„¶æ¯”è¾ƒæ–¹æ³•ã€‚å¦‚æœå¼€å‘è€…addè¿›å…¥ä¸€ä¸ªCollectionçš„å¯¹è±¡æƒ³è¦Collectionsçš„sortæ–¹æ³•å¸®ä½ è‡ªåŠ¨è¿›è¡Œæ’åºçš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å¿…é¡»å®ç°Comparableæ¥å£ã€‚compareToæ–¹æ³•çš„è¿”å›å€¼æ˜¯intï¼Œæœ‰ä¸‰ç§æƒ…å†µï¼š 1ã€æ¯”è¾ƒè€…å¤§äºè¢«æ¯”è¾ƒè€…ï¼ˆä¹Ÿå°±æ˜¯compareToæ–¹æ³•é‡Œé¢çš„å¯¹è±¡ï¼‰ï¼Œé‚£ä¹ˆè¿”å›æ­£æ•´æ•°2ã€æ¯”è¾ƒè€…ç­‰äºè¢«æ¯”è¾ƒè€…ï¼Œé‚£ä¹ˆè¿”å›03ã€æ¯”è¾ƒè€…å°äºè¢«æ¯”è¾ƒè€…ï¼Œé‚£ä¹ˆè¿”å›è´Ÿæ•´æ•° Comparatorå¯ä»¥è®¤ä¸ºæ˜¯æ˜¯ä¸€ä¸ªå¤–æ¯”è¾ƒå™¨ï¼Œä¸ªäººè®¤ä¸ºæœ‰ä¸¤ç§æƒ…å†µå¯ä»¥ä½¿ç”¨å®ç°Comparatoræ¥å£çš„æ–¹å¼ï¼š1ã€ä¸€ä¸ªå¯¹è±¡ä¸æ”¯æŒè‡ªå·±å’Œè‡ªå·±æ¯”è¾ƒï¼ˆæ²¡æœ‰å®ç°Comparableæ¥å£ï¼‰ï¼Œä½†æ˜¯åˆæƒ³å¯¹ä¸¤ä¸ªå¯¹è±¡è¿›è¡Œæ¯”è¾ƒã€‚2ã€ä¸€ä¸ªå¯¹è±¡å®ç°äº†Comparableæ¥å£ï¼Œä½†æ˜¯å¼€å‘è€…è®¤ä¸ºcompareToæ–¹æ³•ä¸­çš„æ¯”è¾ƒæ–¹å¼å¹¶ä¸æ˜¯è‡ªå·±æƒ³è¦çš„é‚£ç§æ¯”è¾ƒæ–¹å¼ã€‚Comparatoræ¥å£é‡Œé¢æœ‰ä¸€ä¸ªcompareæ–¹æ³•ï¼Œæ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°T o1å’ŒT o2ï¼Œæ˜¯æ³›å‹çš„è¡¨ç¤ºæ–¹å¼ï¼Œåˆ†åˆ«è¡¨ç¤ºå¾…æ¯”è¾ƒçš„ä¸¤ä¸ªå¯¹è±¡ï¼Œæ–¹æ³•è¿”å›å€¼å’ŒComparableæ¥å£ä¸€æ ·æ˜¯intï¼Œæœ‰ä¸‰ç§æƒ…å†µï¼š 1ã€o1å¤§äºo2ï¼Œè¿”å›æ­£æ•´æ•° 2ã€o1ç­‰äºo2ï¼Œè¿”å›0 3ã€o1å°äºo3ï¼Œè¿”å›è´Ÿæ•´æ•° è¿™ä¸¤ç§æ¯”è¾ƒå™¨Comparableå’ŒComparatorï¼Œåè€…ç›¸æ¯”å‰è€…æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š ä¸ªæ€§åŒ–æ¯”è¾ƒï¼šå¦‚æœå®ç°ç±»æ²¡æœ‰å®ç°Comparableæ¥å£ï¼Œåˆæƒ³å¯¹ä¸¤ä¸ªç±»è¿›è¡Œæ¯”è¾ƒï¼ˆæˆ–è€…å®ç°ç±»å®ç°äº†Comparableæ¥å£ï¼Œä½†æ˜¯å¯¹compareToæ–¹æ³•å†…çš„æ¯”è¾ƒç®—æ³•ä¸æ»¡æ„ï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥å®ç°Comparatoræ¥å£ï¼Œè‡ªå®šä¹‰ä¸€ä¸ªæ¯”è¾ƒå™¨ï¼Œå†™æ¯”è¾ƒç®—æ³•ã€‚è§£è€¦ï¼šå®ç°Comparableæ¥å£çš„æ–¹å¼æ¯”å®ç°Comparatoræ¥å£çš„è€¦åˆæ€§è¦å¼ºä¸€äº›ï¼Œå¦‚æœè¦ä¿®æ”¹æ¯”è¾ƒç®—æ³•ï¼Œè¦ä¿®æ”¹Comparableæ¥å£çš„å®ç°ç±»ï¼Œè€Œå®ç°Comparatorçš„ç±»æ˜¯åœ¨å¤–éƒ¨è¿›è¡Œæ¯”è¾ƒçš„ï¼Œä¸éœ€è¦å¯¹å®ç°ç±»æœ‰ä»»ä½•ä¿®æ”¹ã€‚ä»è¿™ä¸ªè§’åº¦è¯´ï¼Œå…¶å®æœ‰äº›ä¸å¤ªå¥½ï¼Œå°¤å…¶åœ¨æˆ‘ä»¬å°†å®ç°ç±»çš„.classæ–‡ä»¶æ‰“æˆä¸€ä¸ª.jaræ–‡ä»¶æä¾›ç»™å¼€å‘è€…ä½¿ç”¨çš„æ—¶å€™ã€‚ Collections å·¥å…·ç±»å¸¸ç”¨æ–¹æ³•:æ’åºæ“ä½œ void reverse(List list)//åè½¬ void shuffle(List list)//éšæœºæ’åº void sort(List list)//æŒ‰è‡ªç„¶æ’åºçš„å‡åºæ’åº void sort(List list, Comparator c)//å®šåˆ¶æ’åºï¼Œç”±Comparatoræ§åˆ¶æ’åºé€»è¾‘ void swap(List list, int i , int j)//äº¤æ¢ä¸¤ä¸ªç´¢å¼•ä½ç½®çš„å…ƒç´  void rotate(List list, int distance)//æ—‹è½¬ã€‚å½“distanceä¸ºæ­£æ•°æ—¶ï¼Œå°†listådistanceä¸ªå…ƒç´ æ•´ä½“ç§»åˆ°å‰é¢ã€‚å½“distanceä¸ºè´Ÿæ•°æ—¶ï¼Œå°† listçš„å‰distanceä¸ªå…ƒç´ æ•´ä½“ç§»åˆ°åé¢ã€‚ æŸ¥æ‰¾,æ›¿æ¢æ“ä½œ int binarySearch(List list, Object key)//å¯¹Listè¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œè¿”å›ç´¢å¼•ï¼Œæ³¨æ„Listå¿…é¡»æ˜¯æœ‰åºçš„ int max(Collection coll)//æ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºï¼Œè¿”å›æœ€å¤§çš„å…ƒç´ ã€‚ ç±»æ¯”int min(Collection coll) int max(Collection coll, Comparator c)//æ ¹æ®å®šåˆ¶æ’åºï¼Œè¿”å›æœ€å¤§å…ƒç´ ï¼Œæ’åºè§„åˆ™ç”±Comparatatorç±»æ§åˆ¶ã€‚ç±»æ¯”int min(Collection coll, Comparator c) void fill(List list, Object obj)//ç”¨æŒ‡å®šçš„å…ƒç´ ä»£æ›¿æŒ‡å®šlistä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚ int frequency(Collection c, Object o)//ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•° int indexOfSubList(List list, List target)//ç»Ÿè®¡targetåœ¨listä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œæ‰¾ä¸åˆ°åˆ™è¿”å›-1ï¼Œç±»æ¯”int lastIndexOfSubList(List source, list target). boolean replaceAll(List list, Object oldVal, Object newVal), ç”¨æ–°å…ƒç´ æ›¿æ¢æ—§å…ƒç´  Stringï¼ŒStringBufferï¼ŒStringBuilderçš„åŒºåˆ«ä¸‹æ¥¼æ¢¯å›ç­”ï¼šåˆ†åˆ«ä» çº¿ç¨‹å®‰å…¨ â€‹ æ‰§è¡Œæ•ˆç‡ â€‹ å­˜å‚¨ç©ºé—´ â€‹ ä½¿ç”¨åœºæ™¯ çº¿ç¨‹å®‰å…¨æ€§ï¼š â€‹ çº¿ç¨‹å®‰å…¨ String ã€StringBuffer â€‹ éçº¿ç¨‹å®‰å…¨ StringBuilder æ‰§è¡Œæ•ˆç‡ï¼š StringBuilder &gt; StringBuffer &gt; String å­˜å‚¨ç©ºé—´ï¼š String çš„å€¼æ˜¯ä¸å¯å˜çš„ï¼Œæ¯æ¬¡å¯¹Stringçš„æ“ä½œéƒ½ä¼šç”Ÿæˆæ–°çš„Stringå¯¹è±¡ï¼Œ æ•ˆç‡ä½è€—è´¹å¤§é‡å†…å­˜ç©ºé—´ï¼Œä»è€Œå¼•èµ·GCã€‚ StringBufferå’ŒStringBuilderéƒ½æ˜¯å¯å˜ã€‚ ä½¿ç”¨åœºæ™¯ï¼š 1å¦‚æœè¦æ“ä½œå°‘é‡çš„æ•°æ®ç”¨ String 2.å•çº¿ç¨‹æ“ä½œå­—ç¬¦ä¸²ç¼“å†²åŒº ä¸‹æ“ä½œå¤§é‡æ•°æ® = StringBuilder 3.å¤šçº¿ç¨‹æ“ä½œå­—ç¬¦ä¸²ç¼“å†²åŒº ä¸‹æ“ä½œå¤§é‡æ•°æ® = StringBuffer HashMapçš„è€ƒå¯Ÿä¸‹æ¥¼æ¢¯å¤§æ³• å­˜å‚¨ç»“æ„ â€‹ é»˜è®¤å®¹é‡ â€‹ è£…è½½å› å­ â€‹ hashcode/equals â€‹ 1.7å’Œ1.8ç‰ˆæœ¬å˜åŒ– 1.å†…éƒ¨å­˜å‚¨ç»“æ„ï¼šæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼ˆJDK8ï¼‰ 2.é»˜è®¤å®¹é‡16ï¼Œé»˜è®¤è£…è½½å› å­0.75ã€‚ 3.keyå’Œvalueå¯¹æ•°æ®ç±»å‹çš„è¦æ±‚éƒ½æ˜¯æ³›å‹ã€‚ 4.keyå¯ä»¥ä¸ºnullï¼Œæ”¾åœ¨table[0]ä¸­ã€‚ 5.hashcodeï¼šè®¡ç®—é”®çš„hashcodeä½œä¸ºå­˜å‚¨é”®ä¿¡æ¯çš„æ•°ç»„ä¸‹æ ‡ç”¨äºæŸ¥æ‰¾é”®å¯¹è±¡çš„å­˜å‚¨ä½ç½®ã€‚equalsï¼šHashMapä½¿ç”¨equals()åˆ¤æ–­å½“å‰çš„é”®æ˜¯å¦ä¸è¡¨ä¸­å­˜åœ¨çš„é”®ç›¸åŒã€‚ ä¸ºä»€ä¹ˆè¦è®¾è®¡å‡ºè¿­ä»£å™¨ è¿­ä»£å™¨æœ¬è´¨æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œä¸ºäº†è§£å†³ä¸ºä¸åŒçš„é›†åˆç±»æä¾›ç»Ÿä¸€çš„éå†æ“ä½œæ¥å£ã€‚ javaå•æœºå¹¶å‘æ§åˆ¶1.åŒæ­¥æ–¹æ³•synchronized 2.åŒæ­¥å—synchronized 3 å¯é‡å…¥é” ReentrantLock ï¼ŒæŒ‡çš„æ˜¯ä»¥çº¿ç¨‹ä¸ºå•ä½ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è·å–å¯¹è±¡é”ä¹‹åï¼Œè¿™ä¸ªçº¿ç¨‹å¯ä»¥å†æ¬¡è·å–æœ¬å¯¹è±¡ä¸Šçš„é”ï¼Œè€Œå…¶ä»–çš„çº¿ç¨‹æ˜¯ä¸å¯ä»¥çš„ã€‚ å¤šçº¿ç¨‹åˆ›å»ºçš„æ–¹å¼1ã€ç»§æ‰¿Threadç±»åˆ›å»ºçº¿ç¨‹ 2ã€å®ç°Runnableæ¥å£åˆ›å»ºçº¿ç¨‹ 3ã€å®ç°Callableæ¥å£é€šè¿‡FutureTaskåŒ…è£…å™¨æ¥åˆ›å»ºThreadçº¿ç¨‹ 4ã€ä½¿ç”¨ExecutorServiceã€Callableã€Futureå®ç°æœ‰è¿”å›ç»“æœçš„çº¿ç¨‹ ä¸€èˆ¬è¯´å‡ºè¿™3ç§ï¼Œå¹¶æŠŠåŒºåˆ«è¯´ä¸‹å³å¯ Thread â€‹ Runnable â€‹ Callable (1)Callableè§„å®šçš„æ–¹æ³•æ˜¯call(),Runnableè§„å®šçš„æ–¹æ³•æ˜¯run().(2)Callableçš„ä»»åŠ¡æ‰§è¡Œåå¯è¿”å›å€¼ï¼Œè€ŒRunnableçš„ä»»åŠ¡æ˜¯ä¸èƒ½è¿”å›å€¼å¾—(3)callæ–¹æ³•å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œrunæ–¹æ³•ä¸å¯ä»¥(4)è¿è¡ŒCallableä»»åŠ¡å¯ä»¥æ‹¿åˆ°ä¸€ä¸ªFutureå¯¹è±¡ï¼Œè¡¨ç¤ºå¼‚æ­¥è®¡ç®—çš„ç»“æœã€‚å®ƒæä¾›äº†æ£€æŸ¥è®¡ç®—æ˜¯å¦å®Œæˆçš„æ–¹æ³•ï¼Œä»¥ç­‰å¾…è®¡ç®—çš„å®Œæˆï¼Œå¹¶æ£€ç´¢è®¡ç®—çš„ç»“æœã€‚é€šè¿‡Futureå¯¹è±¡å¯ä»¥äº†è§£ä»»åŠ¡æ‰§è¡Œæƒ…å†µï¼Œå¯å–æ¶ˆä»»åŠ¡çš„æ‰§è¡Œï¼Œè¿˜å¯è·å–æ‰§è¡Œç»“æœã€‚ æ€ä¹ˆé˜²æ­¢å‰ç«¯é‡å¤æäº¤ï¼Ÿ æäº¤æŒ‰é’®åå±è”½æäº¤æŒ‰é’®(å‰ç«¯jsæ§åˆ¶) å‰ç«¯ç”Ÿäº§å”¯ä¸€idï¼Œåç«¯é€šè¿‡å”¯ä¸€ç´¢å¼•ï¼ˆç®€å•ç²—æš´ï¼Œæˆ‘å–œæ¬¢ï¼‰ åˆ©ç”¨Sessioné˜²æ­¢è¡¨å•é‡å¤æäº¤ æ¨è æ–¹æ³•1+æ–¹æ¡ˆ2 ç»„åˆå¥—é¤ä¸‡æ— ä¸€å¤± SpringAOPçš„åŸç†springå®ç°AOPçš„æ€è·¯å¾ˆç®€å•ï¼Œ é€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†æ–¹å¼å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ ä¸»è¦åŠŸèƒ½ï¼šæ—¥å¿—è®°å½•ã€æ€§èƒ½ç»Ÿè®¡ã€å®‰å…¨æ§åˆ¶ã€äº‹åŠ¡å¤„ç†ã€å¼‚å¸¸å¤„ç†ç­‰ç­‰ AOPå®ç°æ–¹å¼ é¢„ç¼–è¯‘ï¼šAspectJ è¿è¡ŒæœŸåŠ¨æ€ä»£ç†ï¼ˆJDKåŠ¨æ€ä»£ç†ã€CGLibåŠ¨æ€ä»£ç†ï¼‰ï¼šSpringAOPã€JbossAOP AOPå‡ ä¸ªç›¸å…³æ¦‚å¿µ é¢å‘åˆ‡é¢çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ï¼Œè®©æ ¸å¿ƒçš„ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œä¸éœ€è¦å»ç®¡ç†ä¸€äº›é€šç”¨çš„é€»è¾‘ï¼Œæ¯”å¦‚è¯´äº‹åŠ¡ï¼Œå®‰å…¨ç­‰è¿™æ–¹é¢çš„å…±åŒé€»è¾‘,è§£è€¦ä¸šåŠ¡é€»è¾‘å’Œé€šç”¨é€»è¾‘ å»ºè®®æŠŠ ç†è®º+å®é™…åº”ç”¨æ–¹å¼ å‘Šè¯‰é¢è¯•å®˜ï¼Œè™½ç„¶ä½ å¯èƒ½æ²¡å¼€å‘è¿‡ä½†ä½ ä¸€å®šè¦æŠŠæ ¸å¿ƒæ¦‚å¿µæ€æƒ³è¡¨è¾¾å‡ºæ¥ æ‰¹é‡å¾€mysqlå¯¼å…¥1000ä¸‡æ•°æ®æœ‰ä»€ä¹ˆæ–¹æ³•ï¼Ÿå‡å°‘IOæ¬¡æ•° â€‹ SQLå†™æ³•ä¼˜åŒ– â€‹ åˆç†è®¾ç½®æ‰¹é‡å¤§å° â€‹ å°½é‡é¡ºåºæ’å…¥ ä¸€æ¡SQLè¯­å¥æ’å…¥å¤šæ¡æ•°æ® åœ¨äº‹åŠ¡ä¸­è¿›è¡Œæ’å…¥å¤„ç†ï¼Œåˆ‡è®°ä¸è¦1æ¡æ•°æ®æäº¤ä¸€ä¸‹ï¼Œè‚¯å®šè¦åˆ†æ‰¹å¤„ç† æ•°æ®æœ‰åºæ’å…¥ï¼Œæ˜¯ä¸ºäº†å‡å°‘ç´¢å¼•çš„ç»´æŠ¤å‹åŠ› æ‰¹é‡æ’å…¥SQLä¾‹å­ï¼ŒIbatisçš„å°demo &lt;!-- æ‰¹é‡æ’å…¥æµé‡æ¨¡å— --&gt; &lt;insert id=&quot;XXX_è¡¨-BATCH-INSERT&quot; parameterClass=&quot;java.util.List&quot;&gt; INSERT INTO XXX_è¡¨(gmt_create,gmt_modified,å­—æ®µA,å­—æ®µB,å­—æ®µC) VALUES &lt;iterate conjunction=&quot;,&quot;&gt; &lt;![CDATA[ (NOW(),NOW(),#vals[].å­—æ®µA#,#vals[].å­—æ®µB#,#vals[].å­—æ®µC#) ]]&gt; &lt;/iterate&gt; &lt;/insert&gt; äº‹åŠ¡ START TRANSACTION; INSERT INTO XXX_è¡¨(gmt_create,gmt_modified,å­—æ®µA,å­—æ®µB,å­—æ®µC) VALUES (NOW(),NOW(),#vals[].å­—æ®µA#,#å­—æ®µB[].å­—æ®µC#) ... COMMIT; æ€»ç»“ â€‹ åˆå¹¶æ•°æ®+äº‹åŠ¡+æœ‰åºæ•°æ®çš„ä¼˜åŒ–æ’å…¥æ–¹å¼ â€‹ æ³¨æ„SQLæ‰¹é‡æ’å…¥çš„å¤§å°å¿…é¡»åˆç† â€‹ äº‹åŠ¡æ‰§è¡Œæ—¶é—´ä¸è¦å¤ªé•¿äº† â€‹ å®é™…å¼€å‘æ—¶éœ€è¦åˆç†è®¾ç½®MYSQLç›¸åº”é…ç½®å‚æ•°ï¼Œå¢åŠ ç¼“å­˜æˆ–å‡å°‘ä¸å¿…è¦æ—¥å¿—ç£ç›˜è¯»å†™ é¡¹ç›®ä¸­æ—¥å¿—æ¡†æ¶ï¼Œæ—¥å¿—å…·ä½“æ€ä¹ˆé…ç½® Loggers è®°å½•å™¨ ï¼ˆæ—¥å¿—æ–‡ä»¶åŸºæœ¬é…ç½®ï¼‰ | Appenders é™„åŠ å™¨ ï¼ˆæ—¥å¿—æ–‡ä»¶å»å“ªé‡Œï¼‰ â€‹ | â€‹ Layouts å¸ƒå±€å™¨ï¼ˆæ—¥å¿—æ–‡ä»¶è¾“å‡ºå…·ä½“æ ¼å¼ï¼‰ ä¸‰å¤§ç»„ä»¶æˆå°±äº†log4j è¿™é‡Œå¯ç®€å•ç†è§£ä¸ºæ—¥å¿—ç±»åˆ«ï¼Œæ—¥å¿—è¦è¾“å‡ºçš„åœ°æ–¹å’Œæ—¥å¿—ä»¥ä½•ç§å½¢å¼è¾“å‡º å¦‚æœæ˜¯log4j.xml æ ¸å¿ƒæ ‡ç­¾ log4j root â€‹ logger â€‹ level æ—¥å¿—çº§åˆ« appender æ—¥å¿—æ–‡ä»¶è¾“å‡ºåœ°â€‹ layout è¾“å‡ºå…·ä½“æ ¼å¼ appender ä¸€èˆ¬ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶å°±å¯¹åº”ä¸€ä¸ªï¼Œä¾èµ–layout fileã€appendã€ encoding logger ä¸€èˆ¬ä»£ç æ¨¡å—ç±»è·¯å¾„ä¸€ä¸€å¯¹åº”ï¼Œå¦‚ com.ç¨‹åºæ±ªå…¬å¸.ç³»ç»Ÿ.æ¨¡å—å ï¼Œä¾èµ–level appenderlevel æ—¥å¿—çº§åˆ« root é»˜è®¤æ—¥å¿—ï¼Œä¾èµ–level appender â€”â€”â€”-log4jé¢è¯•åœºæ™¯å›é¡¾â€”â€”â€”- é¢è¯•å®˜ï¼šç¨‹åºæ±ªæ—¥å¿—çº§åˆ«æ€ä¹ˆé…ç½® æ±ªï¼šLoggers ç»„ä»¶ â€¦â€¦ é¢è¯•å®˜ï¼šç¨‹åºæ±ªæ—¥å¿—è¾“å‡ºä½ç½®æ€ä¹ˆé…ç½®ï¼Œæ—¥å¿—æ–‡ä»¶æ˜¯æŒ‰å¤©ç”Ÿæˆçš„è¿˜æ˜¯ä»€ä¹ˆè§„åˆ™ æ±ªï¼šAppenders ç»„ä»¶ â€¦â€¦DailyRollingFileAppender â€¦â€¦ é¢è¯•å®˜ï¼šç¨‹åºæ±ªæ—¥å¿—çš„è¾“å‡ºæ ¼å¼æ€ä¹ˆé…ç½® æ±ªï¼šLayouts ç»„ä»¶ â€¦â€¦PatternLayout â€¦â€¦ å…·ä½“èŠä¸‹é…ç½®ä¿¡æ¯å§ 1ã€é…ç½®æ ¹Loggerï¼šlog4j.rootLogger = [ level ] , appenderName1é™„åŠ å™¨, appenderName2é™„åŠ å™¨, â€¦ Loggersç»„ä»¶åœ¨æ­¤ç³»ç»Ÿä¸­è¢«åˆ†ä¸ºäº”ä¸ªçº§åˆ«ï¼šDEBUGã€INFOã€WARNã€ERRORå’ŒFATALã€‚è¿™äº”ä¸ªçº§åˆ«æ˜¯æœ‰é¡ºåºçš„ï¼ŒDEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATAL ä¼ä¸šé¡¹ç›®ç”Ÿäº§ç¯å¢ƒä¸€èˆ¬éƒ½æ˜¯è®¾ç½®INFO çº§åˆ« Appenders é™„åŠ å™¨ ï¼ˆæ—¥å¿—æ–‡ä»¶å»å“ªé‡Œï¼‰ 2ã€é…ç½®æ—¥å¿—ä¿¡æ¯è¾“å‡ºç›®çš„åœ°ï¼ˆappenderï¼‰ï¼š log4j.appender.appenderName = className appenderNameï¼šè‡ªå®šä¹‰appderNameï¼Œåœ¨log4j.rootLoggerè®¾ç½®ä¸­ä½¿ç”¨ï¼› classNameï¼šå¯è®¾å€¼å¦‚ä¸‹ï¼š (1)org.apache.log4j.ConsoleAppenderï¼ˆæ§åˆ¶å°ï¼‰ (2)org.apache.log4j.FileAppenderï¼ˆæ–‡ä»¶ï¼‰ (3)org.apache.log4j.DailyRollingFileAppenderï¼ˆæ¯å¤©äº§ç”Ÿä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼‰ (4)org.apache.log4j.RollingFileAppenderï¼ˆæ–‡ä»¶å¤§å°åˆ°è¾¾æŒ‡å®šå°ºå¯¸çš„æ—¶å€™äº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼‰ #æŒ‰DatePatternè¾“å‡ºåˆ°æ–‡ä»¶ log4j.appender.logDailyFile = org.apache.log4j.DailyRollingFileAppender log4j.appender.logDailyFile.layout = org.apache.log4j.PatternLayout log4j.appender.logDailyFile.layout.ConversionPattern = [%-5p][%-22d{yyyy/MM/dd HH:mm:ssS}][%l]%n%m%n log4j.appender.logDailyFile.Threshold = DEBUG log4j.appender.logDailyFile.ImmediateFlush = TRUE log4j.appender.logDailyFile.Append = TRUE log4j.appender.logDailyFile.File = ../Struts2/WebRoot/log/DailyFile/log4j_Struts log4j.appender.logDailyFile.DatePattern = &#39;.&#39;yyyy-MM-dd-HH-mm&#39;.log&#39; log4j.appender.logDailyFile.Encoding = UTF-83ã€é…ç½®æ—¥å¿—ä¿¡æ¯çš„è¾“å‡ºæ ¼å¼ï¼ˆLayoutï¼‰ï¼š log4j.appender.appenderName.layout=className classNameï¼šå¯è®¾å€¼å¦‚ä¸‹ï¼š (org.apache.log4j.PatternLayoutï¼ˆå¯ä»¥çµæ´»åœ°æŒ‡å®šå¸ƒå±€æ¨¡å¼ï¼Œä¼ä¸šé¡¹ç›®ä¸­ä¸€èˆ¬éƒ½æ˜¯è‡ªå·±å®šä¹‰æ ¼å¼ï¼‰ PatternLayouté€‰é¡¹ï¼š ConversionPattern=%m%nï¼šè®¾å®šä»¥æ€æ ·çš„æ ¼å¼æ˜¾ç¤ºæ¶ˆæ¯ã€‚ é…ç½®æ–‡ä»¶ log4j.properties log4j.xml ï¼ˆæˆ‘å…¬å¸å°±æ˜¯é…ç½®è¿™ä¸ªæ¨¡å¼ï¼‰ log4j.xmlæ ¼å¼ æˆ‘æŠŠå…³é”®è¯æå–å‡ºæ¥ log4j appender è¾“å‡ºé…ç½® layout å¸ƒå±€","categories":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"mumudadi.top/categories/%E9%9D%A2%E8%AF%95/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"mumudadi.top/tags/%E9%9D%A2%E8%AF%95/"}],"keywords":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"mumudadi.top/categories/%E9%9D%A2%E8%AF%95/"}]},{"title":"if-elseå„ªåŒ–","slug":"if-else","date":"2020-01-07T09:16:01.000Z","updated":"2020-02-04T14:40:33.591Z","comments":true,"path":"2020/01/07/if-else/","link":"","permalink":"mumudadi.top/2020/01/07/if-else/","excerpt":"","text":"â€‹ åœ¨å¼€å‘ä¸­æˆ‘ä»¬ç»å¸¸ä¼šç¢°åˆ°æœ‰äº›åœºæ™¯ï¼Œéœ€è¦æ ¹æ®æŸä¸ªå­—æ®µçš„ä¸åŒå«ä¹‰ï¼Œå»æ‰§è¡Œä¸åŒçš„é€»è¾‘æ“ä½œï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šå€¾å‘äºä½¿ç”¨if/elseæˆ–è€…switch/caseçš„æ–¹å¼ï¼Œä½†å½“å­—æ®µçš„å«ä¹‰ä¸æ–­å¢åŠ ï¼Œæˆ–è€…å„ç§å«ä¹‰æƒ…å†µéƒ½éœ€è¦æ‰§è¡Œéå¸¸å¤šé€»è¾‘çš„æ—¶å€™ï¼Œä½¿ç”¨if/else/switchä¼šä½¿ä»£ç ä¸æ˜“ç»´æŠ¤ï¼Œä¸”å¯è¯»æ€§å·®ã€‚é‚£ä¹ˆï¼Œä½¿ç”¨æšä¸¾ï¼Œå°†æ˜¯ä¸€ç§éå¸¸å¥½çš„æ”¹å–„æ–¹å¼ã€‚ â€‹ ä¸¾ä¾‹ï¼šå½“ä¸åŒè§’è‰²å»å®¡æ‰¹å‘˜å·¥è¯·å‡å•æ—¶ï¼Œæ‰§è¡Œçš„é€»è¾‘æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ¯”å¦‚ç›´å±å°ç»„é•¿éœ€è¦ç¡®è®¤å‘˜å·¥çš„å·¥ä½œè¿›åº¦æ˜¯å¦æ­£å¸¸ï¼Œå·¥ä½œäº¤æ¥æ˜¯å¦æ­£å¸¸ï¼Œè€Œå›¢é˜Ÿè´Ÿè´£äººè¦ç¡®è®¤æ€»é¡¹ç›®è¿›åº¦æ˜¯å¦æœ‰å½±å“ç­‰ç­‰ã€‚å¦‚æœä½¿ç”¨if/elseçš„æ–¹å¼ï¼Œæˆ‘ä»¬çš„ä»£ç ä¼šæ˜¯å¦‚ä¸‹è¿™æ ·ï¼š public void judge(Long applyId, String role){ if (role.equals(&quot;leader&quot;)) { //leader doing } else if (role.equals(&quot;service owner&quot;)) { //service owner doing } else if (role.equals(&quot;project manager&quot;)) { //project manager doing } else if (role.equals(&quot;supervisor&quot;)) { //supervisor doing }â€‹ åç»­å¦‚æœå†å¢åŠ äººç‰©è§’è‰²ï¼Œä¼šä¸æ–­å¢å¤šif/elseï¼Œæœ‰ä»£ç æ´ç™–çš„ä¼šå¾ˆéš¾å—ã€‚ã€‚ä¸€æ—¦è§’è‰²æ•°é‡è¾¾åˆ°å‡ åçš„æ—¶å€™ï¼Œçœ‹ä»£ç ä¼°è®¡è¦ç–¯ã€‚ã€‚éå¸¸ä¸åˆ©äºæ‰©å±•å’Œç»´æŠ¤ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨javaæšä¸¾çš„æ–¹å¼æ”¹é€ ä¸€ä¸‹ã€‚é¦–å…ˆå®šä¹‰ä¸€ä¸ªå…¬ç”¨æ¥å£ï¼š public interface RoleService { //å®¡æ‰¹æ“ä½œï¼Œåç»­å¢åŠ å…¶ä»–æ“ä½œåªéœ€è¦å†æ–°å»ºæ–¹æ³• void approve(); } â€‹ æ¥ä¸‹æ¥æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªä¸åŒè§’è‰²æ‰§è¡Œä¸åŒé€»è¾‘çš„æšä¸¾ç±» RoleServiceEnumæ¥å®ç°æ¥å£ï¼Œå°†ä¸åŒè§’è‰²çš„é€»è¾‘å…¨éƒ¨äº¤ç”±è¿™ä¸ªæšä¸¾ç±»æ¥åšï¼š public enum RoleServiceEnum implements RoleService { ROLE_LEADER(){ @Override public void approve() { System.out.println(&quot;leader doing sth&quot;); } }, ROLE_SERVICE_OWNER(){ @Override public void approve() { System.out.println(&quot;so doing sth&quot;); } }, ROLE_PROJECT_MANAGER(){ @Override public void approve() { System.out.println(&quot;pm doing sth&quot;); } }, ROLE_SUPERVISOR(){ @Override public void approve() { System.out.println(&quot;supervisor doing sth&quot;); } }; æ¥ä¸‹æ¥æˆ‘ä»¬å†è°ƒç”¨è¿™ä¸ªæšä¸¾ç±»ï¼Œæ‰§è¡Œä¸åŒè§’è‰²å®¡æ‰¹è¯·å‡å•çš„é€»è¾‘ï¼Œä¸€è¡Œä»£ç å°±è¡Œäº†ï¼š public void judge(String role){ RoleServiceEnum.valueOf(role).approve(); }ä½¿ç”¨å·¥å‚æ¨¡å¼ï¼šâ€‹ ä¸åŒåˆ†æ”¯åšä¸åŒçš„äº‹æƒ…ï¼Œå¾ˆæ˜æ˜¾å°±æä¾›äº†ä½¿ç”¨å·¥å‚æ¨¡å¼çš„å¥‘æœºï¼Œæˆ‘ä»¬åªéœ€è¦å°†ä¸åŒæƒ…å†µå•ç‹¬å®šä¹‰å¥½ï¼Œç„¶åå»å·¥å‚ç±»é‡Œé¢èšåˆå³å¯ã€‚ â€‹ é¦–å…ˆï¼Œé’ˆå¯¹ä¸åŒçš„è§’è‰²ï¼Œå•ç‹¬å®šä¹‰å…¶ä¸šåŠ¡ç±»: public class RootAdminRole implements Roleoperation { private String roleName; public RootAdminRole(String roleName) { this.roleName = roleName; } @Override public String op() { return roleName+&quot;ç³»ç»Ÿç®¡ç†å‘˜æ“ä½œæƒé™&quot;; } }public class OrderAdminRole implements Roleoperation { private String roleName; public OrderAdminRole(String roleName) { this.roleName = roleName; } @Override public String op() { return roleName+&quot;è®¢å•ç®¡ç†å‘˜æ“ä½œæƒé™&quot;; } }public class NormalRole implements Roleoperation { private String roleName; public NormalRole(String roleName) { this.roleName = roleName; } @Override public String op() { return roleName+&quot;æ™®é€šç”¨æˆ·æ“ä½œæƒé™&quot;; } }æ¥ä¸‹æ¥å†å†™ä¸€ä¸ªå·¥å‚ç±»RoleFactoryå¯¹ä¸Šé¢ä¸åŒè§’è‰²è¿›è¡Œèšåˆï¼š public class RoleFactory { static Map&lt;String,Roleoperation&gt; roleoperationMap = new HashMap&lt;&gt;(); static { roleoperationMap.put(&quot;ROOT_ADMIN&quot;,new RootAdminRole(&quot;ROOT_ADMIN&quot;)); roleoperationMap.put(&quot;ORDER_ADMIN&quot;,new RootAdminRole(&quot;ORDER_ADMIN&quot;)); roleoperationMap.put(&quot;NORMAL&quot;,new RootAdminRole(&quot;NORMAL&quot;)); } public static Roleoperation getOp(String roleName){ return roleoperationMap.get(roleName); } æ¥ä¸‹æ¥å€ŸåŠ©ä¸Šé¢è¿™ä¸ªå·¥å‚ï¼Œä¸šåŠ¡ä»£ç è°ƒç”¨ä¹Ÿåªéœ€è¦ä¸€è¡Œä»£ç ï¼Œif/elseåŒæ ·è¢«æ¶ˆé™¤äº† RoleFactory.getOp(&quot;ROOT_ADMIN&quot;).op()è¿™æ ·çš„è¯ä»¥åæƒ³æ‰©å±•æ¡ä»¶ä¹Ÿå¾ˆå®¹æ˜“ï¼Œåªéœ€è¦å¢åŠ æ–°ä»£ç ï¼Œè€Œä¸éœ€è¦åŠ¨ä»¥å‰çš„ä¸šåŠ¡ä»£ç ï¼Œéå¸¸ç¬¦åˆâ€œå¼€é—­åŸåˆ™â€ã€‚","categories":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"mumudadi.top/categories/%E9%9D%A2%E8%AF%95/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"mumudadi.top/tags/%E9%9D%A2%E8%AF%95/"}],"keywords":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"mumudadi.top/categories/%E9%9D%A2%E8%AF%95/"}]},{"title":"spring boot æ¥å£éŸ¿æ‡‰jsonæ•¸æ“šæ ¼å¼å°è£","slug":"AjaxResult","date":"2020-01-05T09:16:01.000Z","updated":"2020-02-04T14:40:56.186Z","comments":true,"path":"2020/01/05/AjaxResult/","link":"","permalink":"mumudadi.top/2020/01/05/AjaxResult/","excerpt":"","text":"ç¾åœ¨å¾ˆå¤šé …ç›®éƒ½æ˜¯ç”¨å‰å¾Œç«¯åˆ†é›¢çš„å½¢å¼ä¾†å¯«æ¥å£ï¼Œå°æ–¼æ•¸æ“šè¿”å›çš„è¦å‰‡ä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„ã€‚ åœ¨å¯¦éš›é–‹ç™¼ç•¶ä¸­æˆ‘å€‘æ™‚å¸¸è¦æŠŠå¯¦é«”å°è±¡ä»¥jsonæ•¸æ“šçš„æ ¼å¼éŸ¿æ‡‰ï¼Œé€™å°±è¦ä½¿ç”¨åˆ°ä¸€äº›è½‰æ›jsonå·¥å…·é¡ï¼Œåœ¨controllerå±¤ä¹Ÿå¸¸ç”¨@ResponseBodyæ³¨è§£å¯¦ç¾ã€‚ä»¥Ajaxè«‹æ±‚éŸ¿æ‡‰jsonæ•¸æ“šçˆ²ä¾‹é€²è¡Œå°è£ï¼šéœ€è¦æœ‰ç›¸æ‡‰ ç‹€æ…‹ç¢¼codeã€æ¶ˆæ¯msgã€æ•¸æ“šdata public class AjaxResult extends HashMap&lt;String, Object&gt; { private static final long serialVersionUID = 1L; public static final String CODE_TAG = &quot;code&quot;; public static final String MSG_TAG = &quot;msg&quot;; public static final String DATA_TAG = &quot;data&quot;; /** * çŠ¶æ€ç±»å‹ */ public enum Type { /** æˆåŠŸ */ SUCCESS(0), /** è­¦å‘Š */ WARN(301), /** é”™è¯¯ */ ERROR(500); private final int value; Type(int value) { this.value = value; } public int value() { return this.value; } } /** * åˆå§‹åŒ–ä¸€ä¸ªæ–°åˆ›å»ºçš„ AjaxResult å¯¹è±¡ï¼Œä½¿å…¶è¡¨ç¤ºä¸€ä¸ªç©ºæ¶ˆæ¯ã€‚ */ public AjaxResult() { } /** * åˆå§‹åŒ–ä¸€ä¸ªæ–°åˆ›å»ºçš„ AjaxResult å¯¹è±¡ * * @param type çŠ¶æ€ç±»å‹ * @param msg è¿”å›å†…å®¹ */ public AjaxResult(Type type, String msg) { super.put(CODE_TAG, type.value); super.put(MSG_TAG, msg); } /** * åˆå§‹åŒ–ä¸€ä¸ªæ–°åˆ›å»ºçš„ AjaxResult å¯¹è±¡ * * @param type çŠ¶æ€ç±»å‹ * @param msg è¿”å›å†…å®¹ * @param data æ•°æ®å¯¹è±¡ */ public AjaxResult(Type type, String msg, Object data) { super.put(CODE_TAG, type.value); super.put(MSG_TAG, msg); if (StringUtils.isNotNull(data)) { super.put(DATA_TAG, data); } } /** * è¿”å›æˆåŠŸæ¶ˆæ¯ * * @return æˆåŠŸæ¶ˆæ¯ */ public static AjaxResult success() { return AjaxResult.success(&quot;æ“ä½œæˆåŠŸ&quot;); } /** * è¿”å›æˆåŠŸæ•°æ® * * @return æˆåŠŸæ¶ˆæ¯ */ public static AjaxResult success(Object data) { return AjaxResult.success(&quot;æ“ä½œæˆåŠŸ&quot;, data); } /** * è¿”å›æˆåŠŸæ¶ˆæ¯ * * @param msg è¿”å›å†…å®¹ * @return æˆåŠŸæ¶ˆæ¯ */ public static AjaxResult success(String msg) { return AjaxResult.success(msg, null); } /** * è¿”å›æˆåŠŸæ¶ˆæ¯ * * @param msg è¿”å›å†…å®¹ * @param data æ•°æ®å¯¹è±¡ * @return æˆåŠŸæ¶ˆæ¯ */ public static AjaxResult success(String msg, Object data) { return new AjaxResult(Type.SUCCESS, msg, data); } /** * è¿”å›è­¦å‘Šæ¶ˆæ¯ * * @param msg è¿”å›å†…å®¹ * @return è­¦å‘Šæ¶ˆæ¯ */ public static AjaxResult warn(String msg) { return AjaxResult.warn(msg, null); } /** * è¿”å›è­¦å‘Šæ¶ˆæ¯ * * @param msg è¿”å›å†…å®¹ * @param data æ•°æ®å¯¹è±¡ * @return è­¦å‘Šæ¶ˆæ¯ */ public static AjaxResult warn(String msg, Object data) { return new AjaxResult(Type.WARN, msg, data); } /** * è¿”å›é”™è¯¯æ¶ˆæ¯ * * @return */ public static AjaxResult error() { return AjaxResult.error(&quot;æ“ä½œå¤±è´¥&quot;); } /** * è¿”å›é”™è¯¯æ¶ˆæ¯ * * @param msg è¿”å›å†…å®¹ * @return è­¦å‘Šæ¶ˆæ¯ */ public static AjaxResult error(String msg) { return AjaxResult.error(msg, null); } /** * è¿”å›é”™è¯¯æ¶ˆæ¯ * * @param msg è¿”å›å†…å®¹ * @param data æ•°æ®å¯¹è±¡ * @return è­¦å‘Šæ¶ˆæ¯ */ public static AjaxResult error(String msg, Object data) { return new AjaxResult(Type.ERROR, msg, data); } } controllerå±¤èª¿ç”¨ æ³¨æ„åŠ ä¸Šæ³¨è§£@ResponseBody @PostMapping(&quot;/login&quot;) @ResponseBody public AjaxResult ajaxLogin(String username, String password, Boolean rememberMe) { UsernamePasswordToken token = new UsernamePasswordToken(username, password, rememberMe); Subject subject = SecurityUtils.getSubject(); try { subject.login(token); return AjaxResult.success(); } catch (AuthenticationException e) { String msg = &quot;ç”¨æˆ·æˆ–å¯†ç é”™è¯¯&quot;; if (StringUtils.isNotEmpty(e.getMessage())) { msg = e.getMessage(); } return AjaxResult.error(msg); } }éŸ¿æ‡‰json {&quot;msg&quot;:&quot;æ“ä½œæˆåŠŸ&quot;,&quot;code&quot;:0}é‡å°ä¸€äº›ç‰¹æ®Šçµ„ä»¶éœ€è¦çš„æ•¸æ“šæ ¼å¼å¯è‡ªå®šç¾©æ•¸æ“šå°è±¡ï¼Œä¾‹å¦‚è¡¨æ ¼åˆ†é æ•¸æ“šï¼Œéœ€è¦æœ‰totalç¸‚è¨˜éŒ„æ•¸ public class TableDataInfo implements Serializable { private static final long serialVersionUID = 1L; /** æ€»è®°å½•æ•° */ private long total; /** åˆ—è¡¨æ•°æ® */ private List&lt;?&gt; rows; /** æ¶ˆæ¯çŠ¶æ€ç  */ private int code; /** æ¶ˆæ¯å†…å®¹ */ private int msg; /** * è¡¨æ ¼æ•°æ®å¯¹è±¡ */ public TableDataInfo() { } /** * åˆ†é¡µ * * @param list åˆ—è¡¨æ•°æ® * @param total æ€»è®°å½•æ•° */ public TableDataInfo(List&lt;?&gt; list, int total) { this.rows = list; this.total = total; } ã€‚ã€‚ã€‚ã€‚ã€‚æ­¤è™•çœç•¥get,setæ–¹æ³•","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"spring boot","slug":"spring-boot","permalink":"mumudadi.top/tags/spring-boot/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"é˜¿å¸•å¥‡poiå°å…¥å°å‡ºExcel","slug":"Excel","date":"2020-01-05T09:16:01.000Z","updated":"2020-02-04T14:40:21.912Z","comments":true,"path":"2020/01/05/Excel/","link":"","permalink":"mumudadi.top/2020/01/05/Excel/","excerpt":"","text":"å°å…¥ä¾è³´ï¼š&lt;!-- excelå·¥å…· --&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.poi&lt;/groupId&gt; &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt; &lt;version&gt;${poi.version}&lt;/version&gt; &lt;/dependency&gt;åœ¨å®ä½“å˜é‡ä¸Šæ·»åŠ @Excelæ³¨è§£@Excel(name = &quot;ç”¨æˆ·åºå·&quot;, prompt = &quot;ç”¨æˆ·ç¼–å·&quot;) private Long userId; @Excel(name = &quot;ç”¨æˆ·åç§°&quot;) private String userName; @Excel(name = &quot;ç”¨æˆ·æ€§åˆ«&quot;, readConverterExp = &quot;0=ç”·,1=å¥³,2=æœªçŸ¥&quot;) private String sex; @Excel(name = &quot;æœ€åç™»é™†æ—¶é—´&quot;, width = 30, dateFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;) private Date loginDate;æ’°å¯«å·¥å…·é¡ï¼špublic class ExcelUtil&lt;T&gt; { ã€‚ã€‚ã€‚ã€‚ã€‚çœç•¥Nè¡Œä»£ç¢¼ /** * å¯¹excelè¡¨å•æŒ‡å®šè¡¨æ ¼ç´¢å¼•åè½¬æ¢æˆlist * * @param sheetName è¡¨æ ¼ç´¢å¼•å * @param is è¾“å…¥æµ * @return è½¬æ¢åé›†åˆ */ public List&lt;T&gt; importExcel(String sheetName, InputStream is) throws Exception { this.type = Type.IMPORT; this.wb = WorkbookFactory.create(is); List&lt;T&gt; list = new ArrayList&lt;T&gt;(); Sheet sheet = null; if (StringUtils.isNotEmpty(sheetName)) { // å¦‚æœæŒ‡å®šsheetå,åˆ™å–æŒ‡å®šsheetä¸­çš„å†…å®¹. sheet = wb.getSheet(sheetName); } else { // å¦‚æœä¼ å…¥çš„sheetåä¸å­˜åœ¨åˆ™é»˜è®¤æŒ‡å‘ç¬¬1ä¸ªsheet. sheet = wb.getSheetAt(0); } if (sheet == null) { throw new IOException(&quot;æ–‡ä»¶sheetä¸å­˜åœ¨&quot;); } int rows = sheet.getPhysicalNumberOfRows(); if (rows &gt; 0) { // å®šä¹‰ä¸€ä¸ªmapç”¨äºå­˜æ”¾excelåˆ—çš„åºå·å’Œfield. Map&lt;String, Integer&gt; cellMap = new HashMap&lt;String, Integer&gt;(); // è·å–è¡¨å¤´ Row heard = sheet.getRow(0); for (int i = 0; i &lt; heard.getPhysicalNumberOfCells(); i++) { Cell cell = heard.getCell(i); if (StringUtils.isNotNull(cell != null)) { String value = this.getCellValue(heard, i).toString(); cellMap.put(value, i); } else { cellMap.put(null, i); } } // æœ‰æ•°æ®æ—¶æ‰å¤„ç† å¾—åˆ°ç±»çš„æ‰€æœ‰field. Field[] allFields = clazz.getDeclaredFields(); // å®šä¹‰ä¸€ä¸ªmapç”¨äºå­˜æ”¾åˆ—çš„åºå·å’Œfield. Map&lt;Integer, Field&gt; fieldsMap = new HashMap&lt;Integer, Field&gt;(); for (int col = 0; col &lt; allFields.length; col++) { Field field = allFields[col]; Excel attr = field.getAnnotation(Excel.class); if (attr != null &amp;&amp; (attr.type() == Type.ALL || attr.type() == type)) { // è®¾ç½®ç±»çš„ç§æœ‰å­—æ®µå±æ€§å¯è®¿é—®. field.setAccessible(true); Integer column = cellMap.get(attr.name()); fieldsMap.put(column, field); } } for (int i = 1; i &lt; rows; i++) { // ä»ç¬¬2è¡Œå¼€å§‹å–æ•°æ®,é»˜è®¤ç¬¬ä¸€è¡Œæ˜¯è¡¨å¤´. Row row = sheet.getRow(i); T entity = null; for (Map.Entry&lt;Integer, Field&gt; entry : fieldsMap.entrySet()) { Object val = this.getCellValue(row, entry.getKey()); // å¦‚æœä¸å­˜åœ¨å®ä¾‹åˆ™æ–°å»º. entity = (entity == null ? clazz.newInstance() : entity); // ä»mapä¸­å¾—åˆ°å¯¹åº”åˆ—çš„field. Field field = fieldsMap.get(entry.getKey()); // å–å¾—ç±»å‹,å¹¶æ ¹æ®å¯¹è±¡ç±»å‹è®¾ç½®å€¼. Class&lt;?&gt; fieldType = field.getType(); if (String.class == fieldType) { String s = Convert.toStr(val); if (StringUtils.endsWith(s, &quot;.0&quot;)) { val = StringUtils.substringBefore(s, &quot;.0&quot;); } else { String dateFormat = field.getAnnotation(Excel.class).dateFormat(); if (StringUtils.isNotEmpty(dateFormat)) { val = DateUtils.parseDateToStr(dateFormat, (Date) val); } else { val = Convert.toStr(val); } } } else if ((Integer.TYPE == fieldType) || (Integer.class == fieldType)) { val = Convert.toInt(val); } else if ((Long.TYPE == fieldType) || (Long.class == fieldType)) { val = Convert.toLong(val); } else if ((Double.TYPE == fieldType) || (Double.class == fieldType)) { val = Convert.toDouble(val); } else if ((Float.TYPE == fieldType) || (Float.class == fieldType)) { val = Convert.toFloat(val); } else if (BigDecimal.class == fieldType) { val = Convert.toBigDecimal(val); } else if (Date.class == fieldType) { if (val instanceof String) { val = DateUtils.parseDate(val); } else if (val instanceof Double) { val = DateUtil.getJavaDate((Double) val); } } if (StringUtils.isNotNull(fieldType)) { Excel attr = field.getAnnotation(Excel.class); String propertyName = field.getName(); if (StringUtils.isNotEmpty(attr.targetAttr())) { propertyName = field.getName() + &quot;.&quot; + attr.targetAttr(); } else if (StringUtils.isNotEmpty(attr.readConverterExp())) { val = reverseByExp(String.valueOf(val), attr.readConverterExp()); } ReflectUtils.invokeSetter(entity, propertyName, val); } } list.add(entity); } } return list; } ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚é£Ÿç”¨ï¼š ExcelUtil&lt;User&gt; util = new ExcelUtil&lt;User&gt;(User.class); List&lt;User&gt; userList = util.importExcel(file.getInputStream()); String message = userService.importUser(userList, updateSupport);List&lt;User&gt; list = userService.selectUserList(user); ExcelUtil&lt;User&gt; util = new ExcelUtil&lt;User&gt;(User.class); return util.exportExcel(list, &quot;ç”¨æˆ·æ•°æ®&quot;);","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Excel","slug":"Excel","permalink":"mumudadi.top/tags/Excel/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"ç³»çµ±æ—¥å¿—logbackä½¿ç”¨æ–¹å¼","slug":"Log","date":"2020-01-02T14:16:01.000Z","updated":"2020-02-04T14:40:04.094Z","comments":true,"path":"2020/01/02/Log/","link":"","permalink":"mumudadi.top/2020/01/02/Log/","excerpt":"","text":"â€‹ åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯¹äºæŸäº›å…³é”®ä¸šåŠ¡ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦è®°å½•è¯¥æ“ä½œçš„å†…å®¹ï¼Œä¸€ä¸ªæ“ä½œè°ƒä¸€æ¬¡è®°å½•æ–¹æ³•ï¼Œæ¯æ¬¡è¿˜å¾—å»æ”¶é›†å‚æ•°ç­‰ç­‰ï¼Œä¼šé€ æˆå¤§é‡ä»£ç é‡å¤ã€‚ æˆ‘ä»¬å¸Œæœ›ä»£ç ä¸­åªæœ‰ä¸šåŠ¡ç›¸å…³çš„æ“ä½œï¼Œåœ¨é¡¹ç›®ä¸­ä½¿ç”¨æ³¨è§£æ¥å®Œæˆæ­¤é¡¹åŠŸèƒ½ã€‚ åœ¨éœ€è¦è¢«è®°å½•æ—¥å¿—çš„controlleræ–¹æ³•ä¸Šæ·»åŠ @Logæ³¨è§£ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š @Log(title = &quot;ç”¨æˆ·ç®¡ç†&quot;, businessType = BusinessType.INSERT) å…³äºè‡ªå®šä¹‰æ“ä½œåŠŸèƒ½ä½¿ç”¨æµç¨‹ åœ¨BusinessTypeä¸­æ–°å¢ä¸šåŠ¡æ“ä½œç±»å‹ public enum BusinessType { /** * å…¶å®ƒ */ OTHER, /** * æ–°å¢ */ INSERT, /** * ä¿®æ”¹ */ UPDATE, /** * åˆ é™¤ */ DELETE, /** * æˆæƒ */ GRANT, /** * å¯¼å‡º */ EXPORT, /** * å¯¼å…¥ */ IMPORT, /** * å¼ºé€€ */ FORCE, /** * ç”Ÿæˆä»£ç  */ GENCODE, /** * æ¸…ç©ºæ•°æ® */ CLEAN, } application.yml# æ—¥å¿—é…ç½® logging: level: com.ruoyi: debug org.springframework: warn","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Log","slug":"Log","permalink":"mumudadi.top/tags/Log/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"å‹•æ…‹æ•¸æ“šæºå¯¦ç¾","slug":"DynamicDataSource","date":"2019-10-13T14:16:01.000Z","updated":"2020-02-04T14:39:43.340Z","comments":true,"path":"2019/10/13/DynamicDataSource/","link":"","permalink":"mumudadi.top/2019/10/13/DynamicDataSource/","excerpt":"","text":"â€‹ åœ¨å®é™…å¼€å‘ä¸­ï¼Œç»å¸¸å¯èƒ½é‡åˆ°åœ¨ä¸€ä¸ªåº”ç”¨ä¸­å¯èƒ½éœ€è¦è®¿é—®å¤šä¸ªæ•°æ®åº“çš„æƒ…å†µ åœ¨éœ€è¦åˆ‡æ¢æ•°æ®æºServiceæˆ–Mapperæ–¹æ³•ä¸Šæ·»åŠ @DataSourceæ³¨è§£@DataSource(value = DataSourceType.MASTER)ï¼Œå…¶ä¸­valueç”¨æ¥è¡¨ç¤ºæ•°æ®æºåç§° è‡ªå®šç¾©æ³¨è§£*/ @Target({ ElementType.METHOD, ElementType.TYPE }) @Retention(RetentionPolicy.RUNTIME) @Documented @Inherited public @interface DataSource { /** * åˆ‡æ¢æ•°æ®æºåç§° */ public DataSourceType value() default DataSourceType.MASTER; }åœ¨application-druid.ymlé…ç½®ä»åº“æ•°æ®æº# ä»åº“æ•°æ®æº slave: # ä»æ•°æ®æºå¼€å…³/é»˜è®¤å…³é—­ enabled: true url: jdbc:mysql://localhost:3306/test?useUnicode=true&amp;characterEncoding=utf8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=true&amp;serverTimezone=GMT%2B8 username: root password: passwordåœ¨DataSourceTypeç±»æ·»åŠ æ•°æ®æºæšä¸¾/** * ä»åº“ */ SLAVEæ•¸æ“šæºåˆ‡æ›è™•ç†public class DynamicDataSourceContextHolder { public static final Logger log = LoggerFactory.getLogger(DynamicDataSourceContextHolder.class); /** * ä½¿ç”¨ThreadLocalç»´æŠ¤å˜é‡ï¼ŒThreadLocalä¸ºæ¯ä¸ªä½¿ç”¨è¯¥å˜é‡çš„çº¿ç¨‹æä¾›ç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œ * æ‰€ä»¥æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜è‡ªå·±çš„å‰¯æœ¬ï¼Œè€Œä¸ä¼šå½±å“å…¶å®ƒçº¿ç¨‹æ‰€å¯¹åº”çš„å‰¯æœ¬ã€‚ */ private static final ThreadLocal&lt;String&gt; CONTEXT_HOLDER = new ThreadLocal&lt;&gt;(); /** * è®¾ç½®æ•°æ®æºçš„å˜é‡ */ public static void setDataSourceType(String dsType) { log.info(&quot;åˆ‡æ¢åˆ°{}æ•°æ®æº&quot;, dsType); CONTEXT_HOLDER.set(dsType); } /** * è·å¾—æ•°æ®æºçš„å˜é‡ */ public static String getDataSourceType() { return CONTEXT_HOLDER.get(); } /** * æ¸…ç©ºæ•°æ®æºå˜é‡ */ public static void clearDataSourceType() { CONTEXT_HOLDER.remove(); } }å¤šæ•¸æ“šæºè™•ç†@Aspect @Order(1) @Component public class DataSourceAspect { protected Logger logger = LoggerFactory.getLogger(getClass()); @Pointcut(&quot;@annotation(com.ruoyi.framework.aspectj.lang.annotation.DataSource)&quot; + &quot;|| @within(com.ruoyi.framework.aspectj.lang.annotation.DataSource)&quot;) public void dsPointCut() { } @Around(&quot;dsPointCut()&quot;) public Object around(ProceedingJoinPoint point) throws Throwable { DataSource dataSource = getDataSource(point); if (StringUtils.isNotNull(dataSource)) { DynamicDataSourceContextHolder.setDataSourceType(dataSource.value().name()); } try { return point.proceed(); } finally { // é”€æ¯æ•°æ®æº åœ¨æ‰§è¡Œæ–¹æ³•ä¹‹å DynamicDataSourceContextHolder.clearDataSourceType(); } } /** * è·å–éœ€è¦åˆ‡æ¢çš„æ•°æ®æº */ public DataSource getDataSource(ProceedingJoinPoint point) { MethodSignature signature = (MethodSignature) point.getSignature(); Class&lt;? extends Object&gt; targetClass = point.getTarget().getClass(); DataSource targetDataSource = targetClass.getAnnotation(DataSource.class); if (StringUtils.isNotNull(targetDataSource)) { return targetDataSource; } else { Method method = signature.getMethod(); DataSource dataSource = method.getAnnotation(DataSource.class); return dataSource; } } } druidé…ç½®å¤šæ•¸æ“šæº@Configuration public class DruidConfig { @Bean @ConfigurationProperties(&quot;spring.datasource.druid.master&quot;) public DataSource masterDataSource(DruidProperties druidProperties) { DruidDataSource dataSource = DruidDataSourceBuilder.create().build(); return druidProperties.dataSource(dataSource); } @Bean @ConfigurationProperties(&quot;spring.datasource.druid.slave&quot;) @ConditionalOnProperty(prefix = &quot;spring.datasource.druid.slave&quot;, name = &quot;enabled&quot;, havingValue = &quot;true&quot;) public DataSource slaveDataSource(DruidProperties druidProperties) { DruidDataSource dataSource = DruidDataSourceBuilder.create().build(); return druidProperties.dataSource(dataSource); } @Bean(name = &quot;dynamicDataSource&quot;) @Primary public DynamicDataSource dataSource(DataSource masterDataSource) { Map&lt;Object, Object&gt; targetDataSources = new HashMap&lt;&gt;(); targetDataSources.put(DataSourceType.MASTER.name(), masterDataSource); //åœ¨DruidConfigç±»dataSourceæ–¹æ³•æ·»åŠ æ•°æ®æº setDataSource(targetDataSources, DataSourceType.SLAVE.name(), &quot;slaveDataSource&quot;); return new DynamicDataSource(masterDataSource, targetDataSources); } /** * è®¾ç½®æ•°æ®æº * * @param targetDataSources å¤‡é€‰æ•°æ®æºé›†åˆ * @param sourceName æ•°æ®æºåç§° * @param beanName beanåç§° */ public void setDataSource(Map&lt;Object, Object&gt; targetDataSources, String sourceName, String beanName) { try { DataSource dataSource = SpringUtils.getBean(beanName); targetDataSources.put(sourceName, dataSource); } catch (Exception e) { } } } ä½¿ç”¨ @DataSource(value = DataSourceType.SLAVE) public List&lt;SysUser&gt; selectUserList(SysUser user) { return userMapper.selectUserList(user); }å¯¹äºç‰¹æ®Šæƒ…å†µå¯ä»¥é€šè¿‡DynamicDataSourceContextHolderæ‰‹åŠ¨å®ç°æ•°æ®æºåˆ‡æ¢ public List&lt;SysUser&gt; selectUserList(SysUser user) { DynamicDataSourceContextHolder.setDataSourceType(DataSourceType.SLAVE.name()); List&lt;SysUser&gt; userList = userMapper.selectUserList(user); DynamicDataSourceContextHolder.clearDataSourceType(); return userList; }","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Dynamic","slug":"Dynamic","permalink":"mumudadi.top/tags/Dynamic/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"é€šç”¨ä¸Šå‚³ä¸‹è¼‰","slug":"Upload-Download","date":"2019-10-11T14:16:01.000Z","updated":"2020-02-04T14:39:30.763Z","comments":true,"path":"2019/10/11/Upload-Download/","link":"","permalink":"mumudadi.top/2019/10/11/Upload-Download/","excerpt":"","text":"å¼•å…¥ä¾è³´&lt;!--æ–‡ä»¶ä¸Šä¼ å·¥å…·ç±» --&gt; &lt;dependency&gt; &lt;groupId&gt;commons-fileupload&lt;/groupId&gt; &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt; &lt;version&gt;${commons.fileupload.version}&lt;/version&gt; &lt;/dependency&gt;é€šç”¨ä¸Šå‚³ï¼š@PostMapping(&quot;/common/upload&quot;) @ResponseBody public AjaxResult uploadFile(MultipartFile file) throws Exception { try { // ä¸Šä¼ æ–‡ä»¶è·¯å¾„ String filePath = RuoYiConfig.getUploadPath(); // ä¸Šä¼ å¹¶è¿”å›æ–°æ–‡ä»¶åç§° String fileName = FileUploadUtils.upload(filePath, file); String url = serverConfig.getUrl() + fileName; AjaxResult ajax = AjaxResult.success(); ajax.put(&quot;fileName&quot;, fileName); ajax.put(&quot;url&quot;, url); return ajax; } catch (Exception e) { return AjaxResult.error(e.getMessage()); } } /** * æ–‡ä»¶ä¸Šä¼  * * @param baseDir ç›¸å¯¹åº”ç”¨çš„åŸºç›®å½• * @param file ä¸Šä¼ çš„æ–‡ä»¶ * @param extension ä¸Šä¼ æ–‡ä»¶ç±»å‹ * @return è¿”å›ä¸Šä¼ æˆåŠŸçš„æ–‡ä»¶å * @throws FileSizeLimitExceededException å¦‚æœè¶…å‡ºæœ€å¤§å¤§å° * @throws FileNameLengthLimitExceededException æ–‡ä»¶åå¤ªé•¿ * @throws IOException æ¯”å¦‚è¯»å†™æ–‡ä»¶å‡ºé”™æ—¶ * @throws InvalidExtensionException æ–‡ä»¶æ ¡éªŒå¼‚å¸¸ */ public static final String upload(String baseDir, MultipartFile file, String[] allowedExtension) throws FileSizeLimitExceededException, IOException, FileNameLengthLimitExceededException, InvalidExtensionException { int fileNamelength = file.getOriginalFilename().length(); if (fileNamelength &gt; FileUploadUtils.DEFAULT_FILE_NAME_LENGTH) { throw new FileNameLengthLimitExceededException(FileUploadUtils.DEFAULT_FILE_NAME_LENGTH); } assertAllowed(file, allowedExtension); String fileName = extractFilename(file); File desc = getAbsoluteFile(baseDir, fileName); //**æ ¸å¿ƒæ“ä½œ**// file.transferTo(desc); String pathFileName = getPathFileName(baseDir, fileName); return pathFileName; }é€šç”¨ä¸‹è¼‰ï¼š @GetMapping(&quot;/common/download/resource&quot;) public void resourceDownload(String resource, HttpServletRequest request, HttpServletResponse response) throws Exception { // æœ¬åœ°èµ„æºè·¯å¾„ String localPath = RuoYiConfig.getProfile(); // æ•°æ®åº“èµ„æºåœ°å€ String downloadPath = localPath + StringUtils.substringAfter(resource, Constants.RESOURCE_PREFIX); // ä¸‹è½½åç§° String downloadName = StringUtils.substringAfterLast(downloadPath, &quot;/&quot;); response.setCharacterEncoding(&quot;utf-8&quot;); response.setContentType(&quot;multipart/form-data&quot;); response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment;fileName=&quot; + FileUtils.setFileDownloadHeader(request, downloadName)); FileUtils.writeBytes(downloadPath, response.getOutputStream()); } * è¾“å‡ºæŒ‡å®šæ–‡ä»¶çš„byteæ•°ç»„ * * @param filePath æ–‡ä»¶è·¯å¾„ * @param os è¾“å‡ºæµ * @return */ public static void writeBytes(String filePath, OutputStream os) throws IOException { FileInputStream fis = null; try { File file = new File(filePath); if (!file.exists()) { throw new FileNotFoundException(filePath); } fis = new FileInputStream(file); byte[] b = new byte[1024]; int length; while ((length = fis.read(b)) &gt; 0) { os.write(b, 0, length); } } catch (IOException e) { throw e; } finally { if (os != null) { try { os.close(); } catch (IOException e1) { e1.printStackTrace(); } } if (fis != null) { try { fis.close(); } catch (IOException e1) { e1.printStackTrace(); } } } }","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"upload","slug":"upload","permalink":"mumudadi.top/tags/upload/"},{"name":"download","slug":"download","permalink":"mumudadi.top/tags/download/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"æ•¸æ“šæ¬Šé™æ§åˆ¶Permission","slug":"Permission","date":"2019-10-10T14:16:01.000Z","updated":"2020-02-04T14:39:16.975Z","comments":true,"path":"2019/10/10/Permission/","link":"","permalink":"mumudadi.top/2019/10/10/Permission/","excerpt":"","text":"â€‹ åœ¨å®é™…å¼€å‘ä¸­ï¼Œéœ€è¦è®¾ç½®ç”¨æˆ·åªèƒ½æŸ¥çœ‹å“ªäº›éƒ¨é—¨çš„æ•°æ®ï¼Œè¿™ç§æƒ…å†µä¸€èˆ¬ç§°ä¸ºæ•°æ®æƒé™ã€‚ ä¾‹å¦‚å¯¹äºé”€å”®ï¼Œè´¢åŠ¡çš„æ•°æ®ï¼Œå®ƒä»¬æ˜¯éå¸¸æ•æ„Ÿçš„ï¼Œå› æ­¤è¦æ±‚å¯¹æ•°æ®æƒé™è¿›è¡Œæ§åˆ¶ï¼Œ å¯¹äºåŸºäºé›†å›¢æ€§çš„åº”ç”¨ç³»ç»Ÿè€Œè¨€ï¼Œå°±æ›´å¤šéœ€è¦æ§åˆ¶å¥½å„è‡ªå…¬å¸çš„æ•°æ®äº†ã€‚å¦‚è®¾ç½®åªèƒ½çœ‹æœ¬å…¬å¸ã€æˆ–è€…æœ¬éƒ¨é—¨çš„æ•°æ®ï¼Œå¯¹äºç‰¹æ®Šçš„é¢†å¯¼ï¼Œå¯èƒ½éœ€è¦è·¨éƒ¨é—¨çš„æ•°æ®ï¼Œ å› æ­¤ç¨‹åºä¸èƒ½ç¡¬ç¼–ç é‚£ä¸ªé¢†å¯¼è¯¥è®¿é—®å“ªäº›æ•°æ®ï¼Œéœ€è¦è¿›è¡Œåå°çš„æƒé™å’Œæ•°æ®æƒé™çš„æ§åˆ¶ã€‚ å‰µå»ºè‡ªå®šç¾©æ³¨è§£/** * æ•°æ®æƒé™è¿‡æ»¤æ³¨è§£ * @Target(ElementType.METHOD) @Retention(RetentionPolicy.RUNTIME) @Documented public @interface DataScope { /** * éƒ¨é—¨è¡¨çš„åˆ«å */ public String deptAlias() default &quot;&quot;; /** * ç”¨æˆ·è¡¨çš„åˆ«å */ public String userAlias() default &quot;&quot;; }é‚è¼¯å¯¦ç¾é¡@Aspect @Component public class DataScopeAspect { /** * å…¨éƒ¨æ•°æ®æƒé™ */ public static final String DATA_SCOPE_ALL = &quot;1&quot;; ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ /** * æ•°æ®èŒƒå›´è¿‡æ»¤ * * @param joinPoint åˆ‡ç‚¹ * @param user ç”¨æˆ· * @param alias åˆ«å */ public static void dataScopeFilter(JoinPoint joinPoint, User user, String deptAlias, String userAlias) { StringBuilder sqlString = new StringBuilder(); for (Role role : user.getRoles()) { String dataScope = role.getDataScope(); if (DATA_SCOPE_ALL.equals(dataScope)) { sqlString = new StringBuilder(); break; } else if (DATA_SCOPE_CUSTOM.equals(dataScope)) { sqlString.append(StringUtils.format( &quot; OR {}.dept_id IN ( SELECT dept_id FROM sys_role_dept WHERE role_id = {} ) &quot;, deptAlias, role.getRoleId())); } else if (DATA_SCOPE_DEPT.equals(dataScope)) { sqlString.append(StringUtils.format(&quot; OR {}.dept_id = {} &quot;, deptAlias, user.getDeptId())); } else if (DATA_SCOPE_DEPT_AND_CHILD.equals(dataScope)) { sqlString.append(StringUtils.format( &quot; OR {}.dept_id IN ( SELECT dept_id FROM sys_dept WHERE dept_id = {} or find_in_set( {} , ancestors ) )&quot;, deptAlias, user.getDeptId(), user.getDeptId())); } else if (DATA_SCOPE_SELF.equals(dataScope)) { if (StringUtils.isNotBlank(userAlias)) { sqlString.append(StringUtils.format(&quot; OR {}.user_id = {} &quot;, userAlias, user.getUserId())); } else { // æ•°æ®æƒé™ä¸ºä»…æœ¬äººä¸”æ²¡æœ‰userAliasåˆ«åä¸æŸ¥è¯¢ä»»ä½•æ•°æ® sqlString.append(&quot; OR 1=0 &quot;); } } } if (StringUtils.isNotBlank(sqlString.toString())) { BaseEntity baseEntity = (BaseEntity) joinPoint.getArgs()[0]; baseEntity.getParams().put(DATA_SCOPE, &quot; AND (&quot; + sqlString.substring(4) + &quot;)&quot;); } } ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ä½¿ç”¨å ´æ™¯ã€‘ @Override @DataScope(deptAlias = &quot;d&quot;, userAlias = &quot;u&quot;) public List&lt;User&gt; selectUserList(User user) { // ç”Ÿæˆæ•°æ®æƒé™è¿‡æ»¤æ¡ä»¶ return userMapper.selectUserList(user); }sqlè®ŠåŒ–select u.user_id, u.dept_id, u.login_name, u.user_name, u.email , u.phonenumber, u.password, u.sex, u.avatar, u.salt , u.status, u.del_flag, u.login_ip, u.login_date, u.create_by , u.create_time, u.remark, d.dept_name from sys_user u left join sys_dept d on u.dept_id = d.dept_id where u.del_flag = &#39;0&#39; ${params.dataScope}and u.dept_id in ( select dept_id from sys_role_dept where role_id = 2 )","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Permission","slug":"Permission","permalink":"mumudadi.top/tags/Permission/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"é …ç›®ç•°å¸¸è™•ç†Exception","slug":"Exception","date":"2019-10-02T09:16:01.000Z","updated":"2020-02-04T14:36:59.310Z","comments":true,"path":"2019/10/02/Exception/","link":"","permalink":"mumudadi.top/2019/10/02/Exception/","excerpt":"","text":"â€‹ é€šå¸¸ä¸€ä¸ªwebæ¡†æ¶ä¸­ï¼Œæœ‰å¤§é‡éœ€è¦å¤„ç†çš„å¼‚å¸¸ã€‚æ¯”å¦‚ä¸šåŠ¡å¼‚å¸¸ï¼Œæƒé™ä¸è¶³ç­‰ç­‰ã€‚å‰ç«¯é€šè¿‡å¼¹å‡ºæç¤ºä¿¡æ¯çš„æ–¹å¼å‘Šè¯‰ç”¨æˆ·å‡ºäº†ä»€ä¹ˆé”™è¯¯ã€‚ é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬ç”¨tryâ€¦..catchâ€¦. å¯¹å¼‚å¸¸è¿›è¡Œæ•æ‰å¤„ç†ï¼Œä½†æ˜¯åœ¨å®é™…é¡¹ç›®ä¸­å¯¹ä¸šåŠ¡æ¨¡å—è¿›è¡Œå¼‚å¸¸æ•æ‰ï¼Œä¼šé€ æˆä»£ç é‡å¤å’Œç¹æ‚ï¼Œ æˆ‘ä»¬å¸Œæœ›ä»£ç ä¸­åªæœ‰ä¸šåŠ¡ç›¸å…³çš„æ“ä½œï¼Œæ‰€æœ‰çš„å¼‚å¸¸æˆ‘ä»¬å•ç‹¬è®¾ç«‹ä¸€ä¸ªç±»æ¥å¤„ç†å®ƒã€‚å…¨å±€å¼‚å¸¸å°±æ˜¯å¯¹æ¡†æ¶æ‰€æœ‰å¼‚å¸¸è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚ æˆ‘ä»¬åœ¨å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„æ–¹æ³•é‡ŒthrowæŠ›ç»™æ§åˆ¶å™¨ã€‚ç„¶åç”±å…¨å±€å¼‚å¸¸å¤„ç†å™¨å¯¹å¼‚å¸¸è¿›è¡Œç»Ÿä¸€å¤„ç†ã€‚ å¦‚æ­¤ï¼Œæˆ‘ä»¬çš„Controllerä¸­çš„æ–¹æ³•å°±å¯ä»¥å¾ˆç®€æ´äº†ã€‚ å®šç¾©åŸºç¤ç•°å¸¸public class BaseException extends RuntimeException { private static final long serialVersionUID = 1L; /** * æ‰€å±æ¨¡å— */ private String module; /** * é”™è¯¯ç  */ private String code; /** * é”™è¯¯ç å¯¹åº”çš„å‚æ•° */ private Object[] args; /** * é”™è¯¯æ¶ˆæ¯ */ private String defaultMessage; public BaseException(String module, String code, Object[] args, String defaultMessage) { this.module = module; this.code = code; this.args = args; this.defaultMessage = defaultMessage; } public BaseException(String module, String code, Object[] args) { this(module, code, args, null); } public BaseException(String module, String defaultMessage) { this(module, null, null, defaultMessage); } public BaseException(String code, Object[] args) { this(null, code, args, null); } public BaseException(String defaultMessage) { this(null, null, null, defaultMessage); } @Override public String getMessage() { String message = null; if (!StringUtils.isEmpty(code)) { message = MessageUtils.message(code, args); } if (message == null) { message = defaultMessage; } return message; } public String getModule() { return module; } public String getCode() { return code; } public Object[] getArgs() { return args; } public String getDefaultMessage() { return defaultMessage; } @Override public String toString() { return this.getClass() + &quot;{&quot; + &quot;module=&#39;&quot; + module + &#39;\\&#39;&#39; + &quot;, message=&#39;&quot; + getMessage() + &#39;\\&#39;&#39; + &#39;}&#39;; } } æ¥­å‹™ç•°å¸¸public class BusinessException extends RuntimeException { private static final long serialVersionUID = 1L; protected final String message; public BusinessException(String message) { this.message = message; } public BusinessException(String message, Throwable e) { super(message, e); this.message = message; } @Override public String getMessage() { return message; } }@ControllerAdviceå®ç°ä¼˜é›…åœ°å¤„ç†å¼‚å¸¸ @ControllerAdviceï¼Œæ˜¯Spring3.2æä¾›çš„æ–°æ³¨è§£,å®ƒæ˜¯ä¸€ä¸ªControllerå¢å¼ºå™¨,å¯å¯¹controllerä¸­è¢« @RequestMappingæ³¨è§£çš„æ–¹æ³•åŠ ä¸€äº›é€»è¾‘å¤„ç†ã€‚æœ€å¸¸ç”¨çš„å°±æ˜¯å¼‚å¸¸å¤„ç† @RestControllerAdvice public class GlobalExceptionHandler { private static final Logger log = LoggerFactory.getLogger(GlobalExceptionHandler.class); * ä¸šåŠ¡å¼‚å¸¸ å¦‚æœè¯·æ±‚ä¸ºajaxè¿”å›jsonï¼Œæ™®é€šè¯·æ±‚è·³è½¬é¡µé¢ */ @ExceptionHandler(BusinessException.class) public Object businessException(HttpServletRequest request, BusinessException e) { log.error(e.getMessage(), e); if (ServletUtils.isAjaxRequest(request)) { return AjaxResult.error(e.getMessage()); } else { ModelAndView modelAndView = new ModelAndView(); modelAndView.addObject(&quot;errorMessage&quot;, e.getMessage()); modelAndView.setViewName(&quot;error/business&quot;); return modelAndView; } }æ‡‰ç”¨ï¼š /** * æ ¡éªŒç”¨æˆ·æ˜¯å¦å…è®¸æ“ä½œ * * @param user ç”¨æˆ·ä¿¡æ¯ */ public void checkUserAllowed(User user) { if (StringUtils.isNotNull(user.getUserId()) &amp;&amp; user.isAdmin()) { throw new BusinessException(&quot;ä¸å…è®¸æ“ä½œè¶…çº§ç®¡ç†å‘˜ç”¨æˆ·&quot;); } }","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Exception","slug":"Exception","permalink":"mumudadi.top/tags/Exception/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"æ•°æ®åº“çŸ¥è¯†è¦ç‚¹","slug":"database","date":"2019-10-02T09:16:01.000Z","updated":"2020-02-04T14:36:43.804Z","comments":true,"path":"2019/10/02/database/","link":"","permalink":"mumudadi.top/2019/10/02/database/","excerpt":"","text":"ä¸€ã€åŸºæœ¬æ¦‚å¿µ ä¸»é”®ã€å¤–é”®ã€è¶…é”®ã€å€™é€‰é”®è¶…é”®ï¼šåœ¨å…³ç³»ä¸­èƒ½å”¯ä¸€æ ‡è¯†å…ƒç»„çš„å±æ€§é›†ç§°ä¸ºå…³ç³»æ¨¡å¼çš„è¶…é”®ã€‚ä¸€ä¸ªå±æ€§å¯ä»¥ä¸ºä½œä¸ºä¸€ä¸ªè¶…é”®ï¼Œå¤šä¸ªå±æ€§ç»„åˆåœ¨ä¸€èµ·ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªè¶…é”®ã€‚è¶…é”®åŒ…å«å€™é€‰é”®å’Œä¸»é”®ã€‚ å€™é€‰é”®ï¼šæ˜¯æœ€å°è¶…é”®ï¼Œå³æ²¡æœ‰å†—ä½™å…ƒç´ çš„è¶…é”®ã€‚ ä¸»é”®ï¼šæ•°æ®åº“è¡¨ä¸­å¯¹å‚¨å­˜æ•°æ®å¯¹è±¡äºˆä»¥å”¯ä¸€å’Œå®Œæ•´æ ‡è¯†çš„æ•°æ®åˆ—æˆ–å±æ€§çš„ç»„åˆã€‚ä¸€ä¸ªæ•°æ®åˆ—åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ï¼Œä¸”ä¸»é”®çš„å–å€¼ä¸èƒ½ç¼ºå¤±ï¼Œå³ä¸èƒ½ä¸ºç©ºå€¼ï¼ˆNullï¼‰ã€‚ å¤–é”®ï¼šåœ¨ä¸€ä¸ªè¡¨ä¸­å­˜åœ¨çš„å¦ä¸€ä¸ªè¡¨çš„ä¸»é”®ç§°æ­¤è¡¨çš„å¤–é”®ã€‚ ä¸ºä»€ä¹ˆç”¨è‡ªå¢åˆ—ä½œä¸ºä¸»é”® å¦‚æœæˆ‘ä»¬å®šä¹‰äº†ä¸»é”®(PRIMARY KEY)ï¼Œé‚£ä¹ˆInnoDBä¼šé€‰æ‹©ä¸»é”®ä½œä¸ºèšé›†ç´¢å¼•ã€ å¦‚æœæ²¡æœ‰æ˜¾å¼å®šä¹‰ä¸»é”®ï¼Œåˆ™InnoDBä¼šé€‰æ‹©ç¬¬ä¸€ä¸ªä¸åŒ…å«æœ‰NULLå€¼çš„å”¯ä¸€ç´¢å¼•ä½œä¸ºä¸»é”®ç´¢å¼•ã€ å¦‚æœä¹Ÿæ²¡æœ‰è¿™æ ·çš„å”¯ä¸€ç´¢å¼•ï¼Œåˆ™InnoDBä¼šé€‰æ‹©å†…ç½®6å­—èŠ‚é•¿çš„ROWIDä½œä¸ºéšå«çš„èšé›†ç´¢å¼•(ROWIDéšç€è¡Œè®°å½•çš„å†™å…¥è€Œä¸»é”®é€’å¢ï¼Œè¿™ä¸ªROWIDä¸åƒORACLEçš„ROWIDé‚£æ ·å¯å¼•ç”¨ï¼Œæ˜¯éšå«çš„)ã€‚ æ•°æ®è®°å½•æœ¬èº«è¢«å­˜äºä¸»ç´¢å¼•ï¼ˆä¸€é¢—B+Treeï¼‰çš„å¶å­èŠ‚ç‚¹ä¸Šã€‚è¿™å°±è¦æ±‚åŒä¸€ä¸ªå¶å­èŠ‚ç‚¹å†…ï¼ˆå¤§å°ä¸ºä¸€ä¸ªå†…å­˜é¡µæˆ–ç£ç›˜é¡µï¼‰çš„å„æ¡æ•°æ®è®°å½•æŒ‰ä¸»é”®é¡ºåºå­˜æ”¾ï¼Œå› æ­¤æ¯å½“æœ‰ä¸€æ¡æ–°çš„è®°å½•æ’å…¥æ—¶ï¼ŒMySQLä¼šæ ¹æ®å…¶ä¸»é”®å°†å…¶æ’å…¥é€‚å½“çš„èŠ‚ç‚¹å’Œä½ç½®ï¼Œå¦‚æœé¡µé¢è¾¾åˆ°è£…è½½å› å­ï¼ˆInnoDBé»˜è®¤ä¸º15/16ï¼‰ï¼Œåˆ™å¼€è¾Ÿä¸€ä¸ªæ–°çš„é¡µï¼ˆèŠ‚ç‚¹ï¼‰ å¦‚æœè¡¨ä½¿ç”¨è‡ªå¢ä¸»é”®ï¼Œé‚£ä¹ˆæ¯æ¬¡æ’å…¥æ–°çš„è®°å½•ï¼Œè®°å½•å°±ä¼šé¡ºåºæ·»åŠ åˆ°å½“å‰ç´¢å¼•èŠ‚ç‚¹çš„åç»­ä½ç½®ï¼Œå½“ä¸€é¡µå†™æ»¡ï¼Œå°±ä¼šè‡ªåŠ¨å¼€è¾Ÿä¸€ä¸ªæ–°çš„é¡µ å¦‚æœä½¿ç”¨éè‡ªå¢ä¸»é”®ï¼ˆå¦‚æœèº«ä»½è¯å·æˆ–å­¦å·ç­‰ï¼‰ï¼Œç”±äºæ¯æ¬¡æ’å…¥ä¸»é”®çš„å€¼è¿‘ä¼¼äºéšæœºï¼Œå› æ­¤æ¯æ¬¡æ–°çºªå½•éƒ½è¦è¢«æ’åˆ°ç°æœ‰ç´¢å¼•é¡µå¾—ä¸­é—´æŸä¸ªä½ç½®ï¼Œæ­¤æ—¶MySQLä¸å¾—ä¸ä¸ºäº†å°†æ–°è®°å½•æ’åˆ°åˆé€‚ä½ç½®è€Œç§»åŠ¨æ•°æ®ï¼Œç”šè‡³ç›®æ ‡é¡µé¢å¯èƒ½å·²ç»è¢«å›å†™åˆ°ç£ç›˜ä¸Šè€Œä»ç¼“å­˜ä¸­æ¸…æ‰ï¼Œæ­¤æ—¶åˆè¦ä»ç£ç›˜ä¸Šè¯»å›æ¥ï¼Œè¿™å¢åŠ äº†å¾ˆå¤šå¼€é”€ï¼ŒåŒæ—¶é¢‘ç¹çš„ç§»åŠ¨ã€åˆ†é¡µæ“ä½œé€ æˆäº†å¤§é‡çš„ç¢ç‰‡ï¼Œå¾—åˆ°äº†ä¸å¤Ÿç´§å‡‘çš„ç´¢å¼•ç»“æ„ï¼Œåç»­ä¸å¾—ä¸é€šè¿‡OPTIMIZE TABLEæ¥é‡å»ºè¡¨å¹¶ä¼˜åŒ–å¡«å……é¡µé¢ã€‚ è§¦å‘å™¨çš„ä½œç”¨ï¼Ÿ è§¦å‘å™¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„å­˜å‚¨è¿‡ç¨‹ï¼Œä¸»è¦æ˜¯é€šè¿‡äº‹ä»¶æ¥è§¦å‘è€Œè¢«æ‰§è¡Œçš„ã€‚å®ƒå¯ä»¥å¼ºåŒ–çº¦æŸï¼Œæ¥ç»´æŠ¤æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ï¼Œå¯ä»¥è·Ÿè¸ªæ•°æ®åº“å†…çš„æ“ä½œä»è€Œä¸å…è®¸æœªç»è®¸å¯çš„æ›´æ–°å’Œå˜åŒ–ã€‚å¯ä»¥è”çº§è¿ç®—ã€‚å¦‚ï¼ŒæŸè¡¨ä¸Šçš„è§¦å‘å™¨ä¸ŠåŒ…å«å¯¹å¦ä¸€ä¸ªè¡¨çš„æ•°æ®æ“ä½œï¼Œè€Œè¯¥æ“ä½œåˆä¼šå¯¼è‡´è¯¥è¡¨è§¦å‘å™¨è¢«è§¦å‘ã€‚ ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹ï¼Ÿç”¨ä»€ä¹ˆæ¥è°ƒç”¨ï¼Ÿ å­˜å‚¨è¿‡ç¨‹æ˜¯ä¸€ä¸ªé¢„ç¼–è¯‘çš„SQLè¯­å¥ï¼Œä¼˜ç‚¹æ˜¯å…è®¸æ¨¡å—åŒ–çš„è®¾è®¡ï¼Œå°±æ˜¯è¯´åªéœ€åˆ›å»ºä¸€æ¬¡ï¼Œä»¥ååœ¨è¯¥ç¨‹åºä¸­å°±å¯ä»¥è°ƒç”¨å¤šæ¬¡ã€‚å¦‚æœæŸæ¬¡æ“ä½œéœ€è¦æ‰§è¡Œå¤šæ¬¡SQLï¼Œä½¿ç”¨å­˜å‚¨è¿‡ç¨‹æ¯”å•çº¯SQLè¯­å¥æ‰§è¡Œè¦å¿«ã€‚ è°ƒç”¨ï¼š 1ï¼‰å¯ä»¥ç”¨ä¸€ä¸ªå‘½ä»¤å¯¹è±¡æ¥è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ã€‚ 2ï¼‰å¯ä»¥ä¾›å¤–éƒ¨ç¨‹åºè°ƒç”¨ï¼Œæ¯”å¦‚ï¼šjavaç¨‹åºã€‚ 5.å­˜å‚¨è¿‡ç¨‹çš„ä¼˜ç¼ºç‚¹ï¼Ÿ ä¼˜ç‚¹ï¼š 1ï¼‰å­˜å‚¨è¿‡ç¨‹æ˜¯é¢„ç¼–è¯‘è¿‡çš„ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ã€‚ 2ï¼‰å­˜å‚¨è¿‡ç¨‹çš„ä»£ç ç›´æ¥å­˜æ”¾äºæ•°æ®åº“ä¸­ï¼Œé€šè¿‡å­˜å‚¨è¿‡ç¨‹åç›´æ¥è°ƒç”¨ï¼Œå‡å°‘ç½‘ç»œé€šè®¯ã€‚ 3ï¼‰å®‰å…¨æ€§é«˜ï¼Œæ‰§è¡Œå­˜å‚¨è¿‡ç¨‹éœ€è¦æœ‰ä¸€å®šæƒé™çš„ç”¨æˆ·ã€‚ 4ï¼‰å­˜å‚¨è¿‡ç¨‹å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œå¯å‡å°‘æ•°æ®åº“å¼€å‘äººå‘˜çš„å·¥ä½œé‡ã€‚ ç¼ºç‚¹ï¼š ç§»æ¤æ€§å·®","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"mumudadi.top/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"æ‰‹å·¥å®ç°HashMap","slug":"HashMap","date":"2019-05-02T07:51:01.000Z","updated":"2020-02-04T14:34:48.842Z","comments":true,"path":"2019/05/02/HashMap/","link":"","permalink":"mumudadi.top/2019/05/02/HashMap/","excerpt":"","text":"HashMapåº•å±‚å®ç°é‡‡ç”¨äº†å“ˆå¸Œè¡¨ï¼Œè¿™æ˜¯ä¸€ç§éå¸¸é‡è¦çš„æ•°æ®ç»“æ„ã€‚ æ•°æ®ç»“æ„ä¸­ç”±æ•°ç»„å’Œé“¾è¡¨æ¥å®ç°å †æ•°æ®çš„å­˜å‚¨ï¼Œä»–ä»¬å„æœ‰ç‰¹ç‚¹ã€‚ æ•°ç»„ï¼šæš‚ç”¨ç©ºé—´è¿ç»­ã€‚å¯»æ‰¾åœ°å€å®¹æ˜“ï¼ŒæŸ¥è¯¢é€Ÿåº¦å¿«ã€‚ä½†æ˜¯ï¼Œå¢åŠ å’Œåˆ é™¤æ•ˆç‡éå¸¸ä½ã€‚ é“¾è¡¨ï¼šå ç”¨ç©ºé—´ä¸è¿ç»­ï¼Œå¯»æ‰¾åœ°å€å›°éš¾ï¼ŒæŸ¥è¯¢é€Ÿåº¦æ…¢ã€‚ä½†æ˜¯ï¼Œå¢åŠ å’Œåˆ é™¤æ•ˆç‡éå¸¸é«˜ã€‚ å­˜å‚¨æ•°æ®è¿‡ç¨‹ package simple; import java.util.Arrays; import java.util.HashMap; public class HashMapTest&lt;K,V&gt; { class Node&lt;K,V&gt; { int hash; K key; V value; Node next; } Node[] table; int size; public HashMapTest() { table = new Node[16]; //é•¿åº¦ä¸€èˆ¬å®šä¹‰ä¸º2çš„æ•´æ•°å¹‚ } public void put(K key,V value){ //å®šä¹‰æ–°çš„èŠ‚ç‚¹å¯¹è±¡ Node newNode = new Node(); newNode.hash = key.hashCode()&amp;table.length; newNode.key = key; newNode.value = value; Node temp = table[newNode.hash]; if(temp==null){ table[newNode.hash] = newNode; size++; }else { while (temp!=null){ if(temp.key.equals(key)){ temp.value = value; //è¦†ç›–é‡å¤å€¼ break; } if (temp.next!=null){ temp = temp.next; }else { temp.next = newNode;//æ²¡æ‰¾åˆ°ç›¸åŒkey æ·»åŠ åˆ°é“¾è¡¨æœ€å size++; break; } } } } public V get(K key){ for(int i=0;i&lt;size;i++){ Node temp = table[i]; while(temp!=null){ if(key.equals(temp.key)){ return (V)temp.value; } temp = temp.next; } } return null; } @Override public String toString() { StringBuilder sb = new StringBuilder(); sb.append(&quot;{&quot;); for(int i=0;i&lt;size;i++){ Node temp = table[i]; while(temp!=null){ sb.append(temp.key).append(&quot;=&quot;).append(temp.value).append(&quot;,&quot;); temp = temp.next; } } sb.setCharAt(sb.length()-1,&#39;}&#39;); return sb.toString(); } public static void main(String[] args) { HashMapTest&lt;Integer,String&gt; hashMapTest = new HashMapTest(); for(int i=0;i&lt;10;i++){ hashMapTest.put(i,&quot;lin&quot;+i); } System.out.println(hashMapTest.get(0)); System.out.println(hashMapTest.toString()); System.out.println(hashMapTest.size); } }","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"HashMap","slug":"HashMap","permalink":"mumudadi.top/tags/HashMap/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"æ‰‹åŠ¨å®ç°LinkedList","slug":"LinkedList","date":"2019-05-02T07:41:01.000Z","updated":"2020-02-04T14:34:30.857Z","comments":true,"path":"2019/05/02/LinkedList/","link":"","permalink":"mumudadi.top/2019/05/02/LinkedList/","excerpt":"","text":"LinkedListåº•å±‚ç”¨åŒå‘é“¾è¡¨å®ç°çš„å­˜å‚¨ã€‚ç‰¹ç‚¹ï¼šæŸ¥è¯¢æ•ˆç‡ä½ï¼Œå¢åˆ æ•ˆç‡é«˜ï¼Œçº¿ç¨‹ä¸å®‰å…¨ã€‚ åŒå‘é“¾è¡¨ä¹Ÿå«åŒé“¾è¡¨ï¼Œæ˜¯é“¾è¡¨çš„ä¸€ç§ï¼Œå®ƒçš„æ¯ä¸ªæ•°æ®èŠ‚ç‚¹ä¸­éƒ½æœ‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹å’Œåä¸€ä¸ªèŠ‚ç‚¹ã€‚æ‰€ä»¥ï¼Œä»åŒå‘é“¾è¡¨ä¸­çš„ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹ï¼Œéƒ½å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ‰¾åˆ°æ‰€æœ‰èŠ‚ç‚¹ã€‚ package simple; public class LinkedListTest&lt;T&gt; { class Node { Node previous; Node next; T element; public Node(Node previous, Node next, T element) { this.previous = previous; this.next = next; this.element = element; } public Node(T element) { this.element = element; } } private Node first; private Node last; private int size; public void add(T obj){ Node node = new Node(obj); if(first==null){ first = node; last = node; }else { node.previous = last; node.next = null; last.next = node; last = node; } size++; } public void add(int index,T obj){ Node newNode = new Node(obj); Node temp = getNode(index); if(temp!=null){ Node up = temp.previous; newNode.previous = up; up.next = newNode; newNode.next = temp; temp.previous = newNode; } size++; } public T get(int index) { checkRange(index); Node temp = getNode(index); return temp!=null?temp.element:null; } public Node getNode(int index){ Node temp = null; if(index&lt;=(index&gt;&gt;1)){ temp = first; for(int i=0;i&lt;index;i++){ temp = temp.next; } }else { temp = last; for(int i=size-1;i&gt;index;i--){ temp = temp.previous; } } return temp; } public void remove(int index){ Node temp = getNode(index); if(temp!=null){ Node up = temp.previous; Node down = temp.next; if(up!=null){ up.next = down; }else { first = down; } if(down!=null){ down.previous = up; }else { last = up; } } size--; } private void checkRange(int index){ if(index&lt;0||index&gt;size-1){ throw new RuntimeException(&quot;ç´¢å¼•ä¸åˆæ³•&quot;+index); } } public String toString() { StringBuilder sb = new StringBuilder(); sb.append(&quot;[&quot;); Node temp = first; while(temp!=null){ sb.append(temp.element).append(&quot;,&quot;); temp = temp.next; } sb.setCharAt(sb.length()-1,&#39;]&#39;); return sb.toString(); } public static void main(String[] args) { LinkedListTest linkedListTest= new LinkedListTest&lt;Object&gt;(); for(int i=0;i&lt;10;i++){ linkedListTest.add(&quot;aa&quot;+i); } //linkedListTest.remove(9); linkedListTest.add(7,&quot;hello&quot;); System.out.println( linkedListTest.toString()); } } æ€»ç»“ï¼š åšå¢åˆ æ“ä½œæ—¶æ³¨æ„æŠŠç›¸é‚»ä¸¤ä¸ªèŠ‚ç‚¹è¡”æ¥ä¸Šã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"LinkList","slug":"LinkList","permalink":"mumudadi.top/tags/LinkList/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"æ‰‹åŠ¨å®ç°ArrayList","slug":"ArrayList","date":"2019-05-02T07:37:01.000Z","updated":"2020-02-04T14:34:18.340Z","comments":true,"path":"2019/05/02/ArrayList/","link":"","permalink":"mumudadi.top/2019/05/02/ArrayList/","excerpt":"","text":"ArrayListåº•å±‚ç”¨æ•°ç»„å®ç°çš„å­˜å‚¨ã€‚ç‰¹ç‚¹ï¼šæŸ¥è¯¢æ•ˆç‡é«˜ï¼Œå¢åˆ æ•ˆç‡ä½ï¼Œçº¿ç¨‹ä¸å®‰å…¨ã€‚æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨å®ƒã€‚package simple; import java.util.Arrays; public class ArrayListTest&lt;T&gt; { private Object[] elementData; private int size; private static final int DEFAULT_CAPACITY = 10; public ArrayListTest() { elementData = new Object[DEFAULT_CAPACITY]; } public ArrayListTest(int capacity) { if(capacity&lt;0){ throw new RuntimeException(&quot;å®¹é‡ä¸èƒ½ä¸ºè´Ÿæ•°&quot;); }else if(capacity==0){ elementData = new Object[DEFAULT_CAPACITY]; }else { elementData = new Object[capacity]; } } public void add (T obj){ if(size == elementData.length){ Object[] newArray = new Object[elementData.length+(elementData.length&gt;&gt;1)]; System.arraycopy(elementData,0,newArray,0,elementData.length); elementData = newArray; } elementData[size++] = obj; } public T get(int index) { checkRange(index); return (T) elementData[index]; } public void set(int index,T obj) { checkRange(index); elementData[index] = obj; } public void checkRange(int index){ if(index&lt;0||index&gt;size-1){ throw new RuntimeException(&quot;ç´¢å¼•ä¸åˆæ³•&quot;+index); } } public void remove(T element){ for(int i=0;i&lt;size;i++){ if(element.equals(get(i))){ remove(i); } } } public void remove(int index) { int numMoved = elementData.length-index-1; if(numMoved&gt;0){ System.arraycopy(elementData,index+1,elementData,index,numMoved); } elementData[--size] = null; } public int size(){ return size; } public boolean isEmpty(){ return size==0?true:false; } @Override public String toString() { StringBuilder sb = new StringBuilder(); sb.append(&quot;[&quot;); for(int i=0;i&lt;size;i++){ sb.append(elementData[i]+&quot;,&quot;); } sb.setCharAt(sb.length()-1,&#39;]&#39;); return sb.toString(); } public static void main(String[] args) { ArrayListTest s1= new ArrayListTest(20); for(int i=0;i&lt;10;i++){ s1.add(&quot;lin&quot;+i); } System.out.println(s1.get(9)); s1.remove(5); System.out.println(s1); s1.remove(&quot;lin3&quot;); System.out.println(s1); } } åŸç†æ€»ç»“ï¼š åº•å±‚æ•°ç»„æ‰©å®¹æ—§æ•°ç»„æ‹·è´åˆ°æ–°æ•°ç»„ System.arraycopy(elementData,0,newArray,0,elementData.length); removeæ–¹æ³•å…ˆè°ƒç”¨equalsæ–¹æ³•æŸ¥æ‰¾åˆ°ç›¸åŒå…ƒç´ ï¼Œæ‰¾åˆ°åˆ é™¤å…ƒç´ çš„æ•°ç»„ä¸‹æ ‡ç”¨æ•°ç»„æ‹·è´æ–¹æ³•æ‹†åˆ†é‡æ–°æ•´åˆæ–°çš„æ•°ç»„å¹¶è¿”å›ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"ArrayList","slug":"ArrayList","permalink":"mumudadi.top/tags/ArrayList/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"Javaåƒåœ¾å›æ”¶æœºåˆ¶","slug":"Garbage-Collection","date":"2019-05-02T07:31:01.000Z","updated":"2020-02-04T14:33:47.044Z","comments":true,"path":"2019/05/02/Garbage-Collection/","link":"","permalink":"mumudadi.top/2019/05/02/Garbage-Collection/","excerpt":"","text":"é€šç”¨çš„åˆ†ä»£åƒåœ¾å›æ”¶æœºåˆ¶â€‹ åˆ†ä»£åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæ˜¯åŸºäºè¿™æ ·ä¸€ä¸ªäº‹å®ï¼šä¸åŒçš„å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸ä¸€æ ·çš„ã€‚å› æ­¤ï¼Œä¸åŒç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡å¯ä»¥é‡‡å–ä¸åŒçš„å›æ”¶ç®—æ³•ï¼Œä»¥ä¾¿æé«˜å›æ”¶æ•ˆç‡ã€‚æˆ‘ä»¬å°†å¯¹è±¡åˆ†ä¸ºä¸‰ç§çŠ¶æ€ï¼šå¹´è½»ä»£ã€å¹´è€ä»£ã€æŒä¹…ä»£ã€‚JVMå°†å †å†…å­˜åˆ’åˆ†ä¸ºEdenã€Survivorå’ŒTenured/Oldç©ºé—´ã€‚ å¹´è½»ä»£ æ‰€æœ‰æ–°ç”Ÿæˆçš„å¯¹è±¡é¦–å…ˆéƒ½æ˜¯æ”¾åœ¨EdenåŒºã€‚å¹´è½»ä»£çš„ç›®æ ‡å°±æ˜¯å°½å¯èƒ½å¿«é€Ÿçš„æ”¶é›†æ‰é‚£äº›ç”Ÿå‘½å‘¨æœŸçŸ­çš„å¯¹è±¡ï¼Œå¯¹åº”çš„æ˜¯Minor GCï¼Œæ¯æ¬¡Minor GC ä¼šæ¸…ç†å¹´è½»ä»£çš„å†…å­˜ï¼Œç®—æ³•é‡‡ç”¨æ•ˆç‡è¾ƒé«˜çš„å¤åˆ¶ç®—æ³•ï¼Œé¢‘ç¹çš„æ“ä½œï¼Œä½†æ˜¯ä¼šæµªè´¹å†…å­˜ç©ºé—´ã€‚å½“â€œå¹´è½»ä»£â€åŒºåŸŸå­˜æ”¾æ»¡å¯¹è±¡åï¼Œå°±å°†å¯¹è±¡å­˜æ”¾åˆ°å¹´è€ä»£åŒºåŸŸã€‚ å¹´è€ä»£ åœ¨å¹´è½»ä»£ä¸­ç»å†äº†N(é»˜è®¤15)æ¬¡åƒåœ¾å›æ”¶åä»ç„¶å­˜æ´»çš„å¯¹è±¡ï¼Œå°±ä¼šè¢«æ”¾åˆ°å¹´è€ä»£ä¸­ã€‚å› æ­¤å¯ä»¥è®¤ä¸ºå¹´è€ä»£ä¸­å­˜æ”¾çš„éƒ½æ˜¯ä¸€äº›ç”Ÿå‘½å‘¨æœŸè¾ƒé•¿çš„å¯¹è±¡ã€‚å¹´è€ä»£å¯¹è±¡è¶Šæ¥è¶Šå¤šï¼Œæˆ‘ä»¬å°±éœ€è¦å¯åŠ¨Major GCå’ŒFull GC(å…¨é‡å›æ”¶)ï¼Œæ¥ä¸€æ¬¡å¤§æ‰«é™¤ï¼Œå…¨é¢æ¸…ç†å¹´è½»ä»£åŒºåŸŸå’Œå¹´è€ä»£åŒºåŸŸã€‚ æŒä¹…ä»£ ç”¨äºå­˜æ”¾é™æ€æ–‡ä»¶ï¼Œå¦‚Javaç±»ã€æ–¹æ³•ç­‰ã€‚æŒä¹…ä»£å †åƒåœ¾å›æ”¶æ²¡æœ‰æ˜¾è‘—å½±å“ã€‚ Minor GCï¼š ç”¨äºæ¸…ç†å¹´è½»ä»£åŒºåŸŸã€‚EdenåŒºæ»¡äº†å°±ä¼šè§¦å‘ä¸€æ¬¡Minor GCã€‚æ¸…ç†æ— ç”¨å¯¹è±¡ï¼Œå°†æœ‰ç”¨å¯¹è±¡å¤åˆ¶åˆ°â€œSurvivor1â€ã€â€œSurvivor2â€åŒºä¸­(è¿™ä¸¤ä¸ªåŒºï¼Œå¤§å°ç©ºé—´ä¹Ÿç›¸åŒï¼ŒåŒä¸€æ—¶åˆ»Surivor1å’ŒSurivor2åªæœ‰ä¸€ä¸ªåœ¨ç”¨ï¼Œä¸€ä¸ªä¸ºç©º) Major GCï¼š ç”¨äºæ¸…ç†å¹´è€ä»£åŒºåŸŸã€‚ Full GC: ç”¨äºæ¸…ç†å¹´è½»ä»£ã€å¹´è€ä»£åŒºåŸŸã€‚æˆæœ¬è¾ƒé«˜ï¼Œä¼šå¯¹ç³»ç»Ÿäº§ç”Ÿå½±å“ã€‚ åƒåœ¾å›æ”¶è¿‡ç¨‹ï¼š æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œç»å¤§å¤šæ•°éƒ½ä¼šå­˜å‚¨åœ¨Edenä¸­ å½“Edenæ»¡äº†(è¾¾åˆ°ä¸€å®šæ¯”ä¾‹)ä¸èƒ½åˆ›å»ºæ–°å¯¹è±¡ï¼Œåˆ™è§¦å‘åƒåœ¾å›æ”¶(GC )ï¼Œå°†æ— ç”¨å¯¹è±¡æ¸…ç†æ‰ï¼Œç„¶åå‰©ä½™å¯¹è±¡èµ‹å€¼åˆ°æŸä¸ªSurvivorä¸­ï¼Œå¦‚S1ï¼ŒåŒæ—¶æ¸…ç©ºEdenåŒº å½“EdenåŒºå†æ¬¡æ»¡äº†ï¼Œä¼šå°†S1ä¸­çš„ä¸èƒ½æ¸…ç©ºçš„å¯¹è±¡å­˜åˆ°å¦å¤–ä¸€ä¸ªSurivorä¸­ï¼Œå¦‚S2ï¼ŒåŒæ—¶å°†EdenåŒºä¸­çš„ä¸èƒ½æ¸…ç©ºçš„å¯¹è±¡ï¼Œä¹Ÿå¤åˆ¶åˆ°S2ä¸­ï¼Œä¿è¯Edenå’ŒS1ï¼Œå‡è¢«æ¸…ç©ºã€‚ é‡å¤å¤šæ¬¡(é»˜è®¤15æ¬¡)Survivorä¸­æ²¡æœ‰è¢«æ¸…ç†çš„å¯¹è±¡ï¼Œåˆ™ä¼šå¤åˆ¶åˆ°è€å¹´ä»£Old(Tenured)åŒºä¸­ å½“OldåŒºæ»¡äº†ï¼Œåˆ™ä¼šå‡ºå‘ä¸€ä¸ªå®Œæ•´åœ°åƒåœ¾å›æ”¶(FullGC)ï¼Œä¹‹å‰æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶ç§°ä¸º(minorGC) JVMè°ƒä¼˜å’ŒFull GCåœ¨å¯¹JVMè°ƒä¼˜çš„è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤§ä¸€éƒ¨åˆ†å·¥ä½œå°±æ˜¯å¯¹äºFull GCçš„è°ƒèŠ‚ã€‚æœ‰å¦‚ä¸‹åŸå› å¯èƒ½å¯¼è‡´Full GCï¼š å¹´è€ä»£(Tenureed)è¢«å†™æ»¡ æŒä¹…ä»£(Perm)è¢«å†™æ»¡ System.gc()è¢«æ˜¾å¼è°ƒç”¨(ç¨‹åºå»ºè®®GCå¯åŠ¨ï¼Œä¸æ˜¯è°ƒç”¨GC) ä¸Šä¸€æ¬¡GCä¹‹åHeapçš„å„åŸŸåˆ†é…ç­–ç•¥åŠ¨æ€å˜åŒ–","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"ç†è§£","slug":"ç†è§£","permalink":"mumudadi.top/tags/%E7%90%86%E8%A7%A3/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"Javaè™šæ‹Ÿæœºå†…å­˜åˆ†æç†è§£","slug":"memory-analyze","date":"2019-05-02T07:22:01.000Z","updated":"2020-02-04T14:33:21.358Z","comments":true,"path":"2019/05/02/memory-analyze/","link":"","permalink":"mumudadi.top/2019/05/02/memory-analyze/","excerpt":"","text":"æ¦‚è¿°Javaè™šæ‹Ÿæœºçš„å†…å­˜å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªåŒºåŸŸï¼šæ ˆstackã€å †heapã€æ–¹æ³•åŒºmethod area æ ˆçš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š æ ˆæè¿°çš„æ˜¯æ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼Œæ¯ä¸ªæ–¹æ³•è¢«è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§(å­˜å‚¨å±€éƒ¨å˜é‡ã€æ“ä½œæ•°ã€æ–¹æ³•å‡ºå£ç­‰) JVMä¸ºæ¯ä¸ªçº¿ç¨‹åˆ›å»ºä¸€ä¸ªæ ˆï¼Œç”¨äºå­˜æ”¾è¯¥çº¿ç¨‹æ‰§è¡Œæ–¹æ³•çš„ä¿¡æ¯(å®é™…å‚æ•°ã€å±€éƒ¨å˜é‡ç­‰) æ ˆå±äºçº¿ç¨‹ç§æœ‰ï¼Œä¸èƒ½å®ç°çº¿ç¨‹é—´çš„å…±äº«ï¼ æ ˆçš„å†…å­˜ç‰¹æ€§æ˜¯â€œå…ˆè¿›åå‡ºï¼Œåè¿›å…ˆå‡ºâ€ æ ˆæ˜¯ç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…ï¼Œé€Ÿåº¦å¿«ï¼æ ˆæ˜¯ä¸€ä¸ªè¿ç»­çš„å†…å­˜ç©ºé—´ï¼ å †çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š å †ç”¨äºå­˜å‚¨åˆ›å»ºå¥½çš„å¯¹è±¡å’Œæ•°ç»„(æ•°ç»„ä¹Ÿæ˜¯å¯¹è±¡) JVMåªæœ‰ä¸€ä¸ªå †ï¼Œè¢«æ‰€æœ‰çº¿ç¨‹å…±äº« å †æ˜¯ä¸€ä¸ªä¸è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œåˆ†é…çµæ´»ï¼Œé€Ÿåº¦æ…¢ï¼ æ–¹æ³•åŒº(åˆå«é™æ€åŒº)ç‰¹ç‚¹å¦‚ä¸‹ï¼š JVMåªæœ‰ä¸€ä¸ªæ–¹æ³•åŒºï¼Œè¢«æ‰€æœ‰çº¿ç¨‹å…±äº«ï¼ æ–¹æ³•åŒºå®é™…ä¹Ÿæ˜¯å †ï¼Œåªæ˜¯ç”¨äºå­˜å‚¨ç±»ã€å¸¸é‡ç›¸å…³çš„ä¿¡æ¯ï¼ ç”¨æ¥å­˜æ”¾ç¨‹åºä¸­æ°¸è¿œæ˜¯ä¸å˜æˆ–å”¯ä¸€çš„å†…å®¹ã€‚(ç±»ä¿¡æ¯ã€Classå¯¹è±¡ã€‘ã€é™æ€å˜é‡ã€å­—ç¬¦ä¸²å¸¸é‡ç­‰) å†…å­˜åˆ†é…å›¾","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"ç†è§£","slug":"ç†è§£","permalink":"mumudadi.top/tags/%E7%90%86%E8%A7%A3/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"ç†è§£é¢å‘å¯¹è±¡","slug":"Objent-oriented-Understand","date":"2019-05-02T07:20:01.000Z","updated":"2020-02-04T14:32:57.360Z","comments":true,"path":"2019/05/02/Objent-oriented-Understand/","link":"","permalink":"mumudadi.top/2019/05/02/Objent-oriented-Understand/","excerpt":"","text":"æ¦‚è¿°é¢å‘è¿‡ç¨‹å’Œé¢å‘å¯¹è±¡éƒ½æ˜¯å¯¹è½¯ä»¶åˆ†æã€è®¾è®¡å’Œå¼€å‘çš„ä¸€ç§æ€æƒ³ï¼Œå®ƒçŸ¥é“ç€äººä»¬ä»¥ä¸åŒçš„æ–¹å¼å»åˆ†æã€è®¾è®¡å’Œå¼€å‘è½¯ä»¶ã€‚ é¢å‘è¿‡ç¨‹é¢å‘è¿‡ç¨‹æ€æƒ³æ€è€ƒé—®é¢˜æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆæ€è€ƒâ€œæ€ä¹ˆæŒ‰æ­¥éª¤å®ç°ï¼Ÿâ€å¹¶å°†æ­¥éª¤å¯¹åº”æˆæ–¹æ³•ï¼Œä¸€æ­¥ä¸€æ­¥ï¼Œæœ€ç»ˆå®Œæˆã€‚ è¿™ä¸ªé€‚åˆç®€å•ä»»åŠ¡ï¼Œä¸éœ€è¦è¿‡å¤šåä½œçš„æƒ…å†µä¸‹ã€‚æ¯”å¦‚ï¼Œå¦‚ä½•å¼€è½¦ï¼Ÿ ç‚¹ç« æŒ‚æŒ¡ è¸©æ²¹é—¨ å¼€è½¦ é¢å‘è¿‡ç¨‹é€‚åˆç®€å•ã€ä¸éœ€è¦åä½œçš„äº‹åŠ¡ã€‚ ä½†æ˜¯å½“æˆ‘ä»¬æ€è€ƒæ¯”è¾ƒå¤æ‚çš„é—®é¢˜ï¼Œæ¯”å¦‚â€œå¦‚ä½•é€ è½¦ï¼Ÿâ€ï¼Œå°±ä¼šå‘ç°åˆ—å‡º1234è¿™æ ·çš„æ­¥éª¤ï¼Œæ˜¯ä¸å¯èƒ½çš„ã€‚é‚£æ˜¯å› ä¸ºï¼Œé€ è½¦å¤ªå¤æ‚ï¼Œéœ€è¦å¾ˆå¯¹åä½œæ‰èƒ½å®Œæˆã€‚æ­¤æ—¶é¢å‘å¯¹è±¡æ€æƒ³å°±åº”è¿è€Œç”Ÿäº†ã€‚ é¢å‘å¯¹è±¡é¢å‘å¯¹è±¡(Object)æƒ³æƒ³æ›´å¥‘åˆäººçš„æ€ç»´æ¨¡å¼ã€‚æˆ‘ä»¬é¦–å…ˆæ€è€ƒçš„æ˜¯â€œæ€ä¹ˆè®¾è®¡è¿™ä¸ªäº‹åŠ¡ï¼Ÿâ€ æ¯”å¦‚æ€è€ƒé€ è½¦ï¼Œæˆ‘ä»¬å°±ä¼šå…ˆæ€è€ƒâ€œè½¦æ€ä¹ˆè®¾è®¡ï¼Ÿâ€ï¼Œè€Œä¸æ˜¯â€œæ€ä¹ˆæŒ‰æ­¥éª¤é€ è½¦çš„é—®é¢˜â€ã€‚ æ€»ç»“ éƒ½æ˜¯è§£å†³é—®é¢˜çš„æ€ç»´æ–¹å¼ï¼Œéƒ½æ˜¯ä»£ç ç»„ç»‡çš„æ–¹å¼ã€‚ è§£å†³ç®€å•é—®é¢˜å¯ä»¥ä½¿ç”¨é¢å‘è¿‡ç¨‹ è§£å†³å¤æ‚é—®é¢˜ï¼šå®è§‚ä¸Šä½¿ç”¨é¢å‘å¯¹è±¡æŠŠæ¡ï¼Œå¾®è§‚å¤„ç†ä¸Šä»ç„¶æ˜¯é¢å‘è¿‡ç¨‹ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"ç†è§£","slug":"ç†è§£","permalink":"mumudadi.top/tags/%E7%90%86%E8%A7%A3/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"é€ æˆå†…å­˜æ³„æ¼çš„æ“ä½œ","slug":"memory-leak","date":"2019-05-02T07:16:01.000Z","updated":"2020-02-04T14:32:36.284Z","comments":true,"path":"2019/05/02/memory-leak/","link":"","permalink":"mumudadi.top/2019/05/02/memory-leak/","excerpt":"","text":"å»ºè®®ï¼š åœ¨å®é™…å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé€ æˆç³»ç»Ÿçš„å´©æºƒã€‚å¦‚ä¸‹è¿™äº›æ“ä½œæˆ‘ä»¬åº”è¯¥æ³¨æ„è¿™äº›ä½¿ç”¨åœºæ™¯ã€‚ åˆ›å»ºå¤§é‡æ— ç”¨å¯¹è±¡ æ¯”å¦‚ï¼Œæˆ‘ä»¬åœ¨éœ€è¦å¤§é‡æ‹¼æ¥å­—ç¬¦ä¸²æ—¶ï¼Œä½¿ç”¨äº†Stringè€Œä¸æ˜¯StringBuilderã€‚ String str = &quot;&quot;; for (int i = 0; i&lt;10000; i++){ str += i; //ç›¸å½“äºäº§ç”Ÿäº†10000ä¸ªstringå¯¹è±¡ } é™æ€ç±»é›†åˆçš„ä½¿ç”¨ æƒ³HashMapã€Vectorã€Listç­‰çš„ä½¿ç”¨æœ€å®¹æ˜“å‡ºç°å†…å­˜æ³„æ¼ï¼Œè¿™äº›é™æ€å˜é‡çš„ç”Ÿå‘½å‘¨æœŸå’Œåº”ç”¨ç¨‹åºä¸€è‡´ï¼Œæ‰€æœ‰å¯¹è±¡Objectä¹Ÿä¸èƒ½è¢«é‡Šæ”¾ã€‚ å„ç§è¿æ¥å¯¹è±¡(IOæµå¯¹è±¡ã€æ•°æ®åº“è¿æ¥å¯¹è±¡ã€ç½‘ç»œè¿æ¥å¯¹è±¡)æœªå…³é—­ IOæµå¯¹è±¡ã€æ•°æ®åº“è¿æ¥å¯¹è±¡ã€ç½‘ç»œè¿æ¥å¯¹è±¡ç­‰è¿æ¥å¯¹è±¡å±äºç‰©ç†è¿æ¥ï¼Œå’Œç¡¬ç›˜æˆ–è€…ç½‘ç»œè¿æ¥ï¼Œä¸ä½¿ç”¨æ—¶ä¸€å®šè¦å…³é—­ã€‚ ç›‘å¬å™¨çš„ä½¿ç”¨ é‡Šæ”¾å¯¹è±¡æ—¶ï¼Œæ²¡æœ‰åˆ é™¤ç›¸åº”çš„ç›‘å¬å™¨ã€‚ è¦ç‚¹ï¼š ç¨‹åºå‘˜æ— æƒè°ƒç”¨åƒåœ¾å›æ”¶å™¨ã€‚ ç¨‹åºå‘˜å¯ä»¥è°ƒç”¨System.gc(),è¯¥æ–¹æ³•çŸ¥è¯†é€šçŸ¥ JVMï¼Œå¹¶ä¸æ˜¯è¿è¡Œåƒåœ¾å›æ”¶å™¨ï¼Œå°½é‡å°‘ç”¨ï¼Œä¼šç”³è¯·å¯åŠ¨Full GC ï¼Œæˆæœ¬é«˜ï¼Œå½±å“ç³»ç»Ÿæ€§èƒ½ã€‚ finalizeæ–¹æ³•ï¼Œæ˜¯Javaæä¾›ç»™ç¨‹åºå‘˜ç”¨æ¥é‡Šæ”¾å¯¹è±¡æˆ–èµ„æºçš„æ–¹æ³•ï¼Œä½†æ˜¯å°½é‡å°‘ç”¨ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"ç†è§£","slug":"ç†è§£","permalink":"mumudadi.top/tags/%E7%90%86%E8%A7%A3/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"å¸å¼•é¢è¯•å®˜è¦ç‚¹","slug":"enjoy","date":"2019-01-02T07:16:01.000Z","updated":"2020-02-04T14:38:41.443Z","comments":true,"path":"2019/01/02/enjoy/","link":"","permalink":"mumudadi.top/2019/01/02/enjoy/","excerpt":"","text":"é¢è¯•å®˜å–œæ¬¢ä»€ä¹ˆæ ·çš„äººï¼Ÿ ç§‰æ€§è‰¯å¥½ã€è°ˆåæ­£å¸¸çš„äºº ç²¾å¿ƒå‡†å¤‡è‡ªæˆ‘ä»‹ç»ï¼ˆçªå‡ºå®è·µç»éªŒã€è€Œä¸æ˜¯çˆ±å¥½ï¼ï¼‰ äº¤è°ˆå¤§æ–¹ï¼Œæ— å°åŠ¨ä½œï¼ˆåˆ«å¤ªç´§å¼ ï¼‰ è¡£ç€å¹²å‡€æ•´æ´ æ‡‚å¾—æ„Ÿæ©ã€‚ä¸è¯´å…¬å¸ã€è€å¸ˆã€è€æ¿ã€åŒäº‹çš„åè¯ å·¥ä½œæ€åº¦ç«¯æ­£ã€è®¤çœŸå·¥ä½œçš„äºº æ˜¯å¦ä¸€åˆ‡ä»¥å…¬å¸äº‹åŠ¡ä¸ºé‡ åŠ ç­é—®é¢˜ å¤§å¤§æ–¹æ–¹è°ˆè–ªæ°´ï¼ˆæ¥å—è–ªæ°´ä¸æ˜¯è¶Šä½è¶Šå¥½ï¼Œé€‚å½“çš„åŒºé—´ï¼‰ çƒ­çˆ±æœ¬èŒå·¥ä½œã€æœ‰åˆç†èŒä¸šè§„åˆ’ ä¸€å®šè¦æ˜ç¡®è‡ªå·±çš„èŒä¸šè§„åˆ’ï¼ä¸ä¼ä¸šå‘å±•ç†å¿µç›¸ä¸€è‡´ï¼Œåˆ‡å‹¿è¯´è‡ªå·±åªæ˜¯æ¥è¿‡åº¦ï¼ å·¥ä½œä¼šä¸ä¼šç»™ä½ å¸¦æ¥å¿«ä¹ è‡³å°‘è§„åˆ’3å¹´çš„èŒä¸šè§„åˆ’ï¼Œæ³¨æ„åˆç†ï¼ˆä¸æ”¾å¤§ï¼Œä¹Ÿä¸ç¼©å°ï¼‰ çƒ­çˆ±å­¦ä¹ ã€å–œæ¬¢æå‡è‡ªå·±çš„äºº è‡ªå·±å¹³æ—¶å¦‚ä½•å­¦ä¹ ï¼Ÿæœ‰å“ªäº›å­¦ä¹ ä¹ æƒ¯æˆ–è€…å­¦ä¹ æŠ€å·§ï¼Ÿè¯·æ¨èä¸€æœ¬ä½ æœ€è¿‘é˜…è¯»çš„ä¸“ä¸šä¹¦ç±ã€‚ å‚åŠ å’Œæœ¬èŒå·¥ä½œï¼Œç›¸å…³çš„åŸ¹è®­ï¼ˆåˆ©ç”¨ä¸šä½™æ—¶é—´ï¼Œå‘¨æœ«å’Œæ™šä¸Šï¼‰ æœ€è¿‘å¯¹XXXæ–°æŠ€æœ¯æ„Ÿå…´è¶£ï¼Œæ­£åœ¨ç ”ç©¶ æŠ€æœ¯ç‰›ï¼Œå®Œå…¨å¯ä»¥èƒœä»»å·¥ä½œ æœ€åä¸€ç‚¹ï¼Œç”¨å¿ƒå¯¹å¾…ï¼Œé¢è¯•å®˜ä¹Ÿèƒ½æ„Ÿå—åˆ°","categories":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"mumudadi.top/categories/%E9%9D%A2%E8%AF%95/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"mumudadi.top/tags/%E9%9D%A2%E8%AF%95/"}],"keywords":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"mumudadi.top/categories/%E9%9D%A2%E8%AF%95/"}]},{"title":"å†™å¥½ç®€å†çš„å…­å¤§è¦ç´ ","slug":"resume","date":"2019-01-02T07:16:01.000Z","updated":"2020-02-04T14:38:25.117Z","comments":true,"path":"2019/01/02/resume/","link":"","permalink":"mumudadi.top/2019/01/02/resume/","excerpt":"","text":"ç®€å†æ˜¯æ±‚èŒçš„åç‰‡ ç®€å†å¿…é¡»ï¼šä¸€å­—ä¸€å­—è‡ªå·±å†™ï¼Œä¸èƒ½æŠ„è¢­ï¼ è¦å¯¹è‡ªå·±å†™çš„å†…å®¹è´Ÿè´£ï¼Œå†™ä¹‹å‰å…ˆé—®è‡ªå·±æ˜¯å¦çœŸçš„ç†Ÿæ‚‰æŒæ¡ï¼Œäº†è§£è‡ªå·±å“ªä¸€å—çŸ¥è¯†ç‚¹æ¯”è¾ƒè–„å¼±ã€‚å‡†å¤‡ç®€å†çš„è¿‡ç¨‹ä¹Ÿæ˜¯å‡†å¤‡é¢è¯•çš„è¿‡ç¨‹ã€‚ åŸºæœ¬æƒ…å†µä»‹ç» å§“åã€æ€§åˆ«ã€å­¦å†ã€ä¸“ä¸šã€è”ç³»æ–¹å¼ç­‰ ä¸“ä¸šæŠ€èƒ½ æœ‰æ¡ç†çš„ç½—åˆ—è‡ªå·±çš„ä¸“ä¸šæŠ€èƒ½ æ±‚èŒæ„å‘ å‡†ç¡®çš„æ±‚èŒæ„å‘ å·¥ä½œç»éªŒå’Œé¡¹ç›®ç»éªŒ è¯¦ç»†çš„å·¥ä½œå±¥å†ã€é¡¹ç›®ç»éªŒ æ›¾è·å¥–åŠ± ç½—åˆ—ä¸€äº›å·¥ä½œç›¸å…³å¥–åŠ±ã€ä¸ç›¸å…³å¼•ä»¥ä¸ºè±ªçš„å¥–åŠ±ã€‚ è‡ªæˆ‘è¯„ä»· çªå‡ºå’Œå·¥ä½œç›¸å…³çš„è‡ªæˆ‘ç‰¹è´¨å’Œä¼˜ç‚¹ é¡¹ç›®ç»éªŒè¿™é‡Œéœ€è¦é‡ç‚¹å‡†å¤‡ï¼Œåšè¿‡çš„ä»€ä¹ˆç±»å‹çš„é¡¹ç›®æè¿°æ¸…æ¥šï¼Œå¼€å‘ç¯å¢ƒï¼Œé¡¹ç›®åŠŸèƒ½ï¼Œè¿ç”¨åˆ°å“ªäº›æŠ€æœ¯ï¼Œè´Ÿè´£å“ªä¸ªæ¨¡å—ï¼Œæ›¾ç»é‡åˆ°å“ªäº›é—®é¢˜ç­‰ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"ç®€å†","slug":"ç®€å†","permalink":"mumudadi.top/tags/%E7%AE%80%E5%8E%86/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"mumudadi.top/categories/%E6%8A%80%E6%9C%AF/"}]},{"title":"èŒåœºæˆåŠŸçš„æ ¸æ­¦å™¨","slug":"succeed","date":"2019-01-02T07:16:01.000Z","updated":"2020-02-04T14:38:50.103Z","comments":true,"path":"2019/01/02/succeed/","link":"","permalink":"mumudadi.top/2019/01/02/succeed/","excerpt":"","text":"èŒåœºæˆåŠŸçš„ä¸¤æ¡è…¿ ç¡¬å®åŠ›ï¼šæŠ€æœ¯èƒ½åŠ› èŒåœºçš„åŸºç¡€ å°ç™½é‡è§† éš¾ä»¥çŸ­æ—¶é—´æé«˜ ç¡¬å®åŠ›æ›´å¤šçš„æ˜¯å½±å“å·¥ä½œ è½¯å®åŠ›ï¼šæ²Ÿé€šã€ç®¡ç†èƒ½åŠ› èŒåœºæ™‹å‡çš„å…³é”® è§‚å¿µè®¤ä¸ºæ˜¯å¤©ç”Ÿä¸å¯å˜ï¼Œå¤§å¤šæ•°å¿½è§†è®­ç»ƒ çŸ­æ—¶é—´å¯ä»¥è¿…é€Ÿæé«˜ è½¯å®åŠ›ï¼Œå½±å“å·¥ä½œå’Œäººç”Ÿçš„æ–¹æ–¹é¢é¢ äººçš„è½¯å®åŠ›æœ‰7ç§èƒ½åŠ›ç»„æˆï¼š åŸºç¡€å®åŠ›ï¼ˆå½¢è±¡æ°”è´¨ã€å£°éŸ³é­…åŠ›ï¼‰ å†³å®šï¼šä½ çš„äººç”ŸåŸºç¡€ï¼ˆå©šå§»ã€æœ‹å‹åœˆï¼‰ äººé™…æ²Ÿé€šï¼ˆæ²Ÿé€šåŠ›ã€è¯´æœåŠ›ï¼‰ å†³å®šï¼šèƒ½å¦æ™‹å‡åˆ°èŒåœºä¸­å±‚ é¢†å¯¼èƒ½åŠ›ï¼ˆå½±å“åŠ›ã€é¢†å¯¼åŠ›ã€æƒ…å•†ï¼‰ å†³å®šï¼šèƒ½å¦æ™‹å‡åˆ°èŒåœºé«˜å±‚ é€‚ç”¨èŒƒå›´ï¼šæœ‰æŸé¡¹ç‰¹é•¿èƒ½åŠ›çš„äººä¸é€‚ç”¨æ­¤7A+ç†è®º è¿™7ç§å®åŠ›æ˜¯å®Œå…¨å¯ä»¥é€šè¿‡ä¸“ä¸šè®­ç»ƒï¼Œè¿…é€Ÿæå‡çš„ï¼äººçš„èƒ½åŠ›ä¸æ˜¯å¤©ç”Ÿçš„ã€‚å½¢è±¡æ°”è´¨åŠ›æµ‹è¯• å½¢è±¡æ°”è´¨æ˜¯äººçš„ç¬¬ä¸€åç‰‡ã€‚å¯¹å©šå§»ã€äº‹ä¸šæœ‰é‡å¤§å½±å“ æ—©æ™¨èµ·åºŠåï¼ŒèŠ±å¤šé•¿æ—¶é—´æ‰“ç†å½¢è±¡ï¼Ÿ A.ä¸‰ååˆ†é’Ÿ B.ååˆ†é’Ÿ C.ååˆ†é’Ÿä¸€ä¸‹ å¤šä¹…è¿›ä¸€æ¬¡ç†å‘åº—ï¼Ÿ A.ä¸€å‘¨ B.ä¸¤å‘¨ C.ä¸€ä¸ªæœˆ å½¢è±¡ç¤¼ä»ªåœ¨ç¤¾äº¤ä¸­çš„é‡è¦æ€§ A.éå¸¸é‡è¦ååˆ†ç²¾é€š B.å¾ˆé‡è¦ä½†æ˜¯ä¸æ‡‚ C.ä¸é‡è¦ä¹Ÿä¸æ‡‚ å£°éŸ³é­…åŠ›æµ‹è¯• å¥½çš„å£°éŸ³ã€æœ‰ç£æ€§çš„å£°éŸ³ï¼Œæ˜¯äººçš„ç¬¬äºŒåç‰‡ã€‚ å¾®ä¿¡å‘è¯­éŸ³æ—¶å¦‚ä½•è¯„ä»·è‡ªå·±çš„å£°éŸ³ï¼Ÿ A.æœ‰ç£æ€§æœ‰æ„ŸæŸ“åŠ› B.å‡‘åˆèƒ½å¬ C.ä¸å¥½å¬ æœ‰æ²¡æœ‰äººå¤¸èµè¿‡ä½ çš„å£°éŸ³ï¼Ÿ A.ç»å¸¸æœ‰ B.å¶å°” C.æ²¡æœ‰ å”±æ­Œæˆ–è€…å¤§å£°è®²è¯æ—¶ç”¨å“ªç§æ–¹å¼å‘¼å¸ï¼Ÿ A.ç†Ÿç»ƒè¿ç”¨èƒ¸è…¹å¼è”åˆå‘¼å¸æ³• B.äº†è§£ä¸“ä¸šå‘å£°æ–¹æ³•ä½†æ˜¯ä¸ä¼šç”¨ C.å®Œå…¨ç”¨å—“å­ æ²Ÿé€šåŠ›æµ‹è¯• å¥½çš„æ²Ÿé€šï¼Œè®©ä½ æœ‰å¥½çš„äººé™…å…³ç³»ï¼›ä¸æ²Ÿé€šï¼Œæ²¡æœ‹å‹ï¼Œæ²¡ä¼™ä¼´ã€‚é”™è¯¯æ²Ÿé€šï¼Œè®©ä½ ä¸¢å¤±ä¼™ä¼´ï¼Œä¸¢å¤±çˆ±äººã€‚ æ²Ÿé€šä¸­ï¼Œèƒ½å¦æ­£ç¡®è§‰çŸ¥ä»–äººçš„æƒ…ç»ªï¼Ÿ A.æ•é”çš„æ„Ÿè§‰åˆ° B.åçŸ¥åè§‰ C.å®Œå…¨ä¸çŸ¥é“ è¡¨è¾¾ä¸­ï¼Œç»™åˆ«äººç•™ä¸‹çš„å°è±¡æ˜¯ï¼Ÿ A.æ¡ç†æ¸…æ™°ï¼Œé€»è¾‘ä¸¥è°¨ B.æ„è¯†æµï¼Œæƒ³å“ªå„¿è¯´å“ªå„¿ C.åºŸè¯è¿ç¯‡ï¼Œä¸çŸ¥æ‰€äº‘ å¦‚æœä½ ä¸èµåŒå²³æ¯çš„æ„è§ï¼Œå¦‚ä½•åé¦ˆï¼Ÿ A.å¼•å¯¼å¯¹æ–¹å¯Ÿè§‰è‡ªå·±çš„é—®é¢˜ B.éƒ¨åˆ†è®¤åŒï¼Œé˜è¿°è‡ªå·±çš„è§‚ç‚¹ C.ç›´æ¥åå¯¹ è¯´æœåŠ›æµ‹è¯• äººçš„ä¸€ç”Ÿæ¯ä¸€å¤©éƒ½åœ¨ï¼šè¯´æœåˆ«äººã€è¢«åˆ«äººè¯´æœã€‚ ä½ è¦å»ºç«‹ä¸ªå›¢é˜Ÿï¼Œä½ èƒ½è¯´æœå¤šå°‘äººï¼Ÿ A.10äºº B.5äººä»¥ä¸‹ C.æ²¡äºº åŠ å…¥æ–°å›¢é˜Ÿï¼Œå¤šé•¿æ—¶é—´å¾—åˆ°å¤§å®¶è®¤åŒï¼Ÿ A.å¤© B.å‘¨ C.æœˆ æ–°è®¤è¯†ä¸€ä½å¥³ç¥ï¼ˆç”·ç¥ï¼‰ï¼Œå¤šä¹…å¯ä»¥çº¦å¥¹ï¼ˆä»–ï¼‰åƒé¥­æˆ–è€…çœ‹ç”µå½±ï¼Ÿ A.å‘¨ B.æœˆ C.å¹´ å½±å“åŠ›æµ‹è¯• èƒ½å¯¹å¤šå°‘äººè¯´è¯ï¼Œå°±èƒ½æœ‰å¤šå¤§æˆå°±ã€‚ å¤šå°‘äººè®¤è¯†ä½ ï¼Ÿ A.ä¸‡ B.åƒ C.ç™¾ æ›¾ç»åœ¨å¤šå°‘äººé¢å‰è¡¨è¾¾è‡ªå·±çš„æƒ³æ³•ï¼Ÿ A.ç™¾äººä»¥ä¸Š B.åä½æ•° C.ä¸ªä½æ•° è¡¨è¾¾è‡ªå·±æƒ³æ³•æ—¶ï¼Œæ°”æ°›äº’åŠ¨æ§åœºèƒ½åŠ›ï¼Ÿ A.éå¸¸å¥½ B.ä¸€èˆ¬ C.è¾ƒå·® é¢†å¯¼åŠ›æµ‹è¯• èƒ½é¢†å¯¼å¤šå°‘äººï¼ŒåŠ›é‡å°±æœ‰å¤šå¤§ã€‚ ä½ ç®¡ç†è¿‡çš„æœ€å¤§å›¢é˜Ÿå¤šå°‘äººï¼Ÿ A.50äººä»¥ä¸Š B.10-50 C.10ä»¥ä¸‹ å›¢é˜Ÿçš„æ‰§è¡Œç¨‹åº¦ï¼Ÿ A.ç™¾åˆ†ä¹‹ç™¾æ‰§è¡Œ B.ä¸å®Œå…¨æ‰§è¡Œ C.ä¸æ‰§è¡Œ ä½œä¸ºé¢†å¯¼ï¼Œä¸‹å±å¤šé•¿æ—¶é—´å¯ä»¥é¢†ä¼šä½ çš„æ„å›¾ï¼Ÿ A.å°æ—¶ B.å¤© C.å‘¨ æƒ…å•†æµ‹è¯• æƒ…å•†ä¸æ˜¯è§äººè¯´äººè¯ï¼Œè§é¬¼è¯´é¬¼è¯ã€‚æƒ…å•†æ˜¯é¢å¯¹å‹åŠ›å’Œé€†å¢ƒæ—¶ï¼Œæƒ…ç»ªæ§åˆ¶èƒ½åŠ›ã€‚ åšæŒæŸä¸ªä¸šä½™çˆ±å¥½çš„æœ€é•¿æ—¶é—´ï¼Ÿ A.å¹´ B.æœˆ C.å¤© å‡è®¾é¡¹ç›®ä¸€å‘¨åä¸Šçº¿ï¼Œéœ€è¦è¿™ä¸€å‘¨é€šå®µåŠ ç­ï¼Œä½ å¦‚ä½•å¤„ç†ï¼Ÿ A.ä¸»åŠ¨åŠ ç­ä¸æƒœä¸€åˆ‡ä»£ä»·ä¸€å®šå®Œæˆ B.æœä»é¢†å¯¼å®‰æ’æ„¿æ„åŠ ç­ C.æ­£å¸¸ä¸Šä¸‹ç­ï¼Œèƒ½åšå¤šå°‘æ˜¯å¤šå°‘ é¢ä¸´é‡å¤§æŒ«æŠ˜ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ A.ä¹è§‚ç§¯æå‹‡æ•¢é¢å¯¹ B.æƒ…ç»ªåå¤ å¾—è¿‡ä¸”è¿‡ C.æ¶ˆæé¢å¯¹ é€ƒé¿é—®é¢˜ è½¯å®åŠ›å†³å®šäººç”Ÿé«˜åº¦ è½¯å®åŠ›å¯ä»¥è®­ç»ƒï¼Œå¿«é€Ÿæé«˜ è½¯å®åŠ›çŸ­æ¿ï¼Œå†³å®šä½ çš„å‘å±• è¿½æ±‚ç»¼åˆï¼Œä¸è¿½æ±‚æŸä¸€é¡¹ç‰¹ç‰›","categories":[{"name":"èŒåœº","slug":"èŒåœº","permalink":"mumudadi.top/categories/%E8%81%8C%E5%9C%BA/"}],"tags":[{"name":"èŒåœº","slug":"èŒåœº","permalink":"mumudadi.top/tags/%E8%81%8C%E5%9C%BA/"}],"keywords":[{"name":"èŒåœº","slug":"èŒåœº","permalink":"mumudadi.top/categories/%E8%81%8C%E5%9C%BA/"}]},{"title":"æ¥åˆ°é¢è¯•é‚€è¯·åéœ€è¦å‡†å¤‡","slug":"interview","date":"2019-01-02T07:16:01.000Z","updated":"2020-02-04T14:38:31.946Z","comments":true,"path":"2019/01/02/interview/","link":"","permalink":"mumudadi.top/2019/01/02/interview/","excerpt":"","text":"äº†è§£å…¬å¸ å…¬å¸æ‰€åœ¨çš„è¡Œä¸šæ˜¯å¦æœ‰å‰æ™¯ï¼Ÿ å…¬å¸å†å²å’Œç»“æ„ å¯ä»¥é€šè¿‡å¤©çœ¼æŸ¥ï¼Œä¼æŸ¥æŸ¥ç­‰ã€‚é¿å…è¿›å…¥ä¼ é”€å…¬å¸ï¼ŒåŸ¹è®­å…¬å¸ï¼ å…¬å¸äº§å“å’Œé¡¹ç›®æœ‰å“ªäº›ï¼Ÿ å¯ä»¥é€šè¿‡å…¬å¸å®˜ç½‘æŸ¥çœ‹ï¼Œå…¬å¸éœ€è¦æ‹›è˜å¿—åŒé“åˆçš„äººï¼Œå¤šäº†è§£ä¸€äº›å’Œé¢è¯•å®˜ä¹Ÿæœ‰æ›´å¤šçš„å…±åŒè¯é¢˜ã€‚ å†å›è¿‡å¤´è®¤çœŸçœ‹å…¬å¸çš„æ‹›è˜ä¿¡æ¯ï¼Œä¾§é‡ç‚¹è¦å“ªäº›æŠ€æœ¯ç»éªŒä¼˜å…ˆï¼ˆé‡ç‚¹å¤ä¹ ï¼‰ï¼ŒåŸºæœ¬è¦æ±‚ã€‚ç¡®ä¿æ¯ä¸€æ¡å¿ƒé‡Œæœ‰æ•°ã€‚ ç ”ç©¶è¯¥å…¬å¸äº§å“ï¼Œå¹¶æå‡ºé—®é¢˜ ç”¨æˆ·ç¾¤ä½“ PCç«¯åŠŸèƒ½ç ”ç©¶ APPç«¯åŠŸèƒ½ç ”ç©¶ å¯¹æ¯”åŒç±»äº§å“æœ‰å“ªäº›ï¼Ÿ æœ€åä¸€ç‚¹ï¼Œç”¨å¿ƒå»åšï¼","categories":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"mumudadi.top/categories/%E9%9D%A2%E8%AF%95/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"mumudadi.top/tags/%E9%9D%A2%E8%AF%95/"}],"keywords":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"mumudadi.top/categories/%E9%9D%A2%E8%AF%95/"}]},{"title":"æŠ€æœ¯é¢è¯•ä¸è¯¥é—®çš„4å¤§é—®é¢˜","slug":"notInquire","date":"2019-01-02T07:16:01.000Z","updated":"2020-02-04T14:38:57.185Z","comments":true,"path":"2019/01/02/notInquire/","link":"","permalink":"mumudadi.top/2019/01/02/notInquire/","excerpt":"","text":"æŠ€æœ¯é¢è¯•å°±é—®æŠ€æœ¯ç›¸å…³çš„é—®é¢˜åˆ‡å‹¿åé¢˜å»é—®ä¸€äº›ä¸ç›¸å…³çš„é—®é¢˜ï¼Œä¾‹å¦‚ï¼š æˆ‘èƒ½æ‹¿å¤šå°‘å·¥èµ„ï¼Ÿ äº”é™©ä¸€é‡‘æœ‰æ²¡æœ‰ï¼Ÿäº¤é€šè¡¥åŠ©æœ‰æ²¡æœ‰ï¼Ÿ å…¬å¸ç»å¸¸åŠ ç­å—ï¼Ÿ æ‚¨è§‰å¾—æˆ‘ä»¬ä»Šå¤©èƒ½é¢ä¸Šå—ï¼Ÿ æœ‰äº›é—®é¢˜å¯ä»¥ä¸‹æ¥é—®äººäº‹ é¢è¯•å³å°†ç»“æŸï¼Œé¢è¯•å®˜é—®ï¼šæ‚¨è¿˜æœ‰é—®é¢˜å—ï¼Ÿè¿™æ—¶å€™ä¸€å®šè¦å»æé—®ï¼Œä¾‹å¦‚ï¼šå…¬å¸æŸä¸ªé¡¹ç›®è¿ç”¨äº†Hadoopæˆ‘ä¸å¤ªç†Ÿæ‚‰ï¼Œæ‚¨èƒ½è¯´è¯´å—","categories":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"mumudadi.top/categories/%E9%9D%A2%E8%AF%95/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"mumudadi.top/tags/%E9%9D%A2%E8%AF%95/"}],"keywords":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"mumudadi.top/categories/%E9%9D%A2%E8%AF%95/"}]}]}