<!doctype html><html><head><title>Druid SQL Stat</title><meta http-equiv="Content-Type" content="text/html; charset=utf8"><link href="css/bootstrap.min.css" rel="stylesheet"><link href="css/style.css" rel="stylesheet"><script src="js/jquery.min.js"></script><script src="js/lang.js" charset="utf8"></script><script src="js/common.js" charset="utf8"></script><script src="js/bootstrap.min.js" charset="utf8"></script><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="木木" type="application/atom+xml"></head><body><div class="container-fluid"><div class="row-fluid"><div class="span12"><h3>SQL Stat <a href="sql.json" target="_blank">View JSON API</a> <span class="pull-right" style="font-size:16px;margin-right:20px"><label langkey="RefreshPeriod" class="lang" style="display:inline" for="refreshSecondsSelect">Refresh Period</label> <select id="refreshSecondsSelect" class="refresh-seconds-select btn" style="width:80px" onchange="druid.sql.refreshSeconds=parseInt(this.options[this.options.selectedIndex].value)"><option value="5" selected>5s</option><option value="10">10s</option><option value="20">20s</option><option value="30">30s</option><option value="60">60s</option></select> <a id="btnSuspendRefresh" langkey="SuspendRefresh" class="btn btn-primary lang" href="javascript:druid.sql.switchSuspendRefresh();">Suspend Refresh</a></span></h3><table id="dataTable" class="table table-bordered table-striped responsive-utilities"><thead><tr><th>N</th><th><a id="th-SQL">SQL</a></th><th width="50"><a id="th-ExecuteCount" class="lang" langkey="ExecuteCount">ExecCount</a></th><th width="50"><a id="th-TotalTime" class="lang" langkey="ExecuteTimeMillis">ExecTime</a></th><th width="50" class="langTitle" langkey="MaxTimespanDesc" title="Execute Time Millis Max"><a id="th-MaxTimespan" class="lang" langkey="MaxTimespan">ExecMax</a></th><th width="50" class="langTitle" langkey="InTransactionCountDesc" title="Execute In Transaction Count"><a id="th-InTransactionCount" class="lang" langkey="InTransactionCount">Txn</a></th><th width="50"><a id="th-ErrorCount" class="lang" langkey="ErrorCount">Error</a></th><th width="50"><a id="th-EffectedRowCount" class="lang" langkey="JdbcUpdateCount">Update</a></th><th width="50"><a id="th-FetchRowCount" class="lang" langkey="JdbcFetchRowCount">FetchRow</a></th><th width="50"><a id="th-RunningCount" class="lang" langkey="RunningCount">Running</a></th><th width="50"><a id="th-ConcurrentMax" class="lang" langkey="ConcurrentMax">Concurrent</a></th><th align="left" width="100"><span class="lang" langkey="ExecHisto">ExecHisto</span><br>[ <a id="th-Histogram[0]" class="langTitle" langkey="count1ms" title="count of '0-1 ms'">-</a> <a id="th-Histogram[1]" class="langTitle" langkey="count10ms" title="count of '1-10 ms'">-</a> <a id="th-Histogram[2]" class="langTitle" langkey="count100ms" title="count of '10-100 ms'">-</a> <a id="th-Histogram[3]" class="langTitle" langkey="count1s" title="count of '100ms-1 s'">-</a> <a id="th-Histogram[4]" class="langTitle" langkey="count10s" title="count of '1-10 s'">-</a> <a id="th-Histogram[5]" class="langTitle" langkey="count100s" title="count of '10-100 s'">-</a> <a id="th-Histogram[6]" class="langTitle" langkey="count1000s" title="count of '100-1000 s'">-</a> <a id="th-Histogram[7]" class="langTitle" langkey="countBg1000s" title="count of '> 1000 s'">-</a> ]</th><th align="left" width="100"><span class="lang" langkey="ExecRsHisto">ExecRsHisto</span><br>[ <a id="th-ExecuteAndResultHoldTimeHistogram[0]" class="langTitle" langkey="count1ms" title="count of '0-1 ms'">-</a> <a id="th-ExecuteAndResultHoldTimeHistogram[1]" class="langTitle" langkey="count10ms" title="count of '1-10 ms'">-</a> <a id="th-ExecuteAndResultHoldTimeHistogram[2]" class="langTitle" langkey="count100ms" title="count of '10-100 ms'">-</a> <a id="th-ExecuteAndResultHoldTimeHistogram[3]" class="langTitle" langkey="count1s" title="count of '100ms-1s'">-</a> <a id="th-ExecuteAndResultHoldTimeHistogram[4]" class="langTitle" langkey="count10s" title="count of '1-10 s'">-</a> <a id="th-ExecuteAndResultHoldTimeHistogram[5]" class="langTitle" langkey="count100s" title="count of '10-100 s'">-</a> <a id="th-ExecuteAndResultHoldTimeHistogram[6]" class="langTitle" langkey="count1000s" title="count of '100-1000 s'">-</a> <a id="th-ExecuteAndResultHoldTimeHistogram[7]" class="langTitle" langkey="countBg1000s" title="count of '> 1000 s'">-</a> ]</th><th align="left" width="100"><span class="lang" langkey="FetchRowHisto">FetchRowHisto</span><br>[ <a id="th-FetchRowCountHistogram[0]" class="langTitle" langkey="fetch0" title="count of '0 FetchRow'">-</a> <a id="th-FetchRowCountHistogram[1]" class="langTitle" langkey="fetch9" title="count of '1-9 FetchRow'">-</a> <a id="th-FetchRowCountHistogram[2]" class="langTitle" langkey="fetch99" title="count of '10-99 FetchRow'">-</a> <a id="th-FetchRowCountHistogram[3]" class="langTitle" langkey="fetch999" title="count of '100-999 FetchRow'">-</a> <a id="th-FetchRowCountHistogram[4]" class="langTitle" langkey="fetch9999" title="count of '1000-9999 FetchRow'">-</a> <a id="th-FetchRowCountHistogram[5]" class="langTitle" langkey="fetch99999" title="count of '> 9999 FetchRow'">-</a> ]</th><th align="left" width="100"><span class="lang" langkey="UpdateHisto">UpdateHisto</span><br>[ <a id="th-EffectedRowCountHistogram[0]" class="langTitle" langkey="update0" title="count of '0 UpdateCount'">-</a> <a id="th-EffectedRowCountHistogram[1]" class="langTitle" langkey="update9" title="count of '1-9 UpdateCount'">-</a> <a id="th-EffectedRowCountHistogram[2]" class="langTitle" langkey="update99" title="count of '10-99 UpdateCount'">-</a> <a id="th-EffectedRowCountHistogram[3]" class="langTitle" langkey="update999" title="count of '100-999 UpdateCount'">-</a> <a id="th-EffectedRowCountHistogram[4]" class="langTitle" langkey="update9999" title="count of '1000-9999 UpdateCount'">-</a> <a id="th-EffectedRowCountHistogram[5]" class="langTitle" langkey="update99999" title="count of '> 9999 UpdateCount'">-</a> ]</th></tr></thead><tbody></tbody></table></div></div></div><script>$.namespace("druid.sql"),druid.sql=function(){var e=druid.common.getUrlVar("dataSourceId");return{init:function(){$("#dataTable th a").click(function(e){druid.common.setOrderBy(e.target.id.substring(3))}),druid.common.buildHead(2),druid.common.ajaxuri=e?"sql.json?dataSourceId="+e+"&":"sql.json?",druid.common.handleCallback=druid.sql.handleAjaxResult,druid.common.setOrderBy("SQL"),druid.sql.controlRefresh()},controlRefresh:function(){druid.sql.refreshSeconds||(druid.sql.refreshSeconds=5),druid.sql.suspendedSeconds||(druid.sql.suspendedSeconds=0),druid.sql.suspendedSeconds+=5,druid.sql.disableAutoRefresh||druid.sql.suspendedSeconds>=druid.sql.refreshSeconds&&(druid.sql.suspendedSeconds=0,druid.common.ajaxRequestForBasicInfo()),setTimeout(druid.sql.controlRefresh,5e3)},switchSuspendRefresh:function(){druid.sql.disableAutoRefresh=!druid.sql.disableAutoRefresh,druid.sql.disableAutoRefresh?$("#btnSuspendRefresh").addClass("btn-warning").removeClass("btn-primary"):$("#btnSuspendRefresh").addClass("btn-primary").removeClass("btn-warning")},disableAutoRefresh:!1,refreshSeconds:5,suspendedSeconds:0,handleAjaxResult:function(e){var d=e.Content;if(null!=d){for(var t=document.getElementById("dataTable");1<t.rows.length;)t.deleteRow(1);for(var r="",s=0;s<d.length;s++){var n=d[s],a=n.SQL.replace(/\"/g,"'").replace(/</g,"&lt;").replace(/>/g,"&gt;");t.insertRow(-1);r+="<tr>",r+="<td>"+(s+1)+"</td>",r+='<td><a data-dismiss="alert"  title="'+a+'" target="_blank" href="sql-detail.html?sqlId='+n.ID+'">'+druid.common.subSqlString(n.SQL,25)+"</a></td>",r+="<td>"+replace(n.ExecuteCount)+"</td>",r+="<td>"+replace(n.TotalTime)+"</td>";var o=n.MaxTimespan;null!=n.LastSlowParameters&&0<n.LastSlowParameters.length&&(o='<a target="_blank" style="color:red" href="sql-detail.html?sqlId='+n.ID+'">'+n.MaxTimespan+"</a>"),r+="<td>"+replace(o)+"</td>",r+="<td>"+replace(n.InTransactionCount)+"</td>",r+="<td>"+replace(n.ErrorCount)+"</td>",r+="<td>"+replace(n.EffectedRowCount)+"</td>",r+="<td>"+replace(n.FetchRowCount)+"</td>",r+="<td>"+replace(n.RunningCount)+"</td>",r+="<td>"+replace(n.ConcurrentMax)+"</td>",r+="<td>["+n.Histogram+"]</td>",r+="<td>["+n.ExecuteAndResultHoldTimeHistogram+"]</td>",r+="<td>["+n.FetchRowCountHistogram+"]</td>",r+="<td>["+n.EffectedRowCountHistogram+"]</td>",r+="</tr>"}$("#dataTable tbody").html(r),druid.common.stripes()}}}}(),$(document).ready(function(){druid.sql.init()})</script></body></html>