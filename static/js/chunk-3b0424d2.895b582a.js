"use strict";(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3b0424d2"],{"5cfa":function(e,t,r){r.r(t);var a=r("fcb7"),n=r("ca17"),s=r.n(n),l=(r("542c"),{name:"Dept",components:{Treeselect:s.a},data:function(){return{loading:!0,deptList:[],deptOptions:[],title:"",open:!1,statusOptions:[],queryParams:{deptName:void 0,status:void 0},form:{},rules:{parentId:[{required:!0,message:"上级部门不能为空",trigger:"blur"}],deptName:[{required:!0,message:"部门名称不能为空",trigger:"blur"}],orderNum:[{required:!0,message:"菜单顺序不能为空",trigger:"blur"}],email:[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],phone:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]}}},created:function(){var t=this;this.getList(),this.getDicts("sys_normal_disable").then(function(e){t.statusOptions=e.data})},methods:{getList:function(){var t=this;this.loading=!0,Object(a.d)(this.queryParams).then(function(e){t.deptList=e.data,t.loading=!1})},getTreeselect:function(){var t=this;Object(a.f)().then(function(e){t.deptOptions=e.data})},statusFormat:function(e){return this.selectDictLabel(this.statusOptions,e.status)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={deptId:void 0,parentId:void 0,deptName:void 0,orderNum:void 0,leader:void 0,phone:void 0,email:void 0,status:"0"},this.resetForm("form")},handleQuery:function(){this.getList()},handleAdd:function(e){this.reset(),this.getTreeselect(),null!=e&&(this.form.parentId=e.deptId),this.open=!0,this.title="添加部门"},handleUpdate:function(e){var t=this;this.reset(),this.getTreeselect(),Object(a.c)(e.deptId).then(function(e){t.form=e.data,t.open=!0,t.title="修改部门"})},submitForm:function(){var t=this;this.$refs.form.validate(function(e){e&&(null!=t.form.deptId?Object(a.g)(t.form).then(function(e){200===e.code?(t.msgSuccess("修改成功"),t.open=!1,t.getList()):t.msgError(e.msg)}):Object(a.a)(t.form).then(function(e){200===e.code?(t.msgSuccess("新增成功"),t.open=!1,t.getList()):t.msgError(e.msg)}))})},handleDelete:function(e){var t=this;this.$confirm('是否确认删除名称为"'+e.deptName+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return Object(a.b)(e.deptId)}).then(function(){t.getList(),t.msgSuccess("删除成功")}).catch(function(){})}}}),o=r("2877"),i=Object(o.a)(l,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("el-form",{attrs:{inline:!0}},[r("el-form-item",{attrs:{label:"部门名称"}},[r("el-input",{attrs:{placeholder:"请输入部门名称",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.queryParams.deptName,callback:function(e){t.$set(t.queryParams,"deptName",e)},expression:"queryParams.deptName"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"状态"}},[r("el-select",{attrs:{placeholder:"部门状态",clearable:"",size:"small"},model:{value:t.queryParams.status,callback:function(e){t.$set(t.queryParams,"status",e)},expression:"queryParams.status"}},t._l(t.statusOptions,function(e){return r("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})}),1)],1),t._v(" "),r("el-form-item",[r("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:t.handleQuery}},[t._v("搜索")]),t._v(" "),r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dept:add"],expression:"['system:dept:add']"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:t.handleAdd}},[t._v("新增")])],1)],1),t._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.deptList,"row-key":"deptId","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[r("el-table-column",{attrs:{prop:"deptName",label:"部门名称",width:"200"}}),t._v(" "),r("el-table-column",{attrs:{prop:"orderNum",label:"排序",width:"200"}}),t._v(" "),r("el-table-column",{attrs:{prop:"status",label:"状态",formatter:t.statusFormat,width:"100"}}),t._v(" "),r("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t.parseTime(e.row.createTime)))])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dept:edit"],expression:"['system:dept:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(){return t.handleUpdate(e.row)}}},[t._v("修改")]),t._v(" "),r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dept:add"],expression:"['system:dept:add']"}],attrs:{size:"mini",type:"text",icon:"el-icon-plus"},on:{click:function(){return t.handleAdd(e.row)}}},[t._v("新增")]),t._v(" "),0!=e.row.parentId?r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dept:remove"],expression:"['system:dept:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(){return t.handleDelete(e.row)}}},[t._v("删除")]):t._e()]}}])})],1),t._v(" "),r("el-dialog",{attrs:{title:t.title,visible:t.open,width:"600px"},on:{"update:visible":function(e){t.open=e}}},[r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[r("el-row",[0!==t.form.parentId?r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"上级部门",prop:"parentId"}},[r("treeselect",{attrs:{options:t.deptOptions,placeholder:"选择上级部门"},model:{value:t.form.parentId,callback:function(e){t.$set(t.form,"parentId",e)},expression:"form.parentId"}})],1)],1):t._e(),t._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"部门名称",prop:"deptName"}},[r("el-input",{attrs:{placeholder:"请输入部门名称"},model:{value:t.form.deptName,callback:function(e){t.$set(t.form,"deptName",e)},expression:"form.deptName"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"显示排序",prop:"orderNum"}},[r("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:t.form.orderNum,callback:function(e){t.$set(t.form,"orderNum",e)},expression:"form.orderNum"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"负责人",prop:"leader"}},[r("el-input",{attrs:{placeholder:"请输入负责人",maxlength:"20"},model:{value:t.form.leader,callback:function(e){t.$set(t.form,"leader",e)},expression:"form.leader"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[r("el-input",{attrs:{placeholder:"请输入联系电话",maxlength:"11"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{placeholder:"请输入邮箱",maxlength:"50"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"部门状态"}},[r("el-radio-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusOptions,function(e){return r("el-radio",{key:e.dictValue,attrs:{label:e.dictValue}},[t._v(t._s(e.dictLabel))])}),1)],1)],1)],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),t._v(" "),r("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)},[],!1,null,null,null);t.default=i.exports},fcb7:function(e,t,r){r.d(t,"d",function(){return n}),r.d(t,"c",function(){return s}),r.d(t,"f",function(){return l}),r.d(t,"e",function(){return o}),r.d(t,"a",function(){return i}),r.d(t,"g",function(){return d}),r.d(t,"b",function(){return c});var a=r("b775");function n(e){return Object(a.a)({url:"/system/dept/list.json",method:"get",params:e})}function s(e){return Object(a.a)({url:"/system/dept/"+e,method:"get"})}function l(){return Object(a.a)({url:"/system/dept/treeselect.json",method:"get"})}function o(e){return Object(a.a)({url:"/system/dept/roleDeptTreeselect/"+e,method:"get"})}function i(e){return Object(a.a)({url:"/system/dept",method:"post",data:e})}function d(e){return Object(a.a)({url:"/system/dept",method:"put",data:e})}function c(e){return Object(a.a)({url:"/system/dept/"+e,method:"delete"})}}}]);