"use strict";(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5f889f89"],{"202d":function(e,t,i){i.r(t);var o=i("b775");var n=[],a=i("bd86"),r=(i("c5f6"),i("5f87")),l=i("953d"),s=(i("a7539"),i("8096"),i("14e1"),[["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{align:[]}],["clean"],["link","image","video"]]),c={props:{value:{type:String},maxSize:{type:Number,default:4e3}},components:{quillEditor:l.quillEditor},data:function(){var e,t;return t={content:this.value,uploadImgUrl:"",editorOption:(e={placeholder:"",theme:"snow"},Object(a.a)(e,"placeholder","请输入内容"),Object(a.a)(e,"modules",{toolbar:{container:s,handlers:{image:function(e){e?document.querySelector(".quill-img input").click():this.quill.format("image",!1)}}}}),e)},Object(a.a)(t,"uploadImgUrl","/prod-api/common/upload"),Object(a.a)(t,"headers",{Authorization:"Bearer "+Object(r.a)()}),t},watch:{value:function(){this.content=this.value}},methods:{onEditorBlur:function(){},onEditorFocus:function(){},onEditorChange:function(){this.$emit("input",this.content)},quillImgBefore:function(e){var t=e.type;return"image/jpeg"===t||"image/png"===t||(this.$message.error("请插入图片类型文件(jpg/jpeg/png)"),!1)},quillImgSuccess:function(e){var t=this.$refs.quillEditor.quill;if(200==e.code){var i=t.getSelection().index;t.insertEmbed(i,"image",e.url),t.setSelection(i+1)}else this.$message.error("图片插入失败")},uploadError:function(){this.$message.error("图片插入失败")}}},u=(i("4ff4"),i("2877")),m={name:"Notice",components:{Editor:Object(u.a)(c,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-upload",{staticClass:"avatar-uploader quill-img",attrs:{action:t.uploadImgUrl,name:"file",headers:t.headers,"show-file-list":!1,"on-success":t.quillImgSuccess,"on-error":t.uploadError,"before-upload":t.quillImgBefore,accept:".jpg,.jpeg,.png,.gif"}}),t._v(" "),i("quill-editor",{ref:"quillEditor",staticClass:"editor",attrs:{options:t.editorOption},on:{blur:function(e){return t.onEditorBlur(e)},focus:function(e){return t.onEditorFocus(e)},change:function(e){return t.onEditorChange(e)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)},n,!1,null,null,null).exports},data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,total:0,noticeList:[],title:"",open:!1,statusOptions:[],typeOptions:[],queryParams:{pageNum:1,pageSize:10,noticeTitle:void 0,createBy:void 0,status:void 0},form:{},rules:{noticeTitle:[{required:!0,message:"公告标题不能为空",trigger:"blur"}],noticeType:[{required:!0,message:"公告类型不能为空",trigger:"blur"}]}}},created:function(){var t=this;this.getList(),this.getDicts("sys_notice_status").then(function(e){t.statusOptions=e.data}),this.getDicts("sys_notice_type").then(function(e){t.typeOptions=e.data})},methods:{getList:function(){var e,t=this;this.loading=!0,(e=this.queryParams,Object(o.a)({url:"/system/notice/list.json",method:"get",params:e})).then(function(e){t.noticeList=e.rows,t.total=e.total,t.loading=!1})},statusFormat:function(e){return this.selectDictLabel(this.statusOptions,e.status)},typeFormat:function(e){return this.selectDictLabel(this.typeOptions,e.noticeType)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={noticeId:void 0,noticeTitle:void 0,noticeType:void 0,noticeContent:void 0,status:"0"},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map(function(e){return e.noticeId}),this.single=1!=e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加公告"},handleUpdate:function(e){var t=this;this.reset();var i,n=e.noticeId||this.ids;(i=n,Object(o.a)({url:"/system/notice/"+i,method:"get"})).then(function(e){t.form=e.data,t.open=!0,t.title="修改公告"})},submitForm:function(){var n=this;this.$refs.form.validate(function(e){var t,i;e&&(null!=n.form.noticeId?(i=n.form,Object(o.a)({url:"/system/notice",method:"put",data:i})).then(function(e){200===e.code?(n.msgSuccess("修改成功"),n.open=!1,n.getList()):n.msgError(e.msg)}):(t=n.form,Object(o.a)({url:"/system/notice",method:"post",data:t})).then(function(e){200===e.code?(n.msgSuccess("新增成功"),n.open=!1,n.getList()):n.msgError(e.msg)}))})},handleDelete:function(e){var t=this,i=e.noticeId||this.ids;this.$confirm('是否确认删除公告编号为"'+i+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return e=i,Object(o.a)({url:"/system/notice/"+e,method:"delete"});var e}).then(function(){t.getList(),t.msgSuccess("删除成功")}).catch(function(){})}}},d=Object(u.a)(m,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"queryForm",attrs:{model:t.queryParams,inline:!0,"label-width":"68px"}},[i("el-form-item",{attrs:{label:"公告标题",prop:"noticeTitle"}},[i("el-input",{attrs:{placeholder:"请输入公告标题",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.queryParams.noticeTitle,callback:function(e){t.$set(t.queryParams,"noticeTitle",e)},expression:"queryParams.noticeTitle"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"操作人员",prop:"createBy"}},[i("el-input",{attrs:{placeholder:"请输入操作人员",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.queryParams.createBy,callback:function(e){t.$set(t.queryParams,"createBy",e)},expression:"queryParams.createBy"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"类型",prop:"noticeType"}},[i("el-select",{attrs:{placeholder:"公告类型",clearable:"",size:"small"},model:{value:t.queryParams.noticeType,callback:function(e){t.$set(t.queryParams,"noticeType",e)},expression:"queryParams.noticeType"}},t._l(t.typeOptions,function(e){return i("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})}),1)],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:t.handleQuery}},[t._v("搜索")]),t._v(" "),i("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:t.resetQuery}},[t._v("重置")])],1)],1),t._v(" "),i("el-row",{staticClass:"mb8",attrs:{gutter:10}},[i("el-col",{attrs:{span:1.5}},[i("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:notice:add"],expression:"['system:notice:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:t.handleAdd}},[t._v("新增")])],1),t._v(" "),i("el-col",{attrs:{span:1.5}},[i("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:notice:edit"],expression:"['system:notice:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:t.single},on:{click:t.handleUpdate}},[t._v("修改")])],1),t._v(" "),i("el-col",{attrs:{span:1.5}},[i("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:notice:remove"],expression:"['system:notice:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:t.multiple},on:{click:t.handleDelete}},[t._v("删除")])],1)],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.noticeList},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"序号",align:"center",prop:"noticeId",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{label:"公告标题",align:"center",prop:"noticeTitle","show-overflow-tooltip":!0}}),t._v(" "),i("el-table-column",{attrs:{label:"公告类型",align:"center",prop:"noticeType",formatter:t.typeFormat,width:"100"}}),t._v(" "),i("el-table-column",{attrs:{label:"状态",align:"center",prop:"status",formatter:t.statusFormat,width:"100"}}),t._v(" "),i("el-table-column",{attrs:{label:"创建者",align:"center",prop:"createBy",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t.parseTime(e.row.createTime,"{y}-{m}-{d}")))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:notice:edit"],expression:"['system:notice:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(){return t.handleUpdate(e.row)}}},[t._v("修改")]),t._v(" "),i("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:notice:remove"],expression:"['system:notice:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:0<t.total,expression:"total>0"}],attrs:{total:t.total,page:t.queryParams.pageNum,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.getList}}),t._v(" "),i("el-dialog",{attrs:{title:t.title,visible:t.open,width:"780px"},on:{"update:visible":function(e){t.open=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"公告标题",prop:"noticeTitle"}},[i("el-input",{attrs:{placeholder:"请输入公告标题"},model:{value:t.form.noticeTitle,callback:function(e){t.$set(t.form,"noticeTitle",e)},expression:"form.noticeTitle"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"公告类型",prop:"noticeType"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.noticeType,callback:function(e){t.$set(t.form,"noticeType",e)},expression:"form.noticeType"}},t._l(t.typeOptions,function(e){return i("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})}),1)],1)],1),t._v(" "),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"状态"}},[i("el-radio-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusOptions,function(e){return i("el-radio",{key:e.dictValue,attrs:{label:e.dictValue}},[t._v(t._s(e.dictLabel))])}),1)],1)],1),t._v(" "),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"内容"}},[i("Editor",{model:{value:t.form.noticeContent,callback:function(e){t.$set(t.form,"noticeContent",e)},expression:"form.noticeContent"}})],1)],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"padding-top":"20px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),t._v(" "),i("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)},[],!1,null,null,null);t.default=d.exports},"3bcd":function(){},"4ff4":function(e,t,i){var n=i("3bcd");i.n(n).a}}]);