"use strict";(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7fa21b9b","chunk-005cb0c7"],{"4b72":function(e,t,a){a.d(t,"e",function(){return l}),a.d(t,"d",function(){return i}),a.d(t,"b",function(){return r}),a.d(t,"g",function(){return o}),a.d(t,"c",function(){return s}),a.d(t,"f",function(){return u}),a.d(t,"a",function(){return c});var n=a("b775");function l(e){return Object(n.a)({url:"/tool/gen/list.json",method:"get",params:e})}function i(e){return Object(n.a)({url:"/tool/gen/db/list",method:"get",params:e})}function r(e){return Object(n.a)({url:"/tool/gen/"+e,method:"get"})}function o(e){return Object(n.a)({url:"/tool/gen",method:"put",data:e})}function s(e){return Object(n.a)({url:"/tool/gen/importTable",method:"post",params:e})}function u(e){return Object(n.a)({url:"/tool/gen/preview/"+e,method:"get"})}function c(e){return Object(n.a)({url:"/tool/gen/"+e,method:"delete"})}},"6f72":function(e,t,a){a.r(t);var n=a("4b72"),l={data:function(){return{visible:!1,tables:[],total:0,dbTableList:[],queryParams:{pageNum:1,pageSize:10,tableName:void 0,tableComment:void 0}}},methods:{show:function(){this.getList(),this.visible=!0},handleSelectionChange:function(e){this.tables=e.map(function(e){return e.tableName})},getList:function(){var t=this;Object(n.d)(this.queryParams).then(function(e){200===e.code&&(t.dbTableList=e.rows,t.total=e.total)})},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleImportTable:function(){var t=this;Object(n.c)({tables:this.tables.join(",")}).then(function(e){t.msgSuccess(e.msg),200===e.code&&(t.visible=!1,t.$emit("ok"))})}}},i=a("2877"),r=Object(i.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"导入表",visible:t.visible,width:"800px",top:"5vh"},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"queryForm",attrs:{model:t.queryParams,inline:!0}},[a("el-form-item",{attrs:{label:"表名称",prop:"tableName"}},[a("el-input",{attrs:{placeholder:"请输入表名称",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.queryParams.tableName,callback:function(e){t.$set(t.queryParams,"tableName",e)},expression:"queryParams.tableName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"表描述",prop:"tableComment"}},[a("el-input",{attrs:{placeholder:"请输入表描述",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.queryParams.tableComment,callback:function(e){t.$set(t.queryParams,"tableComment",e)},expression:"queryParams.tableComment"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:t.handleQuery}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:t.resetQuery}},[t._v("重置")])],1)],1),t._v(" "),a("el-row",[a("el-table",{attrs:{data:t.dbTableList,height:"260px"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tableName",label:"表名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tableComment",label:"表描述"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"}})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:0<t.total,expression:"total>0"}],attrs:{total:t.total,page:t.queryParams.pageNum,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.getList}})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleImportTable}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(){t.visible=!1}}},[t._v("取 消")])],1)],1)},[],!1,null,null,null);t.default=r.exports},"82c8":function(e,t,a){a.r(t);var n=a("4b72"),l=a("6f72"),i=(a("a481"),a("3b2b"),a("bc3a")),r=a.n(i),o=a("5f87"),s="application/zip";function u(e){var t="/prod-api"+e;r()({method:"get",url:t,responseType:"blob",headers:{Authorization:"Bearer "+Object(o.a)()}}).then(function(e){var t,a,n,l,i,r,o;t=e,a=s,n=document.createElement("a"),l=new Blob([t.data],{type:a}),i=new RegExp("filename=([^;]+\\.[^\\.;]+);*"),r=decodeURI(t.headers["content-disposition"]),o=(o=i.exec(r)[1]).replace(/\"/g,""),n.href=URL.createObjectURL(l),n.setAttribute("download",o),document.body.appendChild(n),n.click(),document.body.appendChild(n)})}var c={name:"Gen",components:{importTable:l.default},data:function(){return{loading:!0,uniqueId:"",ids:[],tableNames:[],single:!0,multiple:!0,total:0,tableList:[],dateRange:"",queryParams:{pageNum:1,pageSize:10,tableName:void 0,tableComment:void 0},preview:{open:!1,title:"代码预览",data:{},activeName:"domain.java"}}},created:function(){this.getList()},activated:function(){var e=this.$route.query.t;null!=e&&e!=this.uniqueId&&(this.uniqueId=e,this.resetQuery())},methods:{getList:function(){var t=this;this.loading=!0,Object(n.e)(this.addDateRange(this.queryParams,this.dateRange)).then(function(e){t.tableList=e.rows,t.total=e.total,t.loading=!1})},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},handleGenTable:function(e){var t=e.tableName||this.tableNames;""!=t?u("/tool/gen/batchGenCode?tables="+t):this.msgError("请选择要生成的数据")},openImportTable:function(){this.$refs.import.show()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handlePreview:function(e){var t=this;Object(n.f)(e.tableId).then(function(e){t.preview.data=e.data,t.preview.open=!0})},handleSelectionChange:function(e){this.ids=e.map(function(e){return e.tableId}),this.tableNames=e.map(function(e){return e.tableName}),this.single=1!=e.length,this.multiple=!e.length},handleEditTable:function(e){var t=e.tableId||this.ids[0];this.$router.push({path:"/gen/edit",query:{tableId:t}})},handleDelete:function(e){var t=this,a=e.tableId||this.ids;this.$confirm('是否确认删除表编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return Object(n.a)(a)}).then(function(){t.getList(),t.msgSuccess("删除成功")}).catch(function(){})}}},m=a("2877"),d=Object(m.a)(c,function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{staticClass:"app-container"},[n("el-form",{ref:"queryForm",attrs:{model:a.queryParams,inline:!0,"label-width":"68px"}},[n("el-form-item",{attrs:{label:"表名称",prop:"tableName"}},[n("el-input",{attrs:{placeholder:"请输入表名称",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.handleQuery(e)}},model:{value:a.queryParams.tableName,callback:function(e){a.$set(a.queryParams,"tableName",e)},expression:"queryParams.tableName"}})],1),a._v(" "),n("el-form-item",{attrs:{label:"表描述",prop:"tableComment"}},[n("el-input",{attrs:{placeholder:"请输入表描述",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.handleQuery(e)}},model:{value:a.queryParams.tableComment,callback:function(e){a.$set(a.queryParams,"tableComment",e)},expression:"queryParams.tableComment"}})],1),a._v(" "),n("el-form-item",{attrs:{label:"创建时间"}},[n("el-date-picker",{staticStyle:{width:"240px"},attrs:{size:"small","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:a.dateRange,callback:function(e){a.dateRange=e},expression:"dateRange"}})],1),a._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:a.handleQuery}},[a._v("搜索")]),a._v(" "),n("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:a.resetQuery}},[a._v("重置")])],1)],1),a._v(" "),n("el-row",{staticClass:"mb8",attrs:{gutter:10}},[n("el-col",{attrs:{span:1.5}},[n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["tool:gen:code"],expression:"['tool:gen:code']"}],attrs:{type:"primary",icon:"el-icon-download",size:"mini"},on:{click:a.handleGenTable}},[a._v("生成")])],1),a._v(" "),n("el-col",{attrs:{span:1.5}},[n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["tool:gen:import"],expression:"['tool:gen:import']"}],attrs:{type:"info",icon:"el-icon-upload",size:"mini"},on:{click:a.openImportTable}},[a._v("导入")])],1),a._v(" "),n("el-col",{attrs:{span:1.5}},[n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["tool:gen:edit"],expression:"['tool:gen:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:a.single},on:{click:a.handleEditTable}},[a._v("修改")])],1),a._v(" "),n("el-col",{attrs:{span:1.5}},[n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["tool:gen:remove"],expression:"['tool:gen:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:a.multiple},on:{click:a.handleDelete}},[a._v("删除")])],1)],1),a._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],attrs:{data:a.tableList},on:{"selection-change":a.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),a._v(" "),n("el-table-column",{attrs:{label:"序号",align:"center",prop:"tableId",width:"50px"}}),a._v(" "),n("el-table-column",{attrs:{label:"表名称",align:"center",prop:"tableName","show-overflow-tooltip":!0,width:"130"}}),a._v(" "),n("el-table-column",{attrs:{label:"表描述",align:"center",prop:"tableComment","show-overflow-tooltip":!0,width:"130"}}),a._v(" "),n("el-table-column",{attrs:{label:"实体",align:"center",prop:"className","show-overflow-tooltip":!0,width:"130"}}),a._v(" "),n("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime",width:"160"}}),a._v(" "),n("el-table-column",{attrs:{label:"更新时间",align:"center",prop:"updateTime",width:"160"}}),a._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:a._u([{key:"default",fn:function(e){return[n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["tool:gen:preview"],expression:"['tool:gen:preview']"}],attrs:{type:"text",size:"small",icon:"el-icon-view"},on:{click:function(){return a.handlePreview(e.row)}}},[a._v("预览")]),a._v(" "),n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["tool:gen:edit"],expression:"['tool:gen:edit']"}],attrs:{type:"text",size:"small",icon:"el-icon-edit"},on:{click:function(){return a.handleEditTable(e.row)}}},[a._v("编辑")]),a._v(" "),n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["tool:gen:remove"],expression:"['tool:gen:remove']"}],attrs:{type:"text",size:"small",icon:"el-icon-delete"},on:{click:function(){return a.handleDelete(e.row)}}},[a._v("删除")]),a._v(" "),n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["tool:gen:code"],expression:"['tool:gen:code']"}],attrs:{type:"text",size:"small",icon:"el-icon-download"},on:{click:function(){return a.handleGenTable(e.row)}}},[a._v("生成代码")])]}}])})],1),a._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:0<a.total,expression:"total>0"}],attrs:{total:a.total,page:a.queryParams.pageNum,limit:a.queryParams.pageSize},on:{"update:page":function(e){return a.$set(a.queryParams,"pageNum",e)},"update:limit":function(e){return a.$set(a.queryParams,"pageSize",e)},pagination:a.getList}}),a._v(" "),n("el-dialog",{attrs:{title:a.preview.title,visible:a.preview.open,width:"80%",top:"5vh"},on:{"update:visible":function(e){return a.$set(a.preview,"open",e)}}},[n("el-tabs",{model:{value:a.preview.activeName,callback:function(e){a.$set(a.preview,"activeName",e)},expression:"preview.activeName"}},a._l(a.preview.data,function(e,t){return n("el-tab-pane",{key:t,attrs:{label:t.substring(t.lastIndexOf("/")+1,t.indexOf(".vm")),name:t.substring(t.lastIndexOf("/")+1,t.indexOf(".vm"))}},[n("pre",[a._v(a._s(e))])])}),1)],1),a._v(" "),n("import-table",{ref:"import",on:{ok:a.handleQuery}})],1)},[],!1,null,null,null);t.default=d.exports}}]);